// good states
state init "Init";
state slept "Slept";
state yielded "Yielded";
// bad states
state badyield "Yield not following sleep";
state noyield "Sleep not followed by yield";
state doublesleep "Sleep followed by sleep";

ast sleep { function_call { identifier "act_SleepOn" } { ellipsis } };
ast yield { function_call { identifier "act_Yield" } { ellipsis } };
ast exit { function_exit 
{ or 
{ function_declarator "idt_OnTrapOrInterrupt" { ellipsis } }
{ function_declarator "idt_OnKeyInvocationTrap" { ellipsis } }
{ function_declarator "act_HandleYieldEntry" { ellipsis } }
} 
{ ellipsis } };
ast other { other };

transition init slept sleep;
transition init badyield yield;
transition init init other;

transition slept yielded yield;
transition slept noyield exit;
transition slept doublesleep sleep;
transition slept slept other;

transition yielded yielded other;

transition badyield badyield other;

transition noyield noyield other;

transition doublesleep doublesleep other;

