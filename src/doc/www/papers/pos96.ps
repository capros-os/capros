%!PS-Adobe-2.0
%%Creator: dvips(k) 5.85 Copyright 1999 Radical Eye Software
%%Title: pos7-final.dvi
%%Pages: 12
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Italic Times-Bold Courier
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o pos7-final.ps pos7-final.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 1999.10.13:2133
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (pos7-final.dvi)
@start /Fa 103[50 32[50 1[50 50 50 50 1[50 50 50 4[50
50 2[50 50 50 40[50 10[50 50 46[{TeXBase1Encoding ReEncodeFont}17
83.022 /Courier rf /Fb 138[33 1[26 26 1[33 33 33 48 18
4[33 18 29 33 29 1[33 97[{TeXBase1Encoding ReEncodeFont}14
66.4176 /Times-Italic rf /Fc 203[25 25 25 25 49[{
TeXBase1Encoding ReEncodeFont}4 49.8132 /Times-Roman
rf
%DVIPSBitmapFont: Fd cmr7 7 4
/Fd 4 55 df<EB3F803801FFF03803E0F83807803C48487E001E7F003E1480A2003C1307
007C14C0A400FC14E0AE007C14C0A36CEB0F80A36CEB1F006C131E6C6C5A3803E0F86CB4
5A38003F801B277EA521>48 D<13381378EA01F8121F12FE12E01200B3AB487EB512F8A2
15267BA521>I<13FF000313E0380E03F0381800F848137C48137E00787F12FC6CEB1F80
A4127CC7FC15005C143E147E147C5C495A495A5C495A010EC7FC5B5B903870018013E0EA
0180390300030012065A001FB5FC5A485BB5FCA219267DA521>I<EB0FE0EB3FF8EBF81C
3801E0063803C01F48485AEA0F005A121E003E131E91C7FC5AA21304EB3FC038FCFFF038
FDC078EB003CB4133E48131E141FA2481480A4127CA4003C1400123E001E131E143E6C13
3C6C6C5A3803C1F03801FFC06C6CC7FC19277DA521>54 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fe cmmi10 10 15
/Fe 15 123 df<EB0380D907E01307010FEC0F80161F5CA2011F143FA24A1400A2013F5C
A291C7127EA24914FEA2017E5CA201FE1301A2495CA200011403A249ECF018A200031407
1738EEE030150F00071670031F1360153F6D017713E0486C9038E3E1C0903AFF03C1F380
903ACFFF00FF00D9C3FC133ED81FC0C9FCA25BA2123FA290CAFCA25AA2127EA212FEA25A
A212702D377EA432>22 D<92391FE00380DBFFFC130002036D5A91390FE01F8F91393F00
07DF027EEB01FE02F81300495A4948147E177C4948143C495AA2011F153891C8FCA34915
30A28094C7FC80806D7E14FEECFFE06D13FE6DEBFFC06D14F06D806D80021F7F02037FEC
003F03037F1500167F163F161FA3120C160FA2001C151F94C7FCA3003C153EA25E003E5D
127E007F4A5A6D495A6DEB0FC0D8F9F0495AD8F0FE01FEC8FC39E03FFFF8010F13E0D8C0
0190C9FC313D7CBA33>83 D<133FEA1FFFA3C67E137EA313FE5BA312015BA312035BA312
07EBE0FCEBE3FF9038E707C0390FFE03E09038F801F001F013F8EBE000485A15FC5BA212
3F90C7FCA214015A127EA2140312FE4814F8A2140715F05AEC0FE0A215C0EC1F80143F00
781400007C137E5C383C01F86C485A380F07C06CB4C7FCEA01FC1E3B7CB924>98
D<EC3FC0903801FFF0903807E07890381F801C90387E001E49130E485A485A1207485A49
131E001F141C153C484813F8EC03E0007FEB3FC09038FFFE0014E090C8FC5A5AA7007E14
0315071506003E140E153C6C14706C6C13E0EC07C03903E03F003801FFF838003FC02026
7DA427>101 D<EC07E0EC1FF891387C1C38903901F80EFC903803F007903807E003EB0F
C090381F8001D93F0013F85B017E130313FE16F0485A150712034914E0A2150F12074914
C0A2151FA2491480A2153FA2160000035C6D5B00015B4A5A3900F8077E90387C1EFEEB1F
F8903807E0FC90C7FC1401A25DA21403001E5C123F387F80075D00FF495A49485A4849C7
FC007C137E383C01F8381FFFE0000390C8FC26367FA428>103 D<EB03F0EA01FFA3EA00
075CA3130F5CA3131F5CA3133F91C9FCA35B90387E03F8EC0FFF91383C0F809039FEF007
C0D9FDC07FEBFF80EC0003485A5BA249130712035BA2150F00075D5BA2151F000F5D5B15
3F93C7FC121F4990387F0180157EEDFE03003F02FC130090C7FC5EEDF80648150E007E15
0C161C5E00FEEC787048EC3FE00038EC0F80293B7CB930>I<14E0EB03F8A21307A314F0
EB01C090C7FCAB13F8EA03FEEA070F000E1380121C121812381230EA701F1260133F00E0
130012C05BEA007EA213FE5B1201A25B12035BA20007131813E01438000F133013C01470
EB806014E014C01381EB838038078700EA03FEEA00F815397EB71D>I<EB0FC0EA03FF5A
A2EA001F1480A2133FA21400A25BA2137EA213FEA25BA21201A25BA21203A25BA21207A2
5BA2120FA25BA2121FA25BA2123FA290C7FCA25AA2EA7E03A2EAFE07130612FCA2130E13
0C131C1318EA7C38EA3C70EA1FE0EA0780123B7DB919>108 D<D803E0137F3A07F801FF
E03A0E3C0781F03A1C3E1E00F826383F387F00305B4A137C00705B00605BA200E090C712
FC485A137EA20000140101FE5C5BA2150300015D5B15075E120349010F133016C0031F13
700007ED80605B17E0EE00C0000F15014915801603EE0700001FEC0F0E49EB07FC0007C7
EA01F02C267EA432>110 D<EC1FC0ECFFF8903807E07E90380F801F90393F000F80017E
14C0491307484814E0485A4848EB03F0120F5B121F48481307A2127F90C7FCA2150F5A48
15E0A2151F16C0A248EC3F8016005D157E007E5C4A5A003E495A003F495A6C495A6C6C48
C7FC3807E07E3801FFF038003F8024267DA428>I<14FF010313C090380F80F090383E00
380178131C153C4913FC0001130113E0A33903F000F06D13007F3801FFE014FC14FF6C14
806D13C0011F13E013039038003FF014071403001E1301127FA24814E0A348EB03C012F8
00E0EB07800070EB0F006C133E001E13F83807FFE0000190C7FC1E267CA427>115
D<EB01C0497E1307A4130F5CA3131F5CA3133F91C7FC007FB51280A2B6FCD8007EC7FCA3
13FE5BA312015BA312035BA312075BA3120FEBC006A2140E001F130CEB801C141814385C
146014E0380F81C038078780D803FEC7FCEA00F819357EB31E>I<903907E001F090391F
F807FC9039783E0E0F9039E01F1C1FD801C09038383F803A03800FF07F0100EBE0FF5A00
0E4A1300000C157E021F133C001C4AC7FC1218A2C7123FA292C8FCA25CA2147EA214FEA2
4A130CA20101141C001E1518003F5BD87F81143801835C00FF1560010714E03AFE0E7C01
C0D87C1C495A2778383E0FC7FC391FF00FFC3907C003F029267EA42F>120
D<13F8D803FE1470D8070F14F8000EEB8001121C121800381403003015F0EA701F126001
3F130700E0010013E012C05BD8007E130F16C013FE5B151F000115805BA2153F00031500
5BA25D157EA315FE5D1401000113033800F80790387C1FF8EB3FF9EB0FE1EB00035DA200
0E1307D83F805B007F495AA24A5A92C7FCEB003E007C5B00705B6C485A381E07C06CB4C8
FCEA01FC25367EA429>I<D901E01360D90FF813E0496C13C090383FFE0190397FFF0380
90B5EA07009038F81FFF3901E003FE9038C0001C495B5DC85A4A5A4A5A4AC7FC140E5C5C
14F0495AEB038049C8FC130E5B4913035B495B484813064848130E48C75AD80FFC137C39
1FFF81F8381E0FFFD838075B486C5B00605CD8E00190C7FC38C0007C23267DA427>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Ff cmmi7 7 1
/Ff 1 105 df<137CEA0FFCA2C65AA21201A25BA21203A25BA21207A2EBC1F8EBC7FE38
0FDE1F9038F80F8013E0EBC007381F800FA21300A25AEC1F00123EA2007E133EA2007C14
0C147C00FC141814F8481430147815E048EB3FC048EB1F001E287BA727>104
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmr10 10 7
/Fg 7 55 df<146014E0EB01C0EB0380EB0700130E131E5B5BA25B485AA2485AA212075B
120F90C7FCA25A121EA2123EA35AA65AB2127CA67EA3121EA2121F7EA27F12077F1203A2
6C7EA26C7E1378A27F7F130E7FEB0380EB01C0EB00E01460135278BD20>40
D<12C07E12707E7E7E120F6C7E6C7EA26C7E6C7EA21378A2137C133C133E131EA2131F7F
A21480A3EB07C0A6EB03E0B2EB07C0A6EB0F80A31400A25B131EA2133E133C137C1378A2
5BA2485A485AA2485A48C7FC120E5A5A5A5A5A13527CBD20>I<EB03F8EB1FFF90387E0F
C09038F803E03901E000F0484813780007147C48487FA248C77EA2481580A3007EEC0FC0
A600FE15E0B3007E15C0A4007F141F6C1580A36C15006D5B000F143EA26C6C5B6C6C5B6C
6C485A6C6C485A90387E0FC0D91FFFC7FCEB03F8233A7DB72A>48
D<EB01C013031307131F13FFB5FCA2131F1200B3B3A8497E007FB512F0A31C3879B72A>
I<EB0FF0EB7FFE48B57E3903E03FE0390F000FF0000E6D7E486D7E486D7E123000706D7E
126012FCB4EC7F807FA56CC7FC121CC8FCEDFF00A34A5A5D14035D4A5A5D140F4A5A4A5A
92C7FC147C5C495A495A495A495A91C8FC011EEB01805B5B49130348481400485A485A00
0EC75A000FB6FC5A5A485CB6FCA321387CB72A>I<EB07F8EB3FFF4913C03901F80FF039
03C007F848486C7E380E0001000F80381FE0006D7FA56C5A6C5AC85A1401A25D4A5AA24A
5A5DEC0F80027EC7FCEB1FFCECFF809038000FE06E7EEC01FC816E7EED7F80A216C0A215
3F16E0A2121EEA7F80487EA416C049137F007F1580007EC7FC0070ECFF006C495A121E39
0F8003F83907F00FF00001B512C06C6C90C7FCEB0FF8233A7DB72A>I<EC3FC0903801FF
F0010713FC90380FE03E90383F800790387E001F49EB3F804848137F485AA2485A000FEC
3F0049131E001F91C7FCA2485AA3127F90C9FCEB01FC903807FF8039FF1E07E090383801
F0496C7E01607F01E0137E497FA249148016C0151FA290C713E0A57EA56C7E16C0A2121F
ED3F807F000F15006C6C5B15FE6C6C5B6C6C485A3900FE07F090383FFFC06D90C7FCEB03
FC233A7DB72A>54 D E
%EndDVIPSBitmapFont
/Fh 203[29 29 29 29 49[{TeXBase1Encoding ReEncodeFont}4
58.1154 /Times-Roman rf /Fi 134[50 50 1[50 55 33 39 44
1[55 50 55 83 28 2[28 55 50 1[44 55 44 55 50 12[66 55
2[61 2[94 3[39 4[72 72 1[72 11[50 50 50 50 50 2[25 46[{
TeXBase1Encoding ReEncodeFont}34 99.6264 /Times-Bold
rf /Fj 134[42 42 60 42 46 28 32 37 1[46 42 46 69 23 46
1[23 46 42 28 37 46 37 46 42 9[83 3[46 60 1[51 3[55 5[51
55 60 60 55 60 14[42 42 2[21 46[{TeXBase1Encoding ReEncodeFont}37
83.022 /Times-Bold rf /Fk 107[29 29 25[33 33 48 33 33
18 26 22 1[33 33 33 52 18 33 18 18 33 33 22 29 33 29
33 29 3[22 1[22 6[41 37 44 1[37 48 48 59 1[48 1[22 48
48 37 41 48 44 1[48 7[33 33 33 1[33 33 33 33 33 33 1[17
22 17 5[52 2[33 35[{TeXBase1Encoding ReEncodeFont}58
66.4176 /Times-Roman rf
%DVIPSBitmapFont: Fl cmsy6 6 1
/Fl 1 4 df<136013701360A20040132000E0137038F861F0387E67E0381FFF803807FE
00EA00F0EA07FE381FFF80387E67E038F861F038E060700040132000001300A213701360
14157B9620>3 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fm cmsy10 10 4
/Fm 4 30 df<007FB81280B912C0A26C17803204799641>0 D<EB1FF0EB7FFC48B5FC48
14804814C04814E04814F04814F8A24814FCA2B612FEA96C14FCA26C14F8A26C14F06C14
E06C14C06C14806C140038007FFCEB1FF01F1F7BA42A>15 D<EF0180EF07C0171FEF7F80
933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED1FF0ED7FC04A48C8FCEC07FCEC1F
F0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA07FCEA3FF0EA7FC048CBFC5AEA7F
80EA3FE0EA0FF8EA03FEC66C7EEB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8EC03FE
913800FF80ED3FE0ED0FF8ED03FE923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3FC0
170FEF038094C7FCAE007FB81280B912C0A26C1780324479B441>20
D<0040142000F0147800FC147EB4EC7F806C6C6D7ED81FE0EB0FF0D807F8EB03FCD801FC
EB00FE6CB4EC7F80D93FC0EB1FE0D90FE0EB07F0D907F8EB03FCD901FEEB00FFD9007FEC
3F80DA3FC0EB1FE0DA0FF0EB07F8DA03F8EB01FCDA01FE6DB4FC9126007F80EB3FC0DB1F
E0EB0FF06F6C6D7EDB03FCEB01FEDB00FF9038007F80DC3F80EB1FC0DC1FE0EB0FF0DC07
F8EB03FCDC01FCEB00FE706C147FA24C4814FEDC07F8EB03FCDC1FE0EB0FF0DC3F80EB1F
C004FFC7EA7F80DB03FC903801FE00DB0FF0EB07F84B48495ADB7F80EB3FC0DA01FEC7B4
C7FCDA03F8EB01FCDA0FF0EB07F8DA3FC0EB1FE04AC7EA3F80D901FE02FFC8FCD907F8EB
03FCD90FE0EB07F0D93FC0EB1FE001FFC7EA7F80D801FC02FEC9FCD807F8EB03FCD81FE0
EB0FF0D87F80EB3FC048C7485A00FC027ECAFC00F0147848377BB053>29
D E
%EndDVIPSBitmapFont
/Fn 133[32 37 37 55 37 42 23 32 32 1[42 42 42 60 23 37
23 23 42 42 23 37 42 37 42 42 7[46 51 69 51 60 46 42
51 1[51 60 55 69 1[55 37 28 60 1[51 51 60 55 51 51 6[28
5[42 42 1[42 1[23 21 28 21 2[28 28 28 39[{TeXBase1Encoding ReEncodeFont}
58 83.022 /Times-Italic rf /Fo 138[66 40 47 53 1[66 60
66 1[33 66 40 33 66 60 40 53 66 53 66 60 12[80 66 86
2[93 1[113 3[47 5[86 1[86 11[60 60 60 60 60 49[{
TeXBase1Encoding ReEncodeFont}32 119.552 /Times-Bold
rf
%DVIPSBitmapFont: Fp cmmi9 9 1
/Fp 1 121 df<90391F801F8090397FE07FE09039E0F0E0703A01C0F9C0F83903807D83
3807007F000E1403000C15F0001C137E0018EC01C002FEC7FC00385B1210C7FC13015CA3
1303A25C1640010714E016C0001C5B007E1401010F148000FE1403011FEB0700011B130E
39F839F01C397070F878393FE07FE0390F801F8025227EA02C>120
D E
%EndDVIPSBitmapFont
/Fq 107[33 33 24[33 37 37 54 37 37 21 29 25 37 37 37
37 58 21 37 21 21 37 37 25 33 37 33 37 33 12[46 42 50
1[42 54 5[25 3[46 1[50 7[21 21 1[37 1[37 5[37 1[19 25
19 41[42 2[{TeXBase1Encoding ReEncodeFont}45 74.7198
/Times-Roman rf /Fr 139[25 29 33 14[33 42 37 31[54 65[{
TeXBase1Encoding ReEncodeFont}7 74.7198 /Times-Bold rf
%DVIPSBitmapFont: Fs cmsy8 8 1
/Fs 1 4 df<130C131EA50060EB01800078130739FC0C0FC0007FEB3F80393F8C7F0038
07CCF83801FFE038007F80011EC7FCEB7F803801FFE03807CCF8383F8C7F397F0C3F8000
FCEB0FC039781E078000601301000090C7FCA5130C1A1D7C9E23>3
D E
%EndDVIPSBitmapFont
/Ft 134[44 2[44 1[28 39 39 2[50 50 1[28 2[28 2[28 44
3[50 11[72 4[61 80[{TeXBase1Encoding ReEncodeFont}14
99.6264 /Times-Italic rf /Fu 137[50 1[28 1[33 1[50 50
50 78 3[28 50 2[44 50 1[50 44 13[55 5[89 2[39 3[55 1[72
10[50 2[50 3[50 50 2[25 1[25 44[{TeXBase1Encoding ReEncodeFont}24
99.6264 /Times-Roman rf /Fv 105[42 1[37 37 24[37 42 42
60 42 42 23 32 28 42 42 42 42 65 23 42 23 23 42 42 28
37 42 37 42 37 3[28 1[28 1[60 60 78 60 60 51 46 55 1[46
60 60 74 51 60 32 28 60 60 46 51 60 55 55 60 5[23 23
42 42 42 42 42 42 42 42 42 42 23 21 28 21 47 1[28 28
28 35[46 46 2[{TeXBase1Encoding ReEncodeFont}77 83.022
/Times-Roman rf /Fw 139[40 1[48 3[72 1[40 2[40 72 72
1[64 1[64 1[64 13[80 96 2[104 3[104 5[88 1[96 67[{
TeXBase1Encoding ReEncodeFont}16 143.462 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 964 440 a Fw(State)35 b(Caching)f(in)i(the)f(ER)-6
b(OS)35 b(K)l(ernel)698 623 y Fv(Implementing)18 b(Ef)n(\002cient)h
(Orthogonal)f(Persistence)i(in)h(a)f(Pure)g(Capability)g(System)1557
863 y Fu(Jonathan)k(S.)h(Shapiro)1647 980 y(Da)n(vid)f(J.)h(F)o(arber)
1576 1096 y(Jonathan)f(M.)g(Smith)1406 1212 y Ft(Univer)o(sity)g(of)h
(P)-8 b(ennsylvania)2501 1176 y Fs(\003)1581 1448 y Fu(2)25
b(September)l(,)f(1996)1815 1908 y Fr(Abstract)91 2071
y Fq(ER)m(OS,)h(the)h(Extremely)g(Reliable)g(Operating)h(System,)g
(addresses)h(the)e(issues)g(of)g(reliability)g(and)h(security)f(by)h
(combining)g(tw)o(o)g(ideas)91 2162 y(from)d(earlier)g(systems:)33
b(capabilities)24 b(and)h(a)f(persistent)g(single-le)n(v)o(el)g(store.)
38 b(Capabilities)23 b(unify)i(object)f(naming)h(with)e(access)i
(control.)91 2254 y(Persistence)c(e)o(xtends)g(this)f(naming)i(and)f
(access)g(control)g(uniformly)g(across)g(the)g(memory)g(hierarchy;)g
(main)g(memory)g(is)g(vie)n(wed)g(simply)91 2345 y(as)e(a)f(cache)i(of)
e(the)h(single-le)n(v)o(el)f(store.)23 b(The)c(combination)h
(simpli\002es)e(application)h(design,)g(allo)n(ws)g(programs)g(to)f
(observ)o(e)i(the)e(\223principle)91 2436 y(of)h(least)g(pri)n(vile)o
(ge,)-5 b(\224)19 b(and)g(enables)h(acti)n(v)o(e)f(objects)h(to)e(be)i
(constructed)g(securely)-5 b(.)91 2561 y(Prior)21 b(softw)o(are)g
(capability)h(implementations)h(ha)o(v)o(e)e(suf)n(fered)h(from)f(poor)
i(performance.)31 b(In)22 b(ER)m(OS,)d(cacheing)k(techniques)g(are)e
(used)h(to)91 2652 y(implement)h(authority)g(checks)g(ef)n(\002ciently)
f(and)h(to)g(preserv)o(e)g(the)f(state)g(of)g(acti)n(v)o(e)h(processes)
g(in)f(a)h(form)f(optimized)h(for)f(the)g(demands)i(of)91
2743 y(the)g(machine.)38 b(The)24 b(resulting)f(system)h(pro)o(vides)h
(performance)g(competati)n(v)o(e)f(with)g(con)m(v)o(entional)h
(designs.)38 b(This)23 b(paper)i(describes)f(the)91 2835
y(ER)m(OS)17 b(object)h(model)g(and)h(the)f(structures)g(used)g(to)g
(ef)n(\002ciently)g(map)g(this)g(model)g(onto)g(one)h(hardw)o(are)g
(implementation:)k(the)18 b(Int)3544 2847 y Fv(e)3585
2835 y Fq(l)f(80)p Fp(x)p Fq(86)91 2926 y(processor)j(architecture.)
-116 3275 y Fo(1)119 b(Intr)n(oduction)-116 3508 y Fv(ER)m(OS,)19
b(the)f(Extremely)f(Reliable)i(Operating)e(System,)i(pro)o(vides)e(an)i
(en)m(vironment)c(for)j(long-li)n(v)o(ed)e(persistent)j(application)e
(systems.)25 b(The)-116 3607 y(moti)n(v)n(ation)15 b(for)h(this)i(ef)n
(fort)e(is)i(to)f(f)o(acilitate)g(research)f(in)h(user)g(en)m
(vironments,)d(reliable)j(application)e(design,)i(scheduling,)f
(security)-5 b(,)16 b(and)h(\(in)-116 3707 y(the)22 b(future\))e(reco)o
(v)o(erable)f(distrib)n(ution)h(in)i(such)g(systems.)30
b(A)22 b(primary)e(design)h(objecti)n(v)o(e)g(is)h(to)g(achie)n(v)o(e)f
(a)h(softw)o(are)f(mean)g(time)h(between)-116 3806 y(f)o(ailures)e
(\(MTBF\))g(measured)f(in)h(years.)8 3948 y(T)-7 b(w)o(o)17
b(essential)h(dif)n(ferences)d(between)h(ER)m(OS)h(and)g(con)m(v)o
(entional)c(systems)18 b(are)e(the)h(use)g(of)g Fn(per)o(sistence)g
Fv(and)f Fn(capabilities)p Fv(.)23 b(Persistence)-116
4047 y(simpli\002es)j(the)h(construction)d(of)i Fn(active)g(objects)p
Fv(,)h(which)e(ha)n(v)o(e)h(greater)f(e)o(xpressi)n(v)o(e)g(po)n(wer)g
(than)h(the)g(passi)n(v)o(e)g(objects)g(of)f(con)m(v)o(entional)-116
4147 y(systems.)36 b(A)25 b(consistent)e(snapshot)g(of)h(all)h(system)f
(state,)h(including)d(processes,)i(is)h(periodically)d(written)i(to)g
(the)g(disk)g(by)f(a)i(lightweight,)-116 4246 y(f)o(ault-tolerant)g
(checkpointing)g(mechanism.)45 b(This)28 b(mechanism)e(allo)n(ws)i(ER)m
(OS)g(to)f(reco)o(v)o(er)f(after)h(transient)g(f)o(ailures)g(in)g(less)
i(than)e(one)-116 4346 y(minute,)19 b(ha)n(ving)g(lost)i(a)f(bounded)e
(amount)h(of)h(w)o(ork.)k(In)c(addition,)f(it)h(dramatically)f(impro)o
(v)o(es)g(the)h(ef)n(\002cienc)o(y)f(of)g(disk)i(write)f(traf)n(\002c.)
8 4487 y(Capabilities)33 b(unify)e(object)h(naming)f(with)i(access)g
(rights.)61 b(While)33 b(access)g(control)e(lists)j(\(A)m(CLs\))e(pro)o
(vide)e(equi)n(v)n(alent)h(po)n(wer)g(in)-116 4587 y(con)m(v)o
(entional)17 b(systems,)j(capabilities)g(of)n(fer)f(se)n(v)o(eral)h
(conceptual)e(adv)n(antages)h(o)o(v)o(er)f(access)j(control)e(lists:)8
4807 y Fm(\017)41 b Fv(Their)20 b(authority)e(can)i(be)h(dele)o(gated.)
8 4997 y Fm(\017)41 b Fv(The)o(y)30 b(support)f(the)h(\223principle)f
(of)h(least)h(pri)n(vile)o(ge.)-6 b(\224)55 b(Applications)29
b(can)h(be)g(designed)g(to)g(hold)g(no)g(more)f(authority)g(than)h(the)
o(y)91 5096 y(require.)p -116 5174 1656 4 v -33 5227
a Fl(\003)3 5251 y Fk(This)c(w)o(ork)g(w)o(as)g(supported)h(by)f(the)h
(He)n(wlett-P)o(ackard)j(Research)e(Grants)e(Program,)i(the)e(A)-7
b(T&T)24 b(F)o(oundation,)30 b(CNRI)c(as)g(manager)h(for)f(NSF)f(and)h
(ARP)-6 b(A)26 b(under)-116 5329 y(cooperati)n(v)o(e)21
b(agreement)e(#NCR-8919038,)f(NSF)f(#CD)m(A-92-14924,)h(and)g(ARP)-6
b(A)17 b(#MD)m(A972-95-1-0013.)p eop
%%Page: 2 2
2 1 bop 8 91 a Fm(\017)41 b Fv(The)o(y)30 b(pro)o(vide)e
(encapsulation:)44 b(objects)30 b(can)g(undetectably)e(act)j(as)g
(proxies)e(for)h(most)h(other)e(objects)h(without)g(compromising)91
191 y(security)-5 b(.)8 429 y Fm(\017)41 b Fv(The)o(y)30
b(eliminate)f(the)i(need)e(for)h(the)h(k)o(ernel)e(to)i(ha)n(v)o(e)e
(an)o(y)h(notion)f(of)h(user)g(identity)-5 b(.)54 b(A)31
b(single)g(system)f(can)g(therefore)f(support)91 528
y(multiple)20 b(simultaneous)f(administrati)n(v)o(e)f(policies)i
(de\002ned)f(by)h(mutually)f(adv)o(ersarial)g(sources)h(of)g(human)e
(authority)-5 b(.)8 772 y(Prior)21 b(softw)o(are)f(capability)g
(implementations)e(ha)n(v)o(e)i(suf)n(fered)g(from)f(poor)h
(performance.)j(In)d(ER)m(OS,)h(cacheing)f(techniques)f(are)i(used)-116
872 y(to)e(implement)g(authority)f(checks)h(ef)n(\002ciently)f(and)h
(to)h(preserv)o(e)e(the)i(state)g(of)f(acti)n(v)o(e)g(processes)h(in)f
(a)h(form)f(optimized)f(for)h(the)g(demands)g(of)-116
971 y(the)e(machine.)23 b(This)17 b(design)g(reduces)f(k)o(ernel)h
(size)h(and)e(comple)o(xity)-5 b(,)15 b(limits)j(the)g(scope)e(of)h
(softw)o(are)g(errors,)g(and)g(f)o(acilitates)g(their)g(detection)-116
1071 y(before)h(committing)f(their)i(consequences)e(to)j(the)f(disk.)25
b(The)18 b(resulting)h(system)g(pro)o(vides)f(performance)e(competati)n
(v)o(e)h(with)i(con)m(v)o(entional)-116 1170 y(designs.)8
1312 y(This)h(paper)f(presents)g(the)h(ER)m(OS)g(object)f
(architecture,)f(and)h(describes)g(ho)n(w)g(the)h(architecture)e(is)j
(ef)n(\002ciently)e(mapped)f(on)h(to)h(the)f(Int)3960
1324 y(e)4001 1312 y(l)-116 1411 y(processor)g(architecture.)-116
1814 y Fo(2)119 b(The)30 b(Object)g(Ar)n(chitectur)n(e)-116
2057 y Fv(ER)m(OS)e(is)g(a)h(\002ne-grain)d(capability)g(system.)48
b(All)28 b(stateful)g(abstractions)e(are)i(composed)e(from)g(only)h(tw)
o(o)h(primiti)n(v)o(e,)g(\002x)o(ed-size)f(object)-116
2156 y(types.)d Fj(P)o(ages)19 b Fv(are)g(the)g(basic)g(unit)g(of)g
(user)g(data)g(storage,)f(and)h(contain)f(an)h(architecture-de\002ned)d
(amount)h(of)i(user)g(data.)25 b Fj(Cgr)o(oups)18 b Fv(are)h(the)-116
2256 y(basic)i(unit)g(of)g(capability)f(storage,)g(and)h(hold)f(16)g
(capabilities.)28 b(Cgroups)20 b(are)h(protected)e(by)i(partitioning.)
26 b(Only)20 b(the)h(k)o(ernel)g(is)h(permitted)-116
2356 y(to)e(e)o(xamine)f(or)h(modify)e(the)j(content)e(of)h(a)g
(cgroup.)j(As)e(a)g(result,)f(applications)f(are)h(unable)f(to)i(e)o
(xamine)d(or)i(for)o(ge)f(capabilities.)8 2497 y(P)o(ages)i(and)e
(cgroups)g(are)h(composed)e(to)j(construct)e(objects)h(such)g(as)h
(memory)d(se)o(gments)i(and)f(domains)g(of)h(authority)-5
b(.)-116 2857 y Fi(2.1)99 b(Capabilities)-116 3070 y
Fv(Objects)23 b(and)g(services)g(in)g(ER)m(OS)h(are)f(named)f(by)g
(capabilities,)i(which)e(consist)i(of)f(a)g(\()p Fn(type)p
Fv(,)g Fn(object)g(id)p Fv(,)h Fn(authority)p Fv(\))d(tuple.)34
b(The)23 b(semantic)-116 3170 y(interpretation)f(of)j(an)g(object)f(in)
h(a)g(gi)n(v)o(en)e(conte)o(xt)h(is)i(determined)c(by)j(the)g(type)f
(\002eld)h(of)f(the)h(capability)-5 b(.)37 b(Placing)25
b(the)f(type)h(indicator)e(in)-116 3269 y(the)f(capability)f(rather)g
(than)h(the)g(object)f(allo)n(ws)i(us)f(to)g(tak)o(e)g(adv)n(antage)e
(of)i(kno)n(wing)e(the)i(underlying)e(object)h(representations)f(to)j
(support)-116 3369 y(user)n(-le)n(v)o(el)d(manipulation)e(of)j
(composite)f(objects,)g(for)g(e)o(xample)g(in)h(f)o(ault)g(handlers.)k
(While)d(it)f(is)h(possible)f(to)g(f)o(abricate)f(combinations)f(of)
-116 3469 y(capabilities)h(that)g(are)g(nonsensical,)f(doing)g(so)h
(does)g(not)g(violate)g(the)g(inte)o(grity)f(of)h(either)g(the)g(k)o
(ernel)f Fn(or)k Fv(the)d(application.)8 3610 y(In)e(addition)f(to)i
(naming)e(objects,)h(capabilities)g(can)g(also)h(name)f(the)g(program)e
(obe)o(yed)h(by)h(a)h(domain)d(or)j(an)f(operating)e(system)j(service.)
-116 3709 y(The)o(y)g(therefore)f(subsume)i(both)f(system)h(calls)h
(and)f(interprocess)f(communication.)8 3851 y(The)k(major)f(capability)
f(types)i(supported)e(by)h(the)h(ER)m(OS)g(k)o(ernel)f(are)g(sho)n(wn)g
(belo)n(w)-5 b(.)32 b(T)-7 b(ypes)23 b(sho)n(wn)f(in)g
Fj(bold)i Fv(are)e(objects)h(construct-)-116 3950 y(ed)28
b(from)f(cgroups)f(and)h(pages.)48 b(T)-7 b(ypes)28 b(sho)n(wn)f(in)h
Fn(italic)g Fv(are)g(services)g(implemented)e(directly)h(by)h(the)g(k)o
(ernel.)47 b(These)28 b(are)g(sho)n(wn)f(for)-116 4050
y(completeness,)19 b(b)n(ut)h(are)g(not)g(described)f(by)g(this)i
(paper)-5 b(.)1270 4290 y(page)232 b(cgroup)98 b(number)i
Fj(segment)1270 4389 y(domain)122 b(start)164 b(r)o(esume)99
b(sense)1270 4489 y Fv(schedule)f Fn(misc)179 b(de)o(vice)8
4728 y Fv(P)o(ages)18 b(and)g(cgroups)e(ha)n(v)o(e)h(already)g(been)g
(described.)23 b(The)18 b(corresponding)c(capabilities)k(e)o(xist)g(in)
g(read-write)e(and)i(read-only)d(v)n(ariants.)-116 4827
y(Se)o(gment)k(capabilities)h(can)g(also)g(be)g(read-write)f(or)h
(read-only)-5 b(.)8 4968 y(A)22 b Fj(number)g Fv(capability)e(is)i(a)f
(self-describing)e(object)h(containing)f(a)j(96)e(bit)i(unsigned)d
(constant)h(that)h(can)g(be)g(fetched)f(by)g(the)h(applica-)-116
5068 y(tion.)29 b(The)o(y)20 b(are)i(primarily)e(used)h(in)h(domains,)f
(as)h(we)g(will)h(see)f(shortly)-5 b(.)28 b(A)22 b(number)e(capability)
g(whose)i(v)n(alue)f(is)h(zero)f(is)i(referred)d(to)i(as)g(a)-116
5168 y Fj(null)f(capability)p Fv(.)8 5309 y(A)f Fj(sense)g(capability)e
Fv(is)i(similar)f(to)g(a)h(read-only)c(cgroup)h(capability)-5
b(,)18 b(e)o(xcept)g(that)h(its)h(read-only)d(property)g(is)j
(\223stick)o(y)-5 b(.)f(\224)23 b(The)c(holder)f(of)-116
5408 y(a)i(sense)h(capability)e(cannot)g(obtain)h(read-write)e(access)j
(to)g(an)o(y)e(object)h(that)g(is)h(transiti)n(v)o(ely)e(reachable)g
(through)f(the)i(sense)h(capability)-5 b(.)p eop
%%Page: 3 3
3 2 bop -116 91 a Fi(2.2)99 b(Segments)-116 293 y Fv(Memory)24
b(se)o(gments)h(\(\223se)o(gments\224\))g(are)h(the)g(basic)g(data)g
(or)o(ganization)c(mechanism)j(of)h(ER)m(OS.)g(The)o(y)f(are)g
(constructed)g(by)g(assembling)-116 393 y(cgroups)18
b(into)i(a)h(tree)f(whose)g(lea)n(v)o(es)g(are)g(pages)g(\(Figure)f
(1\).)1691 362 y Fh(1)1004 520 y
 14998241 10722426 0 0 14998241 10722426 startTexFig
 1004 520 a
%%BeginDocument: seg19pg.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: seg19pg.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Wed Oct 13 21:31:13 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 228 163
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def
/col32 {0.894 0.635 0.000 srgb} bind def

end
save
-6.0 166.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3757 m -1000 -1000 l 4891 -1000 l 4891 3757 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 752 453 m 827 453 l 827 853 l 752 853 l cp gs col-1 s gr 
% Polyline
n 827 453 m 902 453 l 902 853 l 827 853 l cp gs col-1 s gr 
% Polyline
n 902 453 m 977 453 l 977 853 l 902 853 l cp gs col-1 s gr 
% Polyline
n 977 453 m 1053 453 l 1053 853 l 977 853 l cp gs col-1 s gr 
% Polyline
n 1053 453 m 1128 453 l 1128 853 l 1053 853 l cp gs col-1 s gr 
% Polyline
n 1128 453 m 1203 453 l 1203 853 l 1128 853 l cp gs col-1 s gr 
% Polyline
n 1203 453 m 1277 453 l 1277 853 l 1203 853 l cp gs col-1 s gr 
% Polyline
n 1277 453 m 1352 453 l 1352 853 l 1277 853 l cp gs col-1 s gr 
% Polyline
n 1352 453 m 1428 453 l 1428 853 l 1352 853 l cp gs col-1 s gr 
% Polyline
n 1428 453 m 1502 453 l 1502 853 l 1428 853 l cp gs col-1 s gr 
% Polyline
n 1502 453 m 1577 453 l 1577 853 l 1502 853 l cp gs col-1 s gr 
% Polyline
n 1577 453 m 1652 453 l 1652 853 l 1577 853 l cp gs col-1 s gr 
% Polyline
n 1728 453 m 1803 453 l 1803 853 l 1728 853 l cp gs col-1 s gr 
% Polyline
n 1652 453 m 1728 453 l 1728 853 l 1652 853 l cp gs col-1 s gr 
% Polyline
n 1952 1278 m 2027 1278 l 2027 1679 l 1952 1679 l cp gs col-1 s gr 
% Polyline
n 2027 1278 m 2102 1278 l 2102 1679 l 2027 1679 l cp gs col-1 s gr 
% Polyline
n 2102 1278 m 2177 1278 l 2177 1679 l 2102 1679 l cp gs col-1 s gr 
% Polyline
n 2177 1278 m 2252 1278 l 2252 1679 l 2177 1679 l cp gs col-1 s gr 
% Polyline
n 2252 1278 m 2327 1278 l 2327 1679 l 2252 1679 l cp gs col-1 s gr 
% Polyline
n 2327 1278 m 2403 1278 l 2403 1679 l 2327 1679 l cp gs col-1 s gr 
% Polyline
n 2403 1278 m 2478 1278 l 2478 1679 l 2403 1679 l cp gs col-1 s gr 
% Polyline
n 2478 1278 m 2553 1278 l 2553 1679 l 2478 1679 l cp gs col-1 s gr 
% Polyline
n 2553 1278 m 2628 1278 l 2628 1679 l 2553 1679 l cp gs col-1 s gr 
% Polyline
n 2628 1278 m 2702 1278 l 2702 1679 l 2628 1679 l cp gs col-1 s gr 
% Polyline
n 2702 1278 m 2777 1278 l 2777 1679 l 2702 1679 l cp gs col-1 s gr 
% Polyline
n 2777 1278 m 2852 1278 l 2852 1679 l 2777 1679 l cp gs col-1 s gr 
% Polyline
n 2852 1278 m 2928 1278 l 2928 1679 l 2852 1679 l cp gs col-1 s gr 
% Polyline
n 1877 1278 m 1952 1278 l 1952 1679 l 1877 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2928 1278 m 3003 1278 l 3003 1679 l 2928 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 3003 1278 m 3078 1278 l 3078 1679 l 3003 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 228 1279 m 303 1279 l 303 1679 l 228 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 303 1279 m 378 1279 l 378 1679 l 303 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 378 1279 m 453 1279 l 453 1679 l 378 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 453 1279 m 528 1279 l 528 1679 l 453 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 528 1279 m 603 1279 l 603 1679 l 528 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 603 1279 m 678 1279 l 678 1679 l 603 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 678 1279 m 753 1279 l 753 1679 l 678 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 753 1279 m 828 1279 l 828 1679 l 753 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 828 1279 m 903 1279 l 903 1679 l 828 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 903 1279 m 978 1279 l 978 1679 l 903 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 978 1279 m 1053 1279 l 1053 1679 l 978 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1053 1279 m 1128 1279 l 1128 1679 l 1053 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1128 1279 m 1203 1279 l 1203 1679 l 1128 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1203 1279 m 1278 1279 l 1278 1679 l 1203 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1278 1279 m 1353 1279 l 1353 1679 l 1278 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1353 1279 m 1428 1279 l 1428 1679 l 1353 1679 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
/Times-Roman ff 90.00 scf sf
153 1380 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
1466 1380 m
gs 1 -1 sc (15) col-1 sh gr
% Polyline
n 2055 704 m 2055 594 l 2535 594 l 2535 704 l cp gs col-1 s gr 
% Polyline
n 603 453 m 677 453 l 677 853 l 603 853 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
n 677 453 m 752 453 l 752 853 l 677 853 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
/Times-Roman ff 90.00 scf sf
528 554 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
1840 554 m
gs 1 -1 sc (15) col-1 sh gr
/Times-Roman ff 90.00 scf sf
1802 1378 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
3115 1378 m
gs 1 -1 sc (15) col-1 sh gr
% Polyline
gs  clippath
255 1155 m 225 1275 l 195 1155 l 195 1290 l 255 1290 l cp
clip
n 630 600 m 630 975 l 225 975 l 225 1275 l gs col-1 s gr gr

% arrowhead
n 255 1155 m 225 1275 l 195 1155 l 225 1155 l 255 1155 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1920 1140 m 1890 1260 l 1860 1140 l 1860 1275 l 1920 1275 l cp
clip
n 720 615 m 720 975 l 1890 975 l 1890 1260 l gs col-1 s gr gr

% arrowhead
n 1920 1140 m 1890 1260 l 1860 1140 l 1890 1140 l 1920 1140 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
246 1906 m 180 2010 l 189 1887 l 147 2015 l 204 2034 l cp
clip
n 255 1440 m 255 1785 l 180 2010 l gs col-1 s gr gr

% arrowhead
n 246 1906 m 180 2010 l 189 1887 l 218 1896 l 246 1906 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 390 1995 m 525 1995 l 525 2145 l 390 2145 l cp gs col-1 s gr 
% Polyline
n 645 1995 m 780 1995 l 780 2145 l 645 2145 l cp gs col-1 s gr 
% Polyline
n 885 1995 m 1020 1995 l 1020 2145 l 885 2145 l cp gs col-1 s gr 
% Polyline
n 1110 1995 m 1245 1995 l 1245 2145 l 1110 2145 l cp gs col-1 s gr 
% Polyline
n 1335 1995 m 1470 1995 l 1470 2145 l 1335 2145 l cp gs col-1 s gr 
% Polyline
n 1560 1995 m 1695 1995 l 1695 2145 l 1560 2145 l cp gs col-1 s gr 
% Polyline
n 1785 1995 m 1920 1995 l 1920 2145 l 1785 2145 l cp gs col-1 s gr 
% Polyline
n 120 1995 m 255 1995 l 255 2145 l 120 2145 l cp gs col-1 s gr 
% Polyline
n 240 2235 m 375 2235 l 375 2385 l 240 2385 l cp gs col-1 s gr 
% Polyline
n 510 2250 m 645 2250 l 645 2400 l 510 2400 l cp gs col-1 s gr 
% Polyline
n 750 2250 m 885 2250 l 885 2400 l 750 2400 l cp gs col-1 s gr 
% Polyline
n 975 2250 m 1110 2250 l 1110 2400 l 975 2400 l cp gs col-1 s gr 
% Polyline
n 1230 2250 m 1365 2250 l 1365 2400 l 1230 2400 l cp gs col-1 s gr 
% Polyline
n 1455 2250 m 1590 2250 l 1590 2400 l 1455 2400 l cp gs col-1 s gr 
% Polyline
n 1680 2250 m 1815 2250 l 1815 2400 l 1680 2400 l cp gs col-1 s gr 
% Polyline
n 1950 2250 m 2085 2250 l 2085 2400 l 1950 2400 l cp gs col-1 s gr 
% Polyline
gs  clippath
1746 1906 m 1845 1980 l 1723 1962 l 1847 2013 l 1870 1958 l cp
clip
n 1305 1440 m 1305 1755 l 1845 1980 l gs col-1 s gr gr

% arrowhead
n 1746 1906 m 1845 1980 l 1723 1962 l 1734 1934 l 1746 1906 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1525 1901 m 1620 1980 l 1499 1955 l 1620 2014 l 1647 1960 l cp
clip
n 1155 1455 m 1155 1755 l 1620 1980 l gs col-1 s gr gr

% arrowhead
n 1525 1901 m 1620 1980 l 1499 1955 l 1512 1928 l 1525 1901 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1305 1895 m 1395 1980 l 1276 1948 l 1393 2014 l 1423 1961 l cp
clip
n 1020 1470 m 1020 1770 l 1395 1980 l gs col-1 s gr gr

% arrowhead
n 1305 1895 m 1395 1980 l 1276 1948 l 1290 1921 l 1305 1895 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1096 1881 m 1170 1980 l 1058 1928 l 1163 2013 l 1201 1966 l cp
clip
n 855 1455 m 855 1725 l 1170 1980 l gs col-1 s gr gr

% arrowhead
n 1096 1881 m 1170 1980 l 1058 1928 l 1077 1904 l 1096 1881 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
890 1893 m 960 1995 l 850 1938 l 951 2027 l 991 1982 l cp
clip
n 705 1455 m 705 1770 l 960 1995 l gs col-1 s gr gr

% arrowhead
n 890 1893 m 960 1995 l 850 1938 l 870 1916 l 890 1893 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
660 1865 m 705 1980 l 611 1900 l 689 2010 l 738 1975 l cp
clip
n 555 1455 m 555 1770 l 705 1980 l gs col-1 s gr gr

% arrowhead
n 660 1865 m 705 1980 l 611 1900 l 635 1882 l 660 1865 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
349 2101 m 315 2220 l 289 2099 l 285 2234 l 344 2236 l cp
clip
n 330 1440 m 330 1770 l 315 2220 l gs col-1 s gr gr

% arrowhead
n 349 2101 m 315 2220 l 289 2099 l 319 2100 l 349 2101 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
600 2115 m 570 2235 l 540 2115 l 540 2250 l 600 2250 l cp
clip
n 480 1455 m 480 1755 l 570 1995 l 570 2235 l gs col-1 s gr gr

% arrowhead
n 600 2115 m 570 2235 l 540 2115 l 570 2115 l 600 2115 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
855 2130 m 825 2250 l 795 2130 l 795 2265 l 855 2265 l cp
clip
n 630 1440 m 630 1755 l 825 1965 l 825 2250 l gs col-1 s gr gr

% arrowhead
n 855 2130 m 825 2250 l 795 2130 l 825 2130 l 855 2130 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1095 2115 m 1065 2235 l 1035 2115 l 1035 2250 l 1095 2250 l cp
clip
n 780 1455 m 780 1755 l 1065 1965 l 1065 2235 l gs col-1 s gr gr

% arrowhead
n 1095 2115 m 1065 2235 l 1035 2115 l 1065 2115 l 1095 2115 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
469 1856 m 465 1980 l 411 1869 l 439 2001 l 497 1988 l cp
clip
n 420 1440 m 420 1770 l 465 1980 l gs col-1 s gr gr

% arrowhead
n 469 1856 m 465 1980 l 411 1869 l 440 1863 l 469 1856 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1312 2117 m 1275 2235 l 1252 2113 l 1244 2248 l 1304 2252 l cp
clip
n 945 1449 m 945 1755 l 1290 1980 l 1275 2235 l gs col-1 s gr gr

% arrowhead
n 1312 2117 m 1275 2235 l 1252 2113 l 1282 2115 l 1312 2117 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1537 2117 m 1500 2235 l 1477 2113 l 1469 2248 l 1529 2252 l cp
clip
n 1080 1440 m 1080 1740 l 1515 1980 l 1500 2235 l gs col-1 s gr gr

% arrowhead
n 1537 2117 m 1500 2235 l 1477 2113 l 1507 2115 l 1537 2117 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1770 2130 m 1740 2250 l 1710 2130 l 1710 2265 l 1770 2265 l cp
clip
n 1230 1455 m 1230 1740 l 1740 1995 l 1740 2250 l gs col-1 s gr gr

% arrowhead
n 1770 2130 m 1740 2250 l 1710 2130 l 1740 2130 l 1770 2130 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
2048 2129 m 2025 2250 l 1988 2132 l 1996 2267 l 2056 2263 l cp
clip
n 1395 1443 m 1395 1725 l 2010 1980 l 2025 2250 l gs col-1 s gr gr

% arrowhead
n 2048 2129 m 2025 2250 l 1988 2132 l 2018 2130 l 2048 2129 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 2355 1935 m 2490 1935 l 2490 2085 l 2355 2085 l cp gs col-1 s gr 
% Polyline
n 2820 1935 m 2955 1935 l 2955 2085 l 2820 2085 l cp gs col-1 s gr 
% Polyline
n 3045 1935 m 3180 1935 l 3180 2085 l 3045 2085 l cp gs col-1 s gr 
% Polyline
gs  clippath
2265 1870 m 2370 1935 l 2247 1927 l 2375 1968 l 2393 1911 l cp
clip
n 1905 1425 m 1905 1785 l 2370 1935 l gs col-1 s gr gr

% arrowhead
n 2265 1870 m 2370 1935 l 2247 1927 l 2256 1898 l 2265 1870 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
2972 1823 m 2895 1920 l 2917 1798 l 2861 1921 l 2916 1946 l cp
clip
n 2970 1410 m 2970 1755 l 2895 1920 l gs col-1 s gr gr

% arrowhead
n 2972 1823 m 2895 1920 l 2917 1798 l 2945 1811 l 2972 1823 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
3073 1801 m 3105 1920 l 3020 1830 l 3086 1948 l 3139 1919 l cp
clip
n 3030 1410 m 3030 1785 l 3105 1920 l gs col-1 s gr gr

% arrowhead
n 3073 1801 m 3105 1920 l 3020 1830 l 3047 1815 l 3073 1801 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
330 420 m 450 450 l 330 480 l 465 480 l 465 420 l cp
clip
n 825 150 m 150 150 l 150 450 l 450 450 l gs col-1 s gr gr

% arrowhead
n 330 420 m 450 450 l 330 480 l 330 450 l 330 420 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 2056 474 m 2056 360 l 2559 360 l 2559 474 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 465 225 m 974 225 l 974 105 l 465 105 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
n 2040 929 m 2040 809 l 2549 809 l 2549 929 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
2282 1212 m
gs 1 -1 sc (cgroup) col-1 sh gr
/Times-Bold ff 150.00 scf sf
677 1227 m
gs 1 -1 sc (cgroup) col-1 sh gr
/Times-Bold ff 150.00 scf sf
782 2712 m
gs 1 -1 sc (Pages) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1007 417 m
gs 1 -1 sc (cgroup) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2676 930 m
gs 1 -1 sc (Cgroup Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2670 725 m
gs 1 -1 sc (Null Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2683 474 m
gs 1 -1 sc (Page Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1026 180 m
gs 1 -1 sc (Segment Root) col-1 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 1471 2061 a Fv(Figure)h(1:)25 b(A)c(19)e(page)h(se)o(gment)8
2395 y(The)25 b(se)o(gment)g(structure)f(is)i(similar)g(to)f(page)g
(tables)g(in)h(con)m(v)o(entional)c(memory)i(mapping)f(architectures,)i
(and)g(structurally)f(similar)-116 2494 y(to)j(the)h(\002le)g(system)g
(indirection)d(blocks)i(of)g(UNIX)h([Tho78)m(].)47 b(ER)m(OS)28
b(address)f(spaces)h(are)f(implemented)f(as)i(se)o(gments.)46
b(Data)28 b(access)-116 2594 y(rights)e(are)h(determined)e(by)i
(starting)f(at)i(the)f(se)o(gment)f(root)g(and)g(w)o(alking)h(do)n(wn)e
(the)i(tree)g(to)g(the)g(page;)j(if)d(an)o(y)f(capability)g(on)h(the)g
(path)-116 2694 y(from)18 b(the)h(root)f(of)h(the)g(tree)g(to)g(the)g
(page)f(is)i(read-only)-5 b(,)16 b(then)j(all)g(accesses)h(within)f
(the)g(corresponding)d(subse)o(gment)h(are)i(read-only)-5
b(,)16 b(e)n(v)o(en)i(if)-116 2793 y(read-write)h(capabilities)h(e)o
(xist)g(within)g(the)g(subse)o(gment.)8 2934 y(As)i(in)f(hardw)o(are)e
(address)i(spaces,)f(se)o(gments)h(may)f(ha)n(v)o(e)g(unde\002ned)f
(subre)o(gions.)25 b(This)c(is)g(used)g(to)g(describe)f(unmapped)e
(portions)i(of)-116 3034 y(a)g(contiguous)f(area)h(or)f(unallocated)g
(portions)g(of)h(a)g(program)e(heap.)8 3175 y(Unlik)o(e)25
b(hardw)o(are)e(address)h(spaces,)i(the)e(height)g(of)g(an)h(ER)m(OS)g
(se)o(gment)e(tree)i(is)g(v)n(ariable.)37 b(The)25 b(size)g(of)f(an)h
(ER)m(OS)g(se)o(gment)e(is)j Fg(16)3982 3145 y Ff(h)-116
3275 y Fv(pages,)h(where)e Fg(0)33 b Fm(\024)g Fe(h)h
Fm(\024)f Fg(30)26 b Fv(is)h(the)f(height)f(of)g(the)h(tree.)43
b(ER)m(OS)26 b(se)o(gments)f(therefore)f(range)h(in)h(size)h(from)e(1)h
(to)g Fg(2)3412 3245 y Fd(120)3541 3275 y Fv(pages.)42
b(This)26 b(is)-116 3374 y(adequate)18 b(for)h(most)h(currently)e(en)m
(visioned)g(databases,)h(and)h(can)f(readily)g(be)h(e)o(xtended.)j(The)
c(biased)h(log)f(of)h(the)f(se)o(gment)g(size)i(\()p
Fj(BLSS)p Fv(\))f(is)-116 3474 y(contained)e(in)j(its)g(capability)-5
b(.)23 b(BLSS)f(is)f(de\002ned)e(as)1476 3667 y Fe(l)r(og)1583
3679 y Fd(16)1653 3667 y Fg(\()p Fe(seg)s(siz)t(e)d(in)i(by)s(tes)p
Fg(\))g Fm(\000)g Fg(1)-116 3859 y Fv(The)k(bias)g(comes)g(from)f(the)h
(f)o(act)g(that)g(the)g(v)n(alue)g(is)h(almost)f(al)o(w)o(ays)g(used)g
(in)h(tra)n(v)o(ersing)d(cgroups)h(while)h(w)o(alking)f(se)o(gment)g
(trees,)i(where)-116 3959 y(the)d(inde)o(x)f(desired)g(at)i(a)g(gi)n(v)
o(en)e(cgroup)f(is)j(gi)n(v)o(en)e(by)1493 4151 y Fg(\()p
Fv(se)o(gment)h(of)n(fset)45 b Fm(\035)h Fv(BLSS)p Fg(\))-116
4436 y Fj(2.2.1)81 b(Red)21 b(Segments)-116 4638 y Fv(The)28
b(simple)h(se)o(gment)f(cgroups)f(described)g(abo)o(v)o(e)g(are)i(kno)n
(wn)e(in)i(ER)m(OS)g(as)g Fj(black)g(segments)p Fv(.)51
b(A)29 b(special)g(sort)g(of)f(se)o(gment)g(kno)n(wn)-116
4737 y(as)e(a)h Fj(r)o(ed)f(segment)g Fv(e)o(xists)g(to)g(construct)f
(more)g(comple)o(x)f(se)o(gment)h(structures.)41 b(Red)27
b(se)o(gments)e(pro)o(vide)f(for)h(the)h(identi\002cation)f(of)g(the)
-116 4837 y(se)o(gment')-5 b(s)19 b(f)o(ault)h(handler)m(,)f(and)g(for)
h(se)o(gments)f(of)h(v)n(ariable)f(size,)i(and)f(for)f(\223background)e
(se)o(gments.)-6 b(\224)8 4978 y(W)f(e)21 b(mention)d(red)g(se)o
(gments)h(primarily)f(to)h(mak)o(e)g(it)h(clear)f(that)g(ER)m(OS)h(pro)
o(vides)e(ef)n(\002cient)g(support)g(for)h(cop)o(y-on-write)d(and)j(a)g
(mecha-)-116 5078 y(nism)d(for)g(user)n(-le)n(v)o(el)f(handling)f(of)i
(memory)f(access)i(e)o(xceptions,)e(b)n(ut)h(will)h(not)f(address)g
(them)g(further)e(in)j(this)f(paper)-5 b(.)23 b(F)o(or)16
b(a)h(more)e(complete)-116 5177 y(discussion,)k(the)h(reader)g(is)h
(referred)d(to)i(the)h(online)e(ER)m(OS)i(documentation)c([Sha96a)n(,)j
(Sha96b)o(].)p -116 5250 1656 4 v -26 5306 a Fc(1)3 5329
y Fk(F)o(or)i(this)h(reason,)h(follo)n(wing)g(the)f(con)m(v)o(entions)i
(of)e(K)n(e)o(yK)n(OS)f([Har85)q(],)h Fb(cgr)m(oups)g
Fk(are)g(called)h Fb(nodes)f Fk(in)f(the)h(b)o(ulk)f(of)h(the)f
(current)i(ER)m(OS)e(documentation.)40 b(T)-5 b(o)21
b(a)o(v)o(oid)-116 5408 y(collision)e(with)f(the)g(distrib)o(uted)h
(systems)e(community)l(,)g(we)h(are)f(abandoning)j(this)d(term)h(in)f
(f)o(a)o(v)o(or)g(of)g(\223cgroup.)-5 b(\224)p eop
%%Page: 4 4
4 3 bop -116 91 a Fj(2.2.2)81 b(Segmode)20 b(Capabilities)-116
290 y Fv(Gi)n(v)o(en)e(a)i(cgroup)d(capability)-5 b(,)18
b(the)i(holder)e(may)h(ask)g(for)g(a)h(se)o(gment)e(capability)g(for)h
(the)g(same)h(cgroup.)j(Cgroup)17 b(capabilities)j(and)e(se)o(gment)
-116 390 y(capabilities)h(can)h(be)f(used)h(interchangeably)c(to)k
(identify)e(a)i(se)o(gment.)k(Cgroup)19 b(capabilities)g(e)o(xpose)f
(the)i(structure)f(of)g(the)h(se)o(gment)f(to)g(the)-116
489 y(holder)m(,)e(while)j(se)o(gment)e(capabilities)h(k)o(eep)g(the)g
(internal)f(structure)h(opaque.)j(T)-7 b(ypically)i(,)18
b(a)i(se)o(gment)e(will)i(be)g(constructed)d(out)i(of)g(cgroups)-116
589 y(using)h(cgroup)e(capabilities,)j(and)f(a)h(red)f(or)g(black)g(se)
o(gment)g(capability)f(is)j(then)e(f)o(abricated)f(for)h(the)g(root)g
(cgroup)f(and)h(handed)f(to)i(the)f(user)-5 b(.)-116
688 y(Similarly)g(,)24 b(a)h(page)e(capability)g(may)h(be)g(used)g(for)
g(suf)n(\002ciently)f(small)i(se)o(gments.)36 b(The)24
b(term)g Fj(segmode)g(capability)g Fv(is)h(used)f(in)g(conte)o(xts)-116
788 y(where)19 b(an)o(y)h(of)g(these)g(three)g(types)g(of)g(capability)
f(is)i(acceptable.)j(The)c(slots)h(of)f(a)g(black)g(se)o(gment)f
(cgroup)f(contain)h(se)o(gmode)g(capabilities.)-116 1074
y Fi(2.3)99 b(Domains)-116 1273 y Fv(In)21 b(re)n(vie)n(wing)g(the)g
(CAL/TSS)i(project,)e(Butler)h(Lampson)e(noted)h(that)h
Fn(domains)f(of)h(authority)e Fv(and)i Fn(pr)l(ocesses)g
Fv(should)f(ha)n(v)o(e)g(been)g(uni\002ed)-116 1372 y([Lam76)n(].)30
b(Similar)22 b(conclusions)e(are)i(suggested)f(by)g(W)l(ulf)5
b(')-5 b(s)22 b(postmortem)e(on)i(HYDRA/C.mmp)f([W)l(ul81)o(].)30
b(ER)m(OS)22 b(uni\002es)g(domains)f(of)-116 1472 y(authority)d(and)i
(processes)g(into)g(a)g(single)g(object)g(kno)n(wn)f(as)i(a)f
Fj(domain)h Fv(\(Figure)e(2\).)8 1613 y(A)i(domain)e(is)i(a)g(cgroup)d
(\(kno)n(wn)g(as)j(the)f Fj(domain)h(r)o(oot)p Fv(\))d(which)i
(contains:)8 1824 y Fm(\017)41 b Fv(A)24 b Fn(sc)o(hedule)f(capability)
p Fv(.)34 b(The)23 b(ER)m(OS)h(scheduler)f(implements)f
Fn(pr)l(ocessor)i(capacity)f(r)m(eserves)i Fv([Mer93)n(].)35
b Fj(Schedule)25 b Fv(capabilities)91 1924 y(con)m(v)o(e)o(y)18
b(the)i(authority)f(for)g(a)i(running)d(domain)h(to)h(e)o(x)o(ecute)f
(instructions)g(under)g(a)i(particular)d(scheduling)h(reserv)o(e.)8
2096 y Fm(\017)41 b Fv(A)28 b Fn(k)o(eeper)f(start)h(capability)d
Fv(naming)h(the)h(domain)f(\(the)h(k)o(eeper\))e(responsible)h(for)h
(handling)e(e)o(x)o(ecution)g(f)o(aults)i(incurred)e(by)i(this)91
2195 y(domain.)8 2368 y Fm(\017)41 b Fv(A)23 b Fn(se)m(gmode)d
(capability)h Fv(naming)f(the)i(address)g(space)f(for)h(the)g(domain.)
28 b(The)22 b(domain)e(is)j(said)f(to)g(obe)o(y)f(the)h(program)d
(embodied)h(in)91 2467 y(its)i(address)d(space.)8 2640
y Fm(\017)41 b Fv(A)30 b(cgroup)d(capability)g(to)i(the)g
Fn(capability)f(r)m(e)m(gister)o(s)h(cgr)l(oup)p Fv(,)h(which)f(serv)o
(es)f(as)i(the)f(capability)e(re)o(gisters)i(of)f(the)h(domain.)50
b(The)91 2739 y(application)19 b(may)h(in)m(v)n(ok)o(e)f(a)h
(capability)f(gi)n(ving)g(the)i(inde)o(x)e(of)g(the)i(capability)e(re)o
(gister)g(that)i(contains)e(it.)3187 2709 y Fh(2)8 2912
y Fm(\017)41 b Fv(A)21 b(cgroup)d(capability)h(to)i(the)f
Fn(g)o(ener)o(al)f(r)m(e)m(gister)o(s)i(cgr)l(oup)p Fv(.)j(The)c
(general)f(re)o(gisters)g(cgroup)g(contains)g(number)f(capabilities)i
(holding)91 3011 y(those)e(re)o(gister)e(v)n(alues)h(for)g(the)h
(domain)e(that)h(could)g(not)g(be)g(squeezed)f(into)i(the)f(a)n(v)n
(ailable)g(slots)h(of)g(the)f(domain)f(root.)23 b(On)18
b(the)f(80)p Fe(x)p Fv(86)91 3111 y(architecture,)i(it)i(is)g(required)
d(only)h(for)h(domains)f(that)h(use)h(the)f(\003oating)g(point)f(unit.)
8 3283 y Fm(\017)41 b Fv(A)21 b Fn(br)o(and)p Fv(,)e(which)g(is)i(a)g
(capability)e(used)h(by)g(the)g(f)o(abricator)f(of)h(the)g(domain)f(to)
h(identify)f(the)h(domains)f(it)i(constructed.)8 3456
y Fm(\017)41 b Fv(A)24 b Fn(status)p Fv(,)h(which)e(is)h(a)g(number)d
(capability)i(containing)e(the)j(current)e(state)i(of)f(the)h(domain)e
(\(running,)f(a)n(v)n(ailable,)j(or)f(w)o(aiting\))g(and)91
3555 y(the)e(current)d(f)o(ault)j(code)e(and)h(f)o(ault)g(information)e
(\(if)i(an)o(y\).)-116 3766 y(Each)e(of)g(these)h(capabilities)f
(resides)h(in)f(a)h(designated)e(slot)i(within)g(the)f(domain)f(root.)
24 b(The)18 b(remaining)f(slots)i(of)g(the)f(domain)f(root)h(are)h
(used)-116 3866 y(to)h(hold)f(the)i(re)o(gister)e(v)n(alues)h(for)g
(the)g(domain.)1495 3986 y
 7235993 7893811 0 0 7235993 7893811 startTexFig
 1495 3986 a
%%BeginDocument: domain.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: domain.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Wed Oct 13 21:31:13 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 110 120
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-3.0 124.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3059 m -1000 -1000 l 2883 -1000 l 2883 3059 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 525 1125 m 1425 1125 l 1425 1500 l 525 1500 l cp gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
675 1470 m
gs 1 -1 sc (Registers) col-1 sh gr
/Times-Bold ff 150.00 scf sf
675 1275 m
gs 1 -1 sc (General) col-1 sh gr
% Polyline
n 525 1650 m 1425 1650 l 1425 2025 l 525 2025 l cp gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
675 1815 m
gs 1 -1 sc (Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
675 2010 m
gs 1 -1 sc (Registers) col-1 sh gr
% Ellipse
n 1575 375 300 300 0 360 DrawEllipse gs col-1 s gr

/Times-Bold ff 150.00 scf sf
1350 450 m
gs 1 -1 sc (Keeper) col-1 sh gr
% Polyline
n 75 525 m 975 525 l 975 900 l 75 900 l cp gs col-1 s gr 
% Polyline
gs  clippath
405 1095 m 525 1125 l 405 1155 l 540 1155 l 540 1095 l cp
clip
n 225 900 m 225 1125 l 525 1125 l gs col-1 s gr gr

% arrowhead
n 405 1095 m 525 1125 l 405 1155 l 405 1125 l 405 1095 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
405 1620 m 525 1650 l 405 1680 l 540 1680 l 540 1620 l cp
clip
n 150 900 m 150 1650 l 525 1650 l gs col-1 s gr gr

% arrowhead
n 405 1620 m 525 1650 l 405 1680 l 405 1650 l 405 1620 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1545 795 m 1575 675 l 1605 795 l 1605 660 l 1545 660 l cp
clip
n 900 900 m 900 975 l 1575 975 l 1575 675 l gs col-1 s gr gr

% arrowhead
n 1545 795 m 1575 675 l 1605 795 l 1575 795 l 1545 795 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Bold ff 150.00 scf sf
225 675 m
gs 1 -1 sc (Domain) col-1 sh gr
/Times-Bold ff 150.00 scf sf
300 825 m
gs 1 -1 sc (Root) col-1 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 1451 5169 a Fv(Figure)g(2:)25 b(Domain)19 b(with)i(k)o(eeper)p
-116 5329 1656 4 v -26 5385 a Fc(2)3 5408 y Fk(The)c(capability)k(re)o
(gisters)d(cgroup)g(may)f(be)h(omitted)g(for)f(emulation)j(domains,)d
(since)h(these)g(domains)g(cannot)g(in)m(v)o(ok)o(e)h(capabilities.)p
eop
%%Page: 5 5
5 4 bop 8 91 a Fv(Possession)27 b(of)f(a)g(domain)f(capability)g(allo)n
(ws)h(the)h(holder)d(to)j(alter)f(most)g(of)g(the)g(slots)h(of)f(the)g
(domain.)41 b(Domain)26 b(capabilities)f(thus)-116 191
y(con)m(v)o(e)o(y)30 b(authority)h(o)o(v)o(er)g(the)h
Fn(structur)m(e)h Fv(of)f(the)h(domain.)60 b(By)33 b(contrast,)i
Fj(start)d(capabilities)g Fv(and)g Fj(r)o(esume)h(capabilities)f
Fv(con)m(v)o(e)o(y)e(the)-116 291 y(authority)23 b(to)i(in)m(v)n(ok)o
(e)f(the)h Fn(pr)l(o)o(gr)o(am)f Fv(embodied)f(in)i(a)g(domain.)38
b(Because)25 b(the)g(program)d(and)j(its)h(associated)e(state)i(are)f
(persistent,)g(a)h(start)-116 390 y(capability)19 b(in)h(ef)n(fect)g
(names)g(an)g(acti)n(v)o(e)g(object.)8 531 y(In)g(its)h(role)f(as)h(a)g
(process,)e(a)i(domain)e(can)h(be)g(in)g(one)g(of)g(three)f(states:)
-116 753 y Fj(A)-8 b(v)o(ailable)40 b Fv(An)25 b Fn(available)f
Fv(domain)h(can)g(be)g(in)m(v)n(ok)o(ed)f(by)h(an)o(y)g(holder)f(of)h
(a)h(start)g(capability)f(for)f(that)i(domain.)40 b(Domains)24
b(return)h(to)g(the)91 853 y(a)n(v)n(ailable)20 b(state)h(when)f(their)
f(program)g(performs)f(a)j Fj(r)o(etur)o(n)e Fv(in)m(v)n(ocation.)-116
1047 y Fj(Running)41 b Fv(Once)27 b(in)m(v)n(ok)o(ed,)g(a)g(domain)e
(mo)o(v)o(es)h(from)g(the)h(a)n(v)n(ailable)f(state)i(to)f(the)f
Fn(running)g Fv(state.)45 b(A)28 b(running)c(domain)i(is)i(servicing)d
(an)91 1147 y(in)m(v)n(ocation.)e(If)18 b(a)g(start)h(capability)e(is)i
(in)m(v)n(ok)o(ed)d(while)i(the)g(domain)f(is)i(running,)d(the)i(in)m
(v)n(ok)o(er)f(will)h(block)g(until)f(the)i(domain)d(becomes)91
1247 y(a)n(v)n(ailable.)-116 1441 y Fj(W)-5 b(aiting)40
b Fv(A)25 b(domain)e(that)h(has)h(in)m(v)n(ok)o(ed)d(a)j(capability)e
(and)h(is)h(w)o(aiting)f(for)g(a)h(response)e(mo)o(v)o(es)g(from)g(the)
i(running)d(state)j(to)f(the)h Fn(waiting)91 1541 y Fv(state.)h(It)20
b(remains)g(in)g(this)h(state)g(until)f(a)h Fj(r)o(esume)f(capability)g
Fv(to)g(the)g(domain)f(is)i(in)m(v)n(ok)o(ed.)-116 1762
y(The)i(v)n(ast)g(majority)f(of)h(domains)f(in)h(an)g(ER)m(OS)h(system)
f(are)g Fn(available)f Fv(at)h(an)o(y)f(gi)n(v)o(en)g(time.)34
b(If)23 b(a)h(domain)d(is)j(not)f Fn(available)f Fv(when)g(a)i(start)
-116 1862 y(capability)e(is)i(in)m(v)n(ok)o(ed,)d(the)i(in)m(v)n(ok)o
(er)e(will)j(block)e(until)h(the)g(domain)e(becomes)h
Fn(available)p Fv(.)32 b(If)22 b(a)i(domain)d(is)j(not)f
Fn(waiting)f Fv(when)h(a)g(resume)-116 1962 y(capability)c(is)i(in)m(v)
n(ok)o(ed,)d(the)i(in)m(v)n(ocation)f(procedes)g(as)i(though)d(a)j
(null)e(capability)h(had)f(been)h(in)m(v)n(ok)o(ed.)-116
2273 y Fi(2.4)99 b(Capability)24 b(In)l(v)o(ocation)-116
2477 y Fv(ER)m(OS)f(objects)g(are)g(manipulated)e(by)i(in)m(v)n(oking)e
(capabilities.)33 b(An)23 b(in)m(v)n(ocation)e(names)i(the)g
(capability)f(to)i(be)f(in)m(v)n(ok)o(ed)e(\(the)i(inde)o(x)f(of)g(the)
-116 2576 y(slot)e(in)g(the)g(capability)e(re)o(gisters)i(cgroup)e
(containing)g(the)h(capability\),)g(and)g(a)h(message)f(to)h(be)g(sent)
g(to)g(the)g(in)m(v)n(ok)o(ed)e(object.)24 b(The)19 b(message)-116
2676 y(includes)k(an)g Fn(oper)o(ation)f(code)h Fv(identifying)e(the)j
(operation)d(requested)h(\(in)i(the)f(reply)-5 b(,)23
b(this)h(is)h(a)f Fn(r)m(eturn)f(code\))p Fv(,)g(up)g(to)h(64K)f(of)g
(contiguous)-116 2775 y(data,)17 b(and)g(four)e(capabilities)i
(\(indices)g(into)f(the)h(capability)g(re)o(gisters\).)23
b(In)16 b(addition,)h(the)g(in)m(v)n(ocation)e(speci\002es)i(which)g
(capability)f(re)o(gisters)-116 2875 y(should)j(be)h(o)o(v)o(erwritten)
e(by)h(the)i(replying)d(in)m(v)n(ocation,)g(where)h(the)h(reply)g(data)
g(should)f(go,)g(and)h(ho)n(w)f(man)o(y)g(bytes)h(of)g(the)g(reply)f
(should)g(be)-116 2975 y(accepted.)27 b(Capability)21
b(re)o(gister)f(zero)h(is)h(\223hardwired\224)d(to)j(the)f(null)g
(capability)-5 b(,)20 b(and)g(is)j(used)e(in)g(place)g(of)g
(capabilities)g(that)g(should)f(not)h(be)-116 3074 y(sent)f(or)g(recei)
n(v)o(ed.)8 3215 y(There)e(are)g(three)g(types)g(of)g(in)m(v)n
(ocation:)k Fn(call)p Fv(,)d Fn(r)m(eturn)p Fv(,)f(and)g
Fn(send)p Fv(.)24 b(A)19 b Fj(call)f Fv(in)m(v)n(ocation)e(blocks)i
(for)f(a)i(response.)k(It)c(places)f(the)h(in)m(v)n(ok)o(er)d(in)-116
3315 y(the)21 b Fn(waiting)g Fv(state)h(and)e(the)h(recipient)f(in)i
(the)f(running)e(state.)28 b(A)22 b Fj(r)o(etur)o(n)e
Fv(in)m(v)n(ocation)g(is)i(the)f(in)m(v)o(erse)f(of)h(the)g(call)g(in)m
(v)n(ocation.)26 b(The)21 b(in)m(v)n(ok)o(er)-116 3415
y(is)j(placed)e(in)i(the)f Fn(available)f Fv(state)i(and)e(the)i
(recipient)e(in)h(the)g Fn(running)f Fv(state.)35 b(The)23
b Fj(send)h Fv(in)m(v)n(ocation)d(sends)i(a)h(message)f(without)g(w)o
(aiting)-116 3514 y(for)c(a)i(reply;)e(both)h(in)m(v)n(ok)o(er)e(and)i
(recipient)f(end)h(up)g(in)g(the)g Fn(running)f Fv(state.)8
3655 y(An)25 b(unusual)e(characteristic)h(of)g(the)g(ER)m(OS)h(in)m(v)n
(ocation)d(mechanism)i(is)h(that)f(the)h(k)o(ernel)f(does)g
Fn(not)h Fv(maintain)f(a)h(call)f(stack.)38 b(Instead,)-116
3755 y(e)n(v)o(ery)18 b(domain)f(has)j(an)f(associated)f
Fj(call)i(count)p Fv(.)k(The)19 b Fn(call)g Fv(operation)e(generates)i
(a)g(resume)g(capability)f(containing)f(the)i(current)f(call)h(count)
-116 3855 y(of)i(the)h(domain.)27 b(When)22 b(a)g(v)n(alid)f(resume)g
(capability)f(is)j(in)m(v)n(ok)o(ed,)d(the)h(call)h(count)f(is)h
(incremented.)27 b(If)22 b(the)f(call)h(count)f(of)g(the)h(domain)e
(and)-116 3954 y(the)g(call)h(count)f(of)g(the)h(resume)f(capability)f
(do)i(not)f(match,)g(the)g(resume)g(capability)g(acts)h(lik)o(e)g(a)g
(null)f(capability)-5 b(.)25 b(Among)19 b(other)h(uses,)h(this)-116
4054 y(allo)n(ws)f(a)h(domain)e(to)h(act)h(as)f(a)h(single)f(entry)g
(point)f(for)h(a)g(multithreaded)e(service,)i(as)h(sho)n(wn)e(in)h
(Figure)g(3.)1145 4186 y
 12761661 6512394 0 0 12761661 6512394 startTexFig
 1145 4186 a
%%BeginDocument: demux.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: demux.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Wed Oct 13 21:31:14 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 194 99
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-7.0 105.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 2745 m -1000 -1000 l 4337 -1000 l 4337 2745 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Ellipse
n 451 413 302 302 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 438 1436 302 302 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 2280 749 302 302 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 3027 772 302 302 0 360 DrawEllipse gs col-1 s gr

% Polyline
gs  clippath
480 1005 m 450 1125 l 420 1005 l 420 1140 l 480 1140 l cp
clip
n 450 675 m 450 1125 l gs col-1 s gr gr

% arrowhead
n 480 1005 m 450 1125 l 420 1005 l 450 1005 l 480 1005 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
 [60] 0 sd
gs  clippath
870 405 m 750 375 l 870 345 l 735 345 l 735 405 l cp
clip
n 2925 450 m 2625 375 l 750 375 l gs col-1 s gr gr
 [] 0 sd
% arrowhead
n 870 405 m 750 375 l 870 345 l 870 375 l 870 405 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
 [60] 0 sd
gs  clippath
2736 1098 m 2850 1050 l 2772 1146 l 2880 1065 l 2844 1017 l cp
clip
n 675 1575 m 2550 1275 l 2850 1050 l gs col-1 s gr gr
 [] 0 sd
% arrowhead
n 2736 1098 m 2850 1050 l 2772 1146 l 2754 1122 l 2736 1098 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Bold ff 150.00 scf sf
225 465 m
gs 1 -1 sc (client) col-1 sh gr
/Times-Bold ff 150.00 scf sf
225 1425 m
gs 1 -1 sc (generic) col-1 sh gr
/Times-Bold ff 150.00 scf sf
225 1575 m
gs 1 -1 sc (demux) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2025 720 m
gs 1 -1 sc (service) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2775 720 m
gs 1 -1 sc (service) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2025 870 m
gs 1 -1 sc (thread 1) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2775 870 m
gs 1 -1 sc (thread 2) col-1 sh gr
% Polyline
 [60] 0 sd
gs  clippath
1981 1008 m 2100 975 l 2011 1061 l 2128 994 l 2098 942 l cp
clip
n 750 1425 m 1575 1275 l 2100 975 l gs col-1 s gr gr
 [] 0 sd
% arrowhead
n 1981 1008 m 2100 975 l 2011 1061 l 1996 1035 l 1981 1008 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Italic ff 150.00 scf sf
525 900 m
gs 1 -1 sc (Call generating) col-1 sh gr
/Times-Italic ff 150.00 scf sf
1725 1545 m
gs 1 -1 sc (Return \(start key\)) col-1 sh gr
/Times-Italic ff 150.00 scf sf
1275 315 m
gs 1 -1 sc (Return \(rk1\)) col-1 sh gr
/Times-Italic ff 150.00 scf sf
525 1050 m
gs 1 -1 sc (resume capability rc1) col-1 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 1361 5193 a Fv(Figure)f(3:)26 b(User)20 b(le)n(v)o(el)g(demultiple)o
(xing)p eop
%%Page: 6 6
6 5 bop -116 91 a Fi(2.5)99 b(Thr)n(eads)-116 291 y Fv(It)20
b(is)i(useful)e(to)g(distinguish)g(between)f(a)i(running)d(domain)h
(and)h(the)g(thread)g(of)g(control)f(that)i(occupies)e(it.)26
b(A)21 b Fj(thr)o(ead)f Fv(associates)h(a)f(running)-116
390 y(domain)j(with)i(a)h(particular)e(processor)f(group.)38
b(Threads)24 b(are)g(the)h(unit)g(acted)g(on)f(by)h(the)g(ER)m(OS)g(k)o
(ernel)f(scheduler)-5 b(.)39 b(ER)m(OS)25 b(threads)f(are)-116
490 y(stateless,)d(and)f(are)g(second)f(class)i(abstractions)f(in)g
(the)g(sense)h(that)f(the)o(y)f(ha)n(v)o(e)h(no)g(associated)g
(capability)-5 b(.)8 631 y(A)32 b(thread)d(occupies)h(e)o(xactly)g(one)
g(domain,)i(and)e(a)h(domain)f(occupied)f(by)h(a)h(thread)f(is)i(in)f
(the)f Fn(running)g Fv(state.)57 b(When)31 b(a)g(domain)-116
731 y(performs)d(a)i Fn(call)f Fv(or)g Fn(r)m(eturn)h
Fv(in)m(v)n(ocation,)g(its)g(thread)f(migrates)g(to)h(the)f(ne)n(w)g
(domain.)52 b(If)29 b(the)h(tw)o(o)g(domains)e(operate)g(under)h(the)g
(same)-116 830 y(schedule)c(capability)h(this)h(action)f(does)h(not)f
(require)f(a)i(rescheduling)e(call,)j(which)e(signi\002cantly)g
(reduces)f(the)i(comple)o(xity)e(of)h(the)h(IPC)-116
930 y(path.)j(The)21 b(result)h(is)h(similar)f(to)h(the)f(migrating)e
(threads)h(of)h(Mach)g(4.0)f([F)o(or93)n(])h(or)g(the)g(shuttles)g(of)g
(the)g(Spring)f([Ham95)n(])h(system.)31 b(Once)-116 1030
y(we)19 b(ha)n(v)o(e)g(a)g(chance)g(to)g(tune)g(the)g(paths,)g(we)g(e)o
(xpect)g(to)g(achie)n(v)o(e)f(conte)o(xt)g(switch)h(times)h(comparable)
d(to)i(with)h(L3)f([Lie93b)m(])h(and)e(Mach)h(4.0.)8
1171 y(A)h(further)e(reason)g(to)h(distinguish)f(threads)h(and)f
(domains)g(is)j(that)e(the)g(thread)f(embodies)g(the)h(smallest)h(part)
f(of)g(a)g(domain)f(that)h(must)g(be)-116 1270 y(k)o(ept)24
b(in)g(memory)e(when)i(the)g(domain)f(is)i(not)f(e)o(x)o(ecuting)d
(instructions.)36 b(Domains)24 b(such)g(as)g(login)g(agents)g(and)f
(detached)g(user)h(interf)o(aces)-116 1370 y(spend)c(most)h(of)f(their)
h(time)g(block)o(ed)e(in)i(the)g(k)o(ernel)f(while)h(w)o(aiting)g(for)f
(an)h(e)n(v)o(ent)f(to)h(occur)-5 b(.)26 b(Isolating)20
b(the)h(thread)f(structure)g(allo)n(ws)h(these)-116 1470
y(domains)e(to)h(be)g(paged)f(out.)-116 1803 y Fo(3)119
b(Mapping)31 b(to)f(the)g(Machine)-116 2032 y Fv(The)e(simple)h(object)
f(model)g(pro)o(vided)f(by)h(ER)m(OS)h(is)h(relati)n(v)o(ely)e(easy)h
(to)g(reason)f(about)f(and)i(easy)g(to)g(render)e(persistent,)k(b)n(ut)
d(it)i(is)g(not)-116 2132 y(intrinsically)15 b(ef)n(\002cient.)23
b(The)16 b(basic)h(abstractions)e(pro)o(vided)f(by)i(ER)m(OS)g(must)h
(be)f(mapped)f(onto)g(the)h(underlying)e(hardw)o(are)h(representation,)
-116 2231 y(and)20 b(consistenc)o(y)g(must)h(be)f(maintained)g(between)
g(the)h(abstractions)f(and)g(the)h(resulting)f(representation.)k(This)e
(mapping)d(is)i(the)g(k)o(e)o(y)f(to)h(an)-116 2331 y(ef)n(\002cient)f
(softw)o(are)f(capability)g(implementation.)k(The)d(mapping)e(must:)8
2544 y Fm(\017)41 b Fv(Ensure)18 b(that)g(the)g(object)g(named)f(by)h
(a)g(v)n(alid)g(capability)f(is)i(in)g(memory)d(when)i(needed,)f(and)g
(that)i(an)f(ef)n(\002cient)f(mapping)g(e)o(xists)h(from)91
2643 y(the)j(capability)e(to)h(the)g(in-memory)e(object.)8
2819 y Fm(\017)41 b Fv(Ensure)22 b(that)h(only)e(one)h(interpretation)f
(of)h(a)h(cgroup)e(\(se)o(gment,)g(domain)g(constituent,)h(etc.\))32
b(is)24 b(required)d(during)f(an)o(y)i(gi)n(v)o(en)f(in)m(v)n(o-)91
2919 y(cation.)8 3095 y Fm(\017)41 b Fv(Construct)20
b(and)g(maintain)f(a)i(mapping)d(from)h(se)o(gment)g(cgroups)g(to)h
(the)g(hardw)o(are)f(address)h(mapping)e(mechanism.)8
3271 y Fm(\017)41 b Fv(Pro)o(vide)19 b(a)i(representation)d(for)h
(domain)g(state)i(that)f(f)o(acilitates)h(ef)n(\002cient)f(conte)o(xt)f
(switching.)8 3447 y Fm(\017)41 b Fv(Ensure)20 b(that)g(the)g
(semantics)g(of)g(reads)g(and)g(writes)g(to)h(cgroup)d(slots)j(are)f
(preserv)o(ed)e(by)i(these)h(optimizations.)8 3660 y(T)-7
b(o)19 b(perform)e(this)i(mapping,)e(the)i(ER)m(OS)g(k)o(ernel)f
(implements)f(structures)h(that)h(serv)o(e)f(as)i
(architecture-speci\002c)c(caches)j(of)f(state)i(whose)-116
3759 y(de\002nition)f(is)i(in)f(cgroups.)-116 4050 y
Fi(3.1)99 b(Pr)n(eparing)26 b(Capabilities)-116 4249
y Fv(Capabilities)21 b(ha)n(v)o(e)g(tw)o(o)g(forms:)26
b(unprepared)18 b(\(on-disk\))h(and)i(prepared.)k(In)c(its)h
(unprepared)c(form)i(\(Figure)h(4\),)f(a)i(capability)e(contains)g(the)
-116 4349 y(object)25 b(identi\002er)g(and)h(v)o(ersion)e(number)g(of)i
(the)g(object.)41 b(Whene)n(v)o(er)25 b(a)h(capability)f(is)i
(dereferenced,)d(it)i(is)h(\002rst)g Fn(pr)m(epar)m(ed)p
Fv(.)41 b(Preparing)24 b(a)1195 4472 y
 11972280 3683778 0 0 11972280 3683778 startTexFig
 1195 4472 a
%%BeginDocument: DiskCap.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: DiskCap.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Wed Oct 13 21:31:13 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 182 56
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-17.0 73.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 2212 m -1000 -1000 l 4312 -1000 l 4312 2212 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 1050 300 m 1800 300 l 1800 525 l 1050 525 l cp gs col-1 s gr 
% Polyline
n 300 300 m 1050 300 l 1050 525 l 300 525 l cp gs col-1 s gr 
% Polyline
n 1800 300 m 3300 300 l 3300 525 l 1800 525 l cp gs col-1 s gr 
% Polyline
n 3300 525 m 3300 750 l 300 750 l 300 525 l cp gs col-1 s gr 
% Polyline
n 3300 975 m 3300 1200 l 300 1200 l 300 975 l cp gs col-1 s gr 
% Polyline
n 1800 750 m 3300 750 l 3300 975 l 1800 975 l cp gs col-1 s gr 
% Polyline
n 300 750 m 1800 750 l 1800 975 l 300 975 l cp gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
675 450 m
gs 1 -1 sc (Type) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1425 1125 m
gs 1 -1 sc (OID[31:0]) col-1 sh gr
/Times-Bold ff 150.00 scf sf
675 900 m
gs 1 -1 sc (OID[47:32]) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1125 450 m
gs 1 -1 sc (SubType) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1350 675 m
gs 1 -1 sc (Version[31:0]) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2025 900 m
gs 1 -1 sc (Version[47:32]) col-1 sh gr
/Times-Roman ff 150.00 scf sf
375 450 m
gs 1 -1 sc (r) col-1 sh gr
/Times-Roman ff 150.00 scf sf
450 450 m
gs 1 -1 sc (w) col-1 sh gr
/Times-Roman ff 150.00 scf sf
555 450 m
gs 1 -1 sc (p) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2325 450 m
gs 1 -1 sc (Info) col-1 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 1368 5121 a Fv(Figure)19 b(4:)26 b(An)20 b(unprepared)d(capability)
-116 5408 y(capability)i(has)h(tw)o(o)h(ef)n(fects:)p
eop
%%Page: 7 7
7 6 bop 8 91 a Fm(\017)41 b Fv(If)20 b(necessary)-5 b(,)19
b(the)h(object)g(named)f(by)h(the)g(capability)f(is)i(brought)d(into)i
(main)g(memory)-5 b(.)8 249 y Fm(\017)41 b Fv(The)23
b(v)o(ersion)e(number)g(of)h(the)h(capability)f(\(or)g(in)h(the)f(case)
h(of)g(a)g(resume)f(capability)-5 b(,)22 b(the)g(call)h(count\))f(is)h
(compared)e(to)i(the)g(v)o(ersion)91 349 y(number)f(\(call)h(count\))f
(of)g(the)i(object.)33 b(If)23 b(the)o(y)f(do)h(not)f(match,)h(the)h
(capability)e(con)m(v)o(e)o(ys)f(no)h(authority)g(and)g(is)i(con)m(v)o
(erted)d(to)i(a)h(null)91 449 y(capability)-5 b(.)436
419 y Fh(3)8 640 y Fv(Once)18 b(prepared,)e(the)h(capability)g(points)g
(to)h(an)g(object)f(table)g(entry)-5 b(,)17 b(which)g(in)h(turn)f
(points)g(to)h(the)g(object)f(\(Figure)f(5\).)24 b(Ev)o(ery)16
b(capability)-116 740 y(has)g(a)h Fn(pr)m(epar)m(ed)g
Fv(bit)f(\()p Fj(P)p Fv(\))g(that)g(indicates)f(the)h(current)f(form)g
(of)h(the)g(capability)-5 b(.)22 b(The)16 b(object)f(named)g(by)h(a)g
(prepared)f(capability)g(is)i(guaranteed)1158 850 y
 12564316 7959592 0 0 12564316 7959592 startTexFig
 1158
850 a
%%BeginDocument: PrepCap.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: PrepCap.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Wed Oct 13 21:31:13 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 191 121
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-8.0 127.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3114 m -1000 -1000 l 4312 -1000 l 4312 3114 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
gs  clippath
781 311 m 675 375 l 739 269 l 643 364 l 686 407 l cp
clip
n 825 225 m 675 375 l gs col-1 s gr gr

% arrowhead
n 781 311 m 675 375 l 739 269 l 760 290 l 781 311 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 1050 450 m 1800 450 l 1800 675 l 1050 675 l cp gs col-1 s gr 
% Polyline
n 300 450 m 1050 450 l 1050 675 l 300 675 l cp gs col-1 s gr 
% Polyline
n 1800 450 m 3300 450 l 3300 675 l 1800 675 l cp gs col-1 s gr 
% Polyline
n 3300 675 m 3300 900 l 300 900 l 300 675 l cp gs col-1 s gr 
% Polyline
n 3300 1125 m 3300 1350 l 300 1350 l 300 1125 l cp gs col-1 s gr 
% Polyline
gs  clippath
330 1695 m 450 1725 l 330 1755 l 465 1755 l 465 1695 l cp
clip
n 450 1200 m 150 1200 l 150 1725 l 450 1725 l gs col-1 s gr gr

% arrowhead
n 330 1695 m 450 1725 l 330 1755 l 330 1725 l 330 1695 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 2325 1500 m 3076 1500 l 3076 2100 l 2325 2100 l cp gs col-1 s gr 
% Polyline
gs  clippath
2205 1920 m 2325 1950 l 2205 1980 l 2340 1980 l 2340 1920 l cp
clip
n 1575 1950 m 2325 1950 l gs col-1 s gr gr

% arrowhead
n 2205 1920 m 2325 1950 l 2205 1980 l 2205 1950 l 2205 1920 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1845 1755 m 1725 1725 l 1845 1695 l 1710 1695 l 1710 1755 l cp
clip
n 2400 1725 m 1725 1725 l gs col-1 s gr gr

% arrowhead
n 1845 1755 m 1725 1725 l 1845 1695 l 1845 1725 l 1845 1755 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 452 1652 m 1727 1652 l 1727 1877 l 452 1877 l cp gs col-1 s gr 
% Polyline
n 452 1877 m 1727 1877 l 1727 2102 l 452 2102 l cp gs col-1 s gr 
% Polyline
n 1800 900 m 3300 900 l 3300 1125 l 1800 1125 l cp gs col-1 s gr 
% Polyline
n 300 900 m 1800 900 l 1800 1125 l 300 1125 l cp gs col-1 s gr 
/Times-Italic ff 150.00 scf sf
900 225 m
gs 1 -1 sc (Prepared Bit) col-1 sh gr
/Times-Bold ff 150.00 scf sf
675 600 m
gs 1 -1 sc (Type) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1275 1275 m
gs 1 -1 sc (Object Table Ptr) col-1 sh gr
/Times-BoldItalic ff 150.00 scf sf
2550 1726 m
gs 1 -1 sc (Page) col-1 sh gr
/Times-BoldItalic ff 150.00 scf sf
2626 1876 m
gs 1 -1 sc (or) col-1 sh gr
/Times-BoldItalic ff 150.00 scf sf
525 1575 m
gs 1 -1 sc (Object Table Entry) col-1 sh gr
/Times-Bold ff 150.00 scf sf
752 1802 m
gs 1 -1 sc (OID[31:0]) col-1 sh gr
/Times-Bold ff 150.00 scf sf
752 2027 m
gs 1 -1 sc (Object Ptr) col-1 sh gr
/Times-Bold ff 150.00 scf sf
750 1050 m
gs 1 -1 sc (OID[47:32]) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1125 600 m
gs 1 -1 sc (SubType) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2025 1050 m
gs 1 -1 sc (Version[47:32]) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1350 825 m
gs 1 -1 sc (Version[31:0]) col-1 sh gr
/Times-Roman ff 150.00 scf sf
375 600 m
gs 1 -1 sc (r) col-1 sh gr
/Times-Roman ff 150.00 scf sf
450 600 m
gs 1 -1 sc (w) col-1 sh gr
/Times-Bold ff 150.00 scf sf
554 600 m
gs 1 -1 sc (P) col-1 sh gr
/Times-BoldItalic ff 150.00 scf sf
2475 2026 m
gs 1 -1 sc (Cgroup) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2325 600 m
gs 1 -1 sc (Info) col-1 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 1430 2041 a Fv(Figure)j(5:)25 b(A)c(prepared)d(capability)-116
2315 y(to)i(remain)f(in)i(memory)d(for)i(the)g(duration)e(of)i(the)h
(current)d(in)m(v)n(ocation.)8 2456 y(Before)e(being)g(written)g(to)h
(disk,)f(a)h(capability)f(is)h(\002rst)g(con)m(v)o(erted)d(back)i(to)h
(the)f(unprepared)e(format.)22 b(This)17 b(ensures)f(that)g(k)o(ernel)g
(memory)-116 2556 y(pointers)24 b(are)h(ne)n(v)o(er)e(written)i(to)g
(the)g(disk.)39 b(All)26 b(e)o(xisting)e(capabilities)h(to)g(an)g
(object)g(can)f(be)h(in)m(v)n(alidated)e(by)i(incrementing)d(the)j
(object')-5 b(s)-116 2656 y(v)o(ersion)19 b(number)-5
b(.)23 b(Doing)d(so)g(guarantees)f(that)h(all)h(access)g(to)f(the)g
(corresponding)d(cgroup)h(or)i(page)g(has)g(been)g(rescinded.)-116
2931 y Fi(3.2)99 b(Pr)n(eparing)26 b(Cgr)n(oups)-116
3128 y Fv(A)20 b(gi)n(v)o(en)f(cgroup)g(can)h(be)g(interpreted)e(in)j
(se)n(v)o(eral)e(w)o(ays:)-12 3320 y(1.)40 b(As)21 b(a)g(ra)o(w)f
(cgroup,)-12 3478 y(2.)40 b(As)21 b(a)g(domain)e(root,)-12
3636 y(3.)40 b(As)21 b(the)g(general)e(re)o(gisters)g(of)h(a)h(domain,)
-12 3795 y(4.)40 b(As)21 b(the)g(capability)e(re)o(gisters)g(of)h(a)h
(domain,)-12 3953 y(5.)40 b(As)21 b(a)g(node)e(in)h(a)h(se)o(gment)e
(tree.)-116 4144 y(Only)k(one)g(of)g(these)h(interpretations)e(is)i(v)n
(alid)f(during)f(an)o(y)h(single)g(capability)g(in)m(v)n(ocation.)2604
4114 y Fh(4)2670 4144 y Fv(A)h(cgroup)e(that)h(is)i(interpreted)c(as)k
(a)f(domain)-116 4244 y(root)19 b(will)i(not)f(be)g(interpreted)f(as)i
(a)f(se)o(gment)f(during)g(the)h(same)g(in)m(v)n(ocation.)8
4385 y(As)i(with)g(capabilities,)f(a)h(cgroup)d(must)i(be)h(prepared)d
(before)h(it)i(can)f(be)g(referenced)e(in)i(a)h(particular)e(conte)o
(xt.)27 b(If)21 b(a)h(hardw)o(are)e(address)-116 4485
y(mapping)j(table)h(depends)g(on)g(the)h(capability)e(v)n(alues)h(of)h
(a)g(gi)n(v)o(en)e(cgroup,)h(that)h(cgroup)e(must)h(be)h(prepared)e(as)
i(a)g(se)o(gment)f(cgroup.)36 b(If)25 b(a)-116 4584 y(conte)o(xt)16
b(structure)g(\(Section)g(3.3\))g(depends)g(on)g(the)h(capability)f(v)n
(alues)h(of)g(a)g(gi)n(v)o(en)f(cgroup,)f(that)i(cgroup)f(is)i(must)f
(be)g(prepared)e(as)i(a)h(domain)-116 4684 y(root,)e(general)f(re)o
(gisters,)i(or)f(capability)f(re)o(gisters)h(cgroup.)22
b(The)16 b(current)f(interpretation)f(of)i(a)h(cgroup)d(is)j(cached)f
(in)g(the)g(in-memory)e(cgroup)-116 4784 y(data)20 b(structure,)f(and)g
(serv)o(es)h(to)h(identify)e(ho)n(w)g(the)i(state)g(of)f(the)g(cgroup')
-5 b(s)18 b(capabilities)i(may)g(be)g(cached.)8 4925
y(Ev)o(ery)27 b(capability)g(slot)h(in)h(a)f(cgroup)e(includes)h
Fn(write)j(hazar)m(d)f Fv(and)e Fn(r)m(ead)h(hazar)m(d)h
Fv(bits)g(\(The)e(\223w\224)h(and)g(\223r\224)g(\002elds)g(in)g
(\002gures)g(4)g(and)-116 5024 y(5\).)43 b(If)27 b(a)f(cgroup)f(is)i
(prepared,)f(some)g(or)h(all)g(of)f(its)h(capabilities)f(may)g(be)h
Fn(hazar)m(ded)p Fv(.)42 b(A)27 b(write)g(hazard)e(indicates)h(that)h
(some)f(machine-)-116 5124 y(speci\002c)e(data)h(structure)e(depends)g
(on)h(the)h(current)e(v)n(alue)g(of)h(the)h(capability)-5
b(,)24 b(and)g(must)g(be)g(in)m(v)n(alidated)f(before)g(the)h
(capability)g(slot)h(can)p -116 5169 1656 4 v -26 5225
a Fc(3)3 5248 y Fk(Incrementing)20 b(the)e(v)o(ersion)g(number)f(of)g
(the)h(object)h(in)m(v)n(alidates)i(outstanding)f(capabilities,)g(allo)
n(wing)g(objects)f(to)e(be)g(securely)i(reused.)-26 5306
y Fc(4)3 5329 y Fk(It)h(is)g(possible)h(to)e(construct)j(a)e(domain)g
(whose)g(address)h(space)f(se)o(gment)h(whose)f(cgroup)h(is)e(in)h(f)o
(act)h(the)g(domain)f(root.)29 b(Such)20 b(a)g(domain)g(is)g
Fb(malformed)p Fk(,)h(and)f(will)h(not)-116 5408 y(e)o(x)o(ecute)e
(instructions.)p eop
%%Page: 8 8
8 7 bop -116 91 a Fv(be)23 b(written.)35 b(A)24 b(read)f(hazard)g
(indicates)g(that)h(the)f(current)g(v)n(alue)g(of)g(the)g(capability)g
(is)i(not)e(up)g(to)h(date,)g(and)f(must)h(be)f(written)g(back)g(from)
-116 191 y(the)e(machine-speci\002c)e(data)j(structure)e(before)g(the)h
(capability)f(can)h(be)h(read.)27 b(Read)22 b(hazards)e(typically)h
(apply)f(to)h(capabilities)g(containing)-116 291 y(domain)e(re)o
(gister)g(v)n(alues.)25 b(All)20 b(read)g(hazards)f(are)i(also)f(write)
g(hazards.)8 432 y(Lik)o(e)k(capabilities,)h(cgroups)d(are)i(al)o(w)o
(ays)h(written)f(to)g(the)g(disk)g(in)g(unprepared)d(form.)36
b(Unlik)o(e)24 b(capabilities,)g(the)g(interpretation)e(of)i(a)-116
531 y(cgroup)18 b(may)h(change)f(o)o(v)o(er)h(time.)25
b(Before)19 b(preparing)f(a)i(cgroup)e(in)i(a)g(ne)n(w)f(w)o(ay)-5
b(,)20 b(the)f(cgroup)f(is)j(\002rst)g Fn(depr)m(epar)m(ed)f
Fv(to)g(its)g(ra)o(w)g(form.)k(A)c(side)-116 631 y(ef)n(fect)f(of)h
(depreparing)e(the)i(cgroup)e(is)j(to)g(in)m(v)n(alidate)d(or)i
(\003ush)h(all)f(cached)g(copies)f(of)h(the)h(cgroup')-5
b(s)18 b(state.)26 b(This)20 b(guarantees)f(that:)8 849
y Fm(\017)41 b Fv(No)21 b(stale)f(cache)g(state)h(remains)f(when)f(the)
h(cgroup)f(is)i(written)f(to)g(the)g(disk.)8 1037 y Fm(\017)41
b Fv(A)21 b(cgroup)d(has)j(e)o(xactly)e(one)h(semantic)g
(interpretation)e(at)i(a)h(time.)8 1225 y Fm(\017)41
b Fv(Malformed)14 b(objects,)h(such)g(as)h(a)g(domain)e(root)h(whose)g
(address)f(space)i(capability)e(points)h(to)g(the)h(domain)d(root)i
(cgroup,)f(are)h(detected.)-116 1529 y Fi(3.3)99 b(The)26
b(Context)f(Cache)-116 1731 y Fv(In)19 b(con)m(v)o(entional)d
(operating)i(systems,)i(processor)e(state)i(is)h(sa)n(v)o(ed)e(to)h(an)
f(interrupt)f(stack.)25 b(If)19 b(the)h(current)e(thread)h(of)g
(control)f(is)j(preempted,)-116 1831 y(this)f(state)h(is)h(then)d
(transferred)g(to)h(process)g(structure)f(whose)h(layout)f(is)i
(carefully)e(tuned)g(to)i(the)f(processor)f(architecture.)8
1972 y(The)25 b(ER)m(OS)g(domain)e(layout)h(is)i(chosen)e(for)g(the)g
(con)m(v)o(enience)e(of)j(the)f(abstract)h(machine.)37
b(Number)23 b(capabilities)i(pro)o(vide)e(a)i(space-)-116
2072 y(ef)n(\002cient)18 b(w)o(ay)h(to)h(store)f(re)o(gister)f(v)n
(alues)h(in)g(a)g(cgroup,)e(b)n(ut)i(this)h(representation)d(is)j(not)f
(ef)n(\002cient)f(for)h(loading)e(and)i(sa)n(ving)f(re)o(gisters)h
(during)-116 2171 y(a)i(conte)o(xt)e(switch.)27 b(Instead,)20
b(the)h(re)o(gister)f(v)n(alues)g(of)g(a)h(domain)f(are)g(loaded)g
(into)g(an)h(architecture)e(speci\002c)i Fj(context)e
Fv(structure)h(before)f(the)-116 2271 y(process)24 b(is)i(loaded)e
(onto)g(the)h(hardw)o(are.)38 b(The)24 b(cgroups)f(of)i(the)g
(associated)g(domain)e(are)i(prepared)e(as)i(domain)f(root,)h(general)f
(re)o(gisters,)-116 2371 y(and)g(capability)g(re)o(gisters,)h(and)g
(the)f(hazard)g(bits)h(of)g(the)g(associated)g(slots)g(are)g(set)h(to)f
(indicate)f(that)h(the)g(v)n(alues)f(of)h(the)g(capabilities)f(that)
-116 2470 y(mak)o(e)c(up)f(the)i(domain)d(are)i(cached.)8
2611 y(When)k(necessary)-5 b(,)23 b(information)e(is)k(selecti)n(v)o
(ely)e(\003ushed)g(from)f(the)i(conte)o(xt)e(structure)h(back)g(to)h
(the)g(domain)e(cgroups)g(to)i(clear)f(these)-116 2711
y(hazards.)32 b(The)22 b(conte)o(xt)g(maintains)g(a)i(separate)e
(hazard)g(mask)h(indicating)e(which)h(parts)h(of)g(the)g(conte)o(xt)e
(need)i(to)g(be)g(reloaded)e(before)g(the)-116 2811 y(conte)o(xt)e(is)i
(ready)e(to)h(run.)8 2952 y(It)k(is)g(rare)e(for)h(an)g(in)m(v)n
(ocation)e(to)i(require)f(that)h(the)g(re)o(gister)f(v)n(alues)h(be)g
(\003ushed)f(back)g(to)i(the)f(domain.)32 b(Once)22 b(the)h(re)o
(gister)g(v)n(alues)f(are)-116 3052 y(loaded)f(into)h(a)g(conte)o(xt)f
(structure)h(it)g(is)i(easier)e(to)g(fetch)g(them)g(from)f(the)h(conte)
o(xt)f(structure)g(than)h(from)f(the)h(domain.)30 b(ER)m(OS)22
b(maintains)g(a)-116 3151 y(cache)h(of)g(the)g(conte)o(xt)f(structures)
h(for)g(recently)f(acti)n(v)n(ated)h(domains,)f(a)n(v)n(oiding)h(the)g
(o)o(v)o(erhead)e(of)i(unload)f(and)h(reload.)33 b(The)23
b(state)h(of)f(the)-116 3251 y(acti)n(v)o(e)c(domains)h(therefore)e
(remains)i(in)g(machine-speci\002c)e(form)h(most)i(of)e(the)i(time.)8
3392 y(The)j(80)p Fe(x)p Fv(86)f(processor)f(automatically)h(writes)h
(process)f(state)i(to)f(the)g(supervisor)e(stack)i(when)f(an)h
(interrupt)e(or)i(system)g(call)g(occurs.)-116 3492 y(T)-7
b(o)23 b(tak)o(e)g(adv)n(antage)d(of)j(this,)h(the)e(ER)m(OS)i(k)o
(ernel)e(arranges)f(for)h(the)h(supervisor)e(stack)i(pointer)f(to)h
(point)f(to)h(the)g(top)f(of)g(the)h(conte)o(xt)f(cache)-116
3591 y(entry)f(for)h(the)g(acti)n(v)o(e)g(conte)o(xt.)30
b(The)22 b(conte)o(xt)f(structure)h(is)h(laid)f(out)g(in)h(such)f(a)h
(w)o(ay)f(that)g(the)h(v)n(alues)f(written)g(to)g(the)g(supervisor)f
(stack)i(by)-116 3691 y(the)c(processor)g(are)g(written)h(directly)f
(to)h(the)f(appropriate)f(locations)h(in)h(the)f(conte)o(xt)g
(structure.)24 b(Once)19 b(the)h(re)o(gisters)f(ha)n(v)o(e)g(been)g(sa)
n(v)o(ed,)g(the)-116 3790 y(supervisor)i(stack)i(pointer)f(is)i
(reloaded)e(to)h(point)f(to)h(an)g(interrupt)f(stack.)34
b(Similar)23 b(techniques)f(are)h(used)f(in)i(L3)e([Lie93a)o(])h(and)f
(Mach)h(4.0)-116 3890 y([F)o(or93)n(])d(to)g(a)n(v)n(oid)g(cop)o(ying)f
(state)i(from)e(the)h(stack)g(to)h(the)f(process)g(structure.)-116
4194 y Fi(3.4)99 b(Addr)n(ess)26 b(Space)g(Management)-116
4396 y Fv(Address)20 b(space)g(management)e(in)i(the)g(ER)m(OS)h(k)o
(ernel)e(consists)i(of:)8 4615 y Fm(\017)41 b Fv(Constructing)19
b(address)h(mappings)e(in)j(response)e(to)h(page)g(f)o(aults.)8
4803 y Fm(\017)41 b Fv(Ensuring)19 b(that)h(an)o(y)g(write)g(to)g(a)h
(se)o(gment)e(cgroup)f(is)k(properly)c(re\003ected)h(in)i(the)f(hardw)o
(are-speci\002c)e(data)i(structures.)8 4991 y Fm(\017)41
b Fv(Ensuring)19 b(that)h(mapping)e(entries)j(are)f(properly)e(in)m(v)n
(alidated)g(when)i(cgroups)e(and)i(pages)g(are)g(remo)o(v)o(ed)e(by)h
(aging.)8 5209 y(Constructing)g(the)g(hardw)o(are)g(mapping)f(tables)i
(is)g(a)h(simple)e(matter)h(of)f(w)o(alking)g(the)h(domain')-5
b(s)19 b(se)o(gment)g(tree)g(starting)h(at)g(the)g(address)-116
5309 y(space)j(capability)g(to)h(determine)e(the)i(v)n(alidity)f(and)g
(access)h(rights)f(of)h(the)f(mapping.)34 b(If)24 b(no)f(mapping)f(is)i
(found)e(that)i(satis\002es)h(the)f(access)-116 5408
y(type)19 b(\(read)h(or)g(write\),)f(a)i(se)o(gment-designated)c(f)o
(ault)j(handling)e(domain)h(\226)i(the)f(se)o(gment)f(k)o(eeper)g(\226)
h(is)i(in)m(v)n(ok)o(ed.)p eop
%%Page: 9 9
9 8 bop 8 91 a Fv(Re)o(gardless)30 b(of)g(architecture,)h(ER)m(OS)g
(tracks)f(page)g(dependencies)e(by)i(maintaining)f(an)h(in)m(v)o(erse)g
(mapping)e(from)i(page)f(frames)h(to)-116 191 y(mapping)19
b(table)i(entries.)26 b(Before)21 b(a)g(page)f(is)i(remo)o(v)o(ed)c
(the)j(page)f(dependenc)o(y)e(table)j(is)g(tra)n(v)o(ersed)f(to)h(in)m
(v)n(alidate)f(the)h(dependent)d(mapping)-116 291 y(entries.)8
432 y(The)j(80)p Fe(x)p Fv(86)f(implements)g(a)h(tw)o(o-le)n(v)o(el)f
(page)h(table)g(with)g(authority)e(v)o(eri\002cation)h(at)h(both)f(le)n
(v)o(els.)28 b(A)21 b(mapping)e(entry)h(\(at)h(either)g(le)n(v)o(el\))
-116 531 y(is)27 b(constructed)e(by)h(w)o(alking)f(a)i(se)o(gment)e
(tree,)j(and)e(depends)f(on)h(the)g(v)n(alues)g(of)g(the)h(tra)n(v)o
(ersed)e(cgroup)g(slots.)44 b(If)26 b(an)o(y)g(of)g(these)g(slots)h(is)
-116 631 y(later)c(modi\002ed,)g(the)h(corresponding)c(mapping)h
(entries)j(must)f(be)h(in)m(v)n(alidated.)33 b(T)-7 b(o)23
b(guarantee)f(this,)j(the)e(address)g(of)g(each)g(tra)n(v)o(ersed)g
(slot)-116 731 y(is)k(associated)g(with)g(the)f(address)h(of)f(the)h
(generated)e(mapping)g(entry)g(in)i(a)g Fn(slot)h(dependancy)23
b(table)p Fv(,)28 b(and)e(the)h(slot)g(is)h(mark)o(ed)d(as)j(write-)
-116 830 y(hazarded.)j(Before)22 b(a)h(write)g(to)g(such)g(a)g(slot)g
(can)g(proceed,)e(the)i(hazard)f(must)h(be)f(cleared)g(by)h(tra)n(v)o
(ersing)e(the)i(slot)g(dependenc)o(y)d(table)j(and)-116
930 y(in)m(v)n(alidating)18 b(all)j(dependent)d(mapping)g(entries.)8
1071 y(Se)o(gments)29 b(typically)g(range)g(from)g(three)g(to)h(\002)n
(v)o(e)f(cgroups)g(in)h(height.)52 b(If)30 b(the)g(slot)g(dependenc)o
(y)d(table)i(is)i(constructed)d(in)i(a)g(nai)n(v)o(e)-116
1171 y(f)o(ashion,)19 b(e)n(v)o(ery)h(bottom-le)n(v)o(el)e(mapping)h
(entry)g(will)j(therefore)d(ha)n(v)o(e)h(between)f(three)i(and)f(\002)n
(v)o(e)g(dependenc)o(y)e(table)i(entries)h(depending)d(on)-116
1270 y(the)i(height)f(of)h(the)g(se)o(gment)f(tree.)25
b(In)20 b(a)g(tree)h(structured)d(mapping)h(system,)h(mapping)e
(entries)i(in)g(upper)f(le)n(v)o(el)h(mapping)e(tables)i(need)g(their)
-116 1370 y(o)n(wn)f(additional)g(dependenc)o(y)e(entries.)25
b(The)20 b(space)g(o)o(v)o(erhead)e(of)i(this)g(is)h(quite)f(lar)o(ge,)
f(and)h(must)g(be)g(reduced.)8 1511 y(First,)33 b(we)d(note)f(that)g
(the)h(dependenc)o(y)c(tables)k(are)f(not)g(a)h Fn(complete)f
Fv(mapping)f(from)g(slots)j(and)d(pages)i(to)f(mapping)f(entries.)53
b(It)29 b(is)-116 1611 y(suf)n(\002cient)20 b(for)g(the)g(dependenc)o
(y)e(tables)j(to)g(capture)e(the)i(fraction)e(of)h(all)i(mappings)d
(that)h(are)h(actually)f(being)f(referenced.)24 b(The)d(size)g(of)f
(the)-116 1710 y(dependenc)o(y)d(table)j(is)h(therefore)d(a)j(function)
e(of)g(dynamic)g(dependencies)f(rather)h(than)h(static)h(dependencies.)
8 1851 y(The)d(80)p Fe(x)p Fv(86)e(pro)o(vides)g(hierarchical)g
(authority)g(checking.)22 b(As)c(a)g(result,)g(the)g(se)o(gment)e(slot)
i(dependencies)e(can)h(be)h(b)n(uilt)f(hierarchically)-116
1951 y(as)j(well)h(\(Figure)e(6\).)24 b(The)c(reduced)e(construction)g
(is)j(correct)e(because)g(the)h(upper)e(le)n(v)o(el)i(mapping)e(entry)h
(permissions)g(o)o(v)o(erride)f(the)i(lo)n(wer)1212 2077
y
 11709153 9209446 0 0 11709153 9209446 startTexFig
 1212 2077 a
%%BeginDocument: segmap.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: segmap.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Wed Oct 13 21:31:14 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 178 140
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-17.0 150.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3487 m -1000 -1000 l 4237 -1000 l 4237 3487 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 300 750 m 1425 750 l 1425 975 l 300 975 l cp gs col-1 s gr 
% Polyline
n 300 1125 m 1425 1125 l 1425 1350 l 300 1350 l cp gs col-1 s gr 
% Polyline
n 300 1500 m 1425 1500 l 1425 1725 l 300 1725 l cp gs col-1 s gr 
% Polyline
n 300 1875 m 1425 1875 l 1425 2100 l 300 2100 l cp gs col-1 s gr 
% Polyline
n 300 2250 m 1425 2250 l 1425 2475 l 300 2475 l cp gs col-1 s gr 
% Polyline
n 2100 750 m 3225 750 l 3225 1575 l 2100 1575 l cp gs col-1 s gr 
% Polyline
n 2100 1650 m 3225 1650 l 3225 2475 l 2100 2475 l cp gs col-1 s gr 
% Polyline
gs  clippath
1989 920 m 2100 975 l 1976 978 l 2108 1008 l 2121 949 l cp
clip
n 1425 825 m 2100 975 l gs col-1 s gr gr

% arrowhead
n 1989 920 m 2100 975 l 1976 978 l  col-1 s
% Polyline
gs  clippath
1980 1170 m 2100 1200 l 1980 1230 l 2115 1230 l 2115 1170 l cp
clip
n 1425 1200 m 2100 1200 l gs col-1 s gr gr

% arrowhead
n 1980 1170 m 2100 1200 l 1980 1230 l  col-1 s
% Polyline
gs  clippath
1977 1359 m 2100 1350 l 1996 1416 l 2124 1374 l 2105 1317 l cp
clip
n 1425 1575 m 2100 1350 l gs col-1 s gr gr

% arrowhead
n 1977 1359 m 2100 1350 l 1996 1416 l  col-1 s
% Polyline
gs  clippath
1989 1745 m 2100 1800 l 1976 1803 l 2108 1833 l 2121 1774 l cp
clip
n 1425 1650 m 2100 1800 l gs col-1 s gr gr

% arrowhead
n 1989 1745 m 2100 1800 l 1976 1803 l  col-1 s
% Polyline
gs  clippath
1980 1920 m 2100 1950 l 1980 1980 l 2115 1980 l 2115 1920 l cp
clip
n 1425 1950 m 2100 1950 l gs col-1 s gr gr

% arrowhead
n 1980 1920 m 2100 1950 l 1980 1980 l  col-1 s
% Polyline
gs  clippath
1977 2184 m 2100 2175 l 1996 2241 l 2124 2199 l 2105 2142 l cp
clip
n 1425 2400 m 2100 2175 l gs col-1 s gr gr

% arrowhead
n 1977 2184 m 2100 2175 l 1996 2241 l  col-1 s
/Times-Bold ff 150.00 scf sf
300 300 m
gs 1 -1 sc (Segment Tree) col-1 sh gr
/Times-Bold ff 150.00 scf sf
300 480 m
gs 1 -1 sc (\(2^32 bytes\)) col-1 sh gr
/Times-Bold ff 150.00 scf sf
375 900 m
gs 1 -1 sc (2^28 bytes/slot) col-1 sh gr
/Times-Bold ff 150.00 scf sf
375 1320 m
gs 1 -1 sc (2^24 bytes/slot) col-1 sh gr
/Times-Bold ff 150.00 scf sf
375 1665 m
gs 1 -1 sc (2^20 bytes/slot) col-1 sh gr
/Times-Bold ff 150.00 scf sf
375 2085 m
gs 1 -1 sc (2^16 bytes/slot) col-1 sh gr
/Times-Bold ff 150.00 scf sf
375 2430 m
gs 1 -1 sc (2^12 bytes/slot) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2175 1215 m
gs 1 -1 sc (2^22 bytes/slot) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2250 480 m
gs 1 -1 sc (\(2^32 bytes\)) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2250 300 m
gs 1 -1 sc (Mapping Tree) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2175 2070 m
gs 1 -1 sc (2^12 bytes/slot) col-1 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 1256 3426 a Fv(Figure)f(6:)25 b(Se)o(gment)19 b(mapping)g
(dependencies)-116 3717 y(le)n(v)o(el)h(permissions.)8
3858 y(In)30 b(addition,)i(if)e(we)h(vie)n(w)f(the)h(se)o(gment)e
(slots)i(as)g(projecting)e(a)i(shado)n(w)e(onto)h(the)g(page)g(table)g
(entries)g(that)h(depend)d(on)i(them,)j(it)-116 3957
y(de)n(v)o(elops)d(that)i(the)g(shado)n(w)f(of)g(a)i(gi)n(v)o(en)d
(cgroup)g(slot)j(is)g(contiguous)c(in)j(the)g(mapping)e(table.)60
b(This)32 b(can)g(be)g(le)n(v)o(eraged)d(by)j(the)g(slot)-116
4057 y(dependenc)o(y)18 b(mechanism)i(to)h(transparently)e(coalesce)i
(dependenc)o(y)d(entries)k(into)f(ranges.)27 b(T)-7 b(ogether)20
b(these)h(optimizations)f(substantially)-116 4157 y(reduce)f(the)h
(size)h(of)f(the)g(slot)h(dependenc)o(y)c(table.)-116
4497 y Fo(4)119 b(Checkpoint)-116 4728 y Fv(ER)m(OS)24
b(implements)e(persistence)h(and)g(e)o(xogenous)e(f)o(ault)j(reco)o(v)o
(ery)d(using)i(a)h(reco)o(v)o(erable)d(checkpoint)g(mechanism.)34
b(Before)23 b(an)o(y)g(object)-116 4827 y(may)i(be)g(modi\002ed)f(in)h
(memory)-5 b(,)24 b(space)h(is)i(reserv)o(ed)c(for)i(it)h(in)f(the)h
(log.)39 b(On)26 b(pageout,)e(dirty)h(objects)g(are)g(appended)e(to)i
(the)h(log.)39 b(Object)-116 4927 y(f)o(aults)20 b(are)g(satis\002ed)h
(\002rst)g(from)e(the)h(log)g(and)g(then)g(from)f(the)h(object')-5
b(s)20 b(home)f(location)h(\(Figure)f(7\).)8 5068 y(When)d(a)h
(checkpoint)d(is)j(tak)o(en,)f(computation)e(is)j(temporarily)e
(suspended)f(and)i(all)h(dirty)e(objects)h(are)g(mark)o(ed,)g
(disabling)f(further)g(mod-)-116 5168 y(i\002cation.)30
b(Cop)o(y-on-write)20 b(techniques)h(enable)g(se)n(v)o(eral)g
(gigabytes)g(to)h(be)g(mark)o(ed)f(in)h(under)f(100)g(ms.)31
b(Once)22 b(the)g(mark)g(pass)g(completes,)-116 5267
y(computations)c(is)j(resumed)e(and)h(the)g(dirty)g(objects)f(are)i
(asynchronously)16 b(written)k(to)h(the)f(log.)8 5408
y(When)k(the)f(log)h(writes)g(ha)n(v)o(e)f(completed,)f(a)i(migrator)e
(is)j(started)f(to)f(cop)o(y)g(the)h(objects)f(back)g(to)h(their)f
(home)g(locations.)34 b(The)24 b(check-)p eop
%%Page: 10 10
10 9 bop 1045 8 a
 14340423 6380830 0 0 14340423 6380830 startTexFig
 1045 8 a
%%BeginDocument: CkFlow.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: CkFlow.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Wed Oct 13 21:31:13 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 218 97
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-8.0 100.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 2662 m -1000 -1000 l 4762 -1000 l 4762 2662 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 600 1350 m 1950 1350 l 1950 1650 l 600 1650 l cp gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
750 1575 m
gs 1 -1 sc (Checkpoint Log) col-1 sh gr
% Polyline
n 2400 1350 m 3750 1350 l 3750 1650 l 2400 1650 l cp gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
2475 1575 m
gs 1 -1 sc (Home Locations) col-1 sh gr
% Arc
gs  clippath
2557 1246 m 2625 1350 l 2517 1290 l 2616 1382 l 2656 1338 l cp
clip
n 2137.5 1762.5 638.6 -139.8 -40.2 arc
gs col-1 s gr
 gr

% arrowhead
n 2557 1246 m 2625 1350 l 2517 1290 l  col-1 s
% Arc
gs  clippath
2902 787 m 2850 675 l 2949 750 l 2864 645 l 2817 682 l cp
clip
n 2550.0 1012.5 451.6 48.4 -48.4 arcn
gs col-1 s gr
 gr

% arrowhead
n 2902 787 m 2850 675 l 2949 750 l  col-1 s
% Arc
gs  clippath
1252 787 m 1200 675 l 1299 750 l 1214 645 l 1167 682 l cp
clip
n 900.0 1012.5 451.6 48.4 -48.4 arcn
gs col-1 s gr
 gr

% arrowhead
n 1252 787 m 1200 675 l 1299 750 l  col-1 s
% Arc
gs  clippath
494 1436 m 600 1500 l 476 1494 l 606 1533 l 623 1476 l cp
clip
n 681.2 975.0 531.2 -98.8 98.8 arcn
gs col-1 s gr
 gr

% arrowhead
n 494 1436 m 600 1500 l 476 1494 l  col-1 s
% Polyline
n 975 75 m 3450 75 l 3450 675 l 975 675 l cp gs col-1 s gr 
% Polyline
n 600 450 m 975 450 l gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
1950 525 m
gs 1 -1 sc (Memory) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2025 375 m
gs 1 -1 sc (Main) col-1 sh gr
/Times-Italic ff 150.00 scf sf
675 975 m
gs 1 -1 sc (Pagein\(1\)) col-1 sh gr
/Times-Italic ff 150.00 scf sf
3075 975 m
gs 1 -1 sc (Pagein\(2\)) col-1 sh gr
/Times-Italic ff 150.00 scf sf
1875 1050 m
gs 1 -1 sc (Migration) col-1 sh gr
/Times-Italic ff 150.00 scf sf
300 375 m
gs 1 -1 sc (Pageout) col-1 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 1303 999 a Fv(Figure)20 b(7:)25 b(Flo)n(w)20 b(of)g(objects)g(in)h
(the)f(system)-116 1349 y(point/migrate)f(approach)g(ensures)i(that)g
(the)g(system)g(is)i(al)o(w)o(ays)e(able)g(to)h(reco)o(v)o(er)d(from)h
(the)h(most)g(recent)g(successful)g(checkpoint,)e(e)n(v)o(en)h(if)-116
1449 y(a)g(f)o(ailure)g(occurs)f(while)i(taking)e(a)i(checkpoint)d(or)i
(performing)d(a)j(migration.)8 1590 y(The)29 b(ER)m(OS)g(checkpoint)e
(mechanism)h(is)i(similar)f(to)g(that)g(of)g(K)n(e)o(yK)n(OS)f([Lan92)n
(],)j(b)n(ut)e(the)g(use)h(of)e(a)i(circular)e(log)h(mak)o(es)f(it)i
(more)-116 1690 y(adaptable)15 b(to)h(runtime)f(load)g(v)n(ariations.)
23 b(In)16 b(addition,)f(a)h(circular)g(log)f(structure)g(allo)n(ws)i
(the)f(migrator)e(to)j(proceed)d(incrementally)g([Gra93)n(].)-116
1789 y(If)21 b(there)h(are)f(hea)n(vy)g(demands)g(on)g(memory)-5
b(,)20 b(the)i(migrator)e(can)i(mo)o(v)o(e)e(a)i(small)g(number)e(of)i
(objects,)f(write)h(a)h(ne)n(w)e(checkpoint)f(directory)-5
b(,)-116 1889 y(and)19 b(update)g(the)i(checkpoint)d(log)i(header)f(to)
h(re\003ect)g(the)g(ne)n(w)g(\223most)g(recent)g(checkpoint\224)e
(directory)-5 b(.)8 2030 y(The)22 b(circular)g(log)g(also)g(allo)n(ws)h
(us)f(to)h(continue)e(reloading)f(objects)i(from)f(the)i(log)f(until)g
(the)g(space)g(is)h(reused,)f(which)g(impro)o(v)o(es)e(disk)-116
2130 y(arm)25 b(locality)-5 b(.)41 b(A)26 b(recent)f(e)o(xamination)e
(of)j(disk)f(write)h(traf)n(\002c)f(under)g(Linux)f(suggests)i(that)g
(o)o(v)o(er)e(half)h(of)h(the)f(disk)h(write)g(traf)n(\002c)f(during)
-116 2229 y(a)f(full)f(reb)n(uild)g(of)h(the)f(ER)m(OS)h(source)f(tree)
h(is)g(done)f(to)h(update)e(\002le)j(system)f(metadata.)34
b(Nearly)23 b(all)h(of)g(these)g(writes)g(are)f(eliminated)g(in)h(a)
-116 2329 y(reco)o(v)o(erably)17 b(persistent)j(system.)26
b(Better)21 b(still,)g(the)f(checkpoint)e(log)i(allo)n(ws)h(migration)e
(to)h(proceed)f(in)h(order)f(of)h(disk)h(destination,)e(which)-116
2429 y(yields)h(signi\002cant)g(impro)o(v)o(ements)d(in)j(write)h
(bandwidth)d(relati)n(v)o(e)h(to)i(con)m(v)o(entional)c(\002le)k
(systems.)-116 2751 y Fo(5)119 b(Status)30 b(and)g(Conclusions)-116
2978 y Fv(The)17 b(system)h(described)e(in)h(this)h(paper)f(is)h
(currently)e(running,)g(though)f(the)j(checkpoint)d(mechanism)h(is)j
(still)g(being)d(deb)n(ugged.)22 b(The)17 b(design)-116
3077 y(and)k(implementation)f(meet)i(all)h(of)f(the)g(principles)f(set)
i(forth)f(in)g(the)g(introduction.)28 b(Ev)o(en)22 b(disk)g(I/O)g
(delay)g(bounds)e(can)i(be)g(stated)h(for)e(the)-116
3177 y(current)e(implementation.)8 3318 y(At)i(present,)e(the)i(code)e
(is)i(brok)o(en)e(do)n(wn)g(approximately)e(as)k(follo)n(ws:)58
3456 y(Lines)143 b(Description)58 3555 y(14,424)97 b
(Machine-independent)16 b(C++)21 b(code)58 3655 y(17,254)97
b(Machine-speci\002c)19 b(C++)h(code)58 3754 y(1,696)139
b(Machine-speci\002c)19 b(assembler)8 3891 y(The)28 b(system)h(is)g
(not)f(yet)g(ready)f(for)g(distrib)n(ution,)i(b)n(ut)f(will)h(be)g
(made)e(a)n(v)n(ailable)h(for)f(use)i(by)f(interested)f(researchers.)48
b(T)-7 b(o)28 b(join)g(the)-116 3990 y(information)18
b(list,)j(please)f(see)h(the)f(ER)m(OS)g(home)g(page)f(at)i
Fa(http://www.cis.upenn.edu/\230eros)-116 4253 y Fj(Stability)-116
4450 y Fv(After)g(a)h(fe)n(w)g(weeks)g(of)f(shak)o(edo)n(wn,)f(the)i(k)
o(ernel)f(has)h(pro)o(v)o(en)e(surprisingly)g(rob)n(ust.)29
b(T)-7 b(o)22 b(stress)g(test)h(the)f(early)f(system,)h(we)g
(implemented)-116 4550 y(k)o(ernel)e(daemons)g(to)i(perform)d
(constraint)i(checking)e(and)i(object)g(in)m(v)n(alidation,)e(and)i
(ran)g(these)g(at)h(20)f(ms)h(interv)n(als.)28 b(In)21
b(addition,)f(we)i(and)-116 4650 y(set)k(the)g(hardw)o(are)f(clock)g
(to)h(interrupt)f(at)h(approximately)d(0.5ms)i(interv)n(als.)42
b(W)-7 b(e)27 b(then)e(tried)h(to)g(run)f(the)h(system)g(on)f(a)i
(20Mhz)d(386SX.)-116 4749 y(Some)n(what)19 b(to)h(our)g(surprise,)f(it)
i(runs,)e(mak)o(es)i(real)f(progress)f(on)h(user)g(domain)e(e)o(x)o
(ecution,)g(and)i(does)g(not)g(miss)h(an)f(interrupt.)-116
5012 y Fj(P)n(erf)n(ormance)-116 5209 y Fv(In)h(the)g(prototype')-5
b(s)20 b(untuned)f(IPC)j(implementation,)d(a)j(one-w)o(ay)e
(domain-to-domain)d(in)m(v)n(ocation)i(tak)o(es)j(3520)e(c)o(ycles)h
(\(user)f(to)i(user\))f(on)-116 5309 y(a)28 b(133)e(Mhz)i(Pentium)e
(\(26.5)g Fe(\026S)5 b Fv(\),)29 b(as)g(reported)c(by)i(the)h(hardw)o
(are)e(c)o(ycle)h(counter)-5 b(.)46 b(Of)27 b(these,)j(roughly)25
b(100)h(c)o(ycles)i(are)f(tak)o(en)g(by)g(the)-116 5408
y(hardw)o(are)21 b(pri)n(vile)o(ge)f(crossing)i(mechanism.)30
b(Subsequent)20 b(tuning)h(has)i(reduced)d(this)j(to)f(312)g(c)o(ycles)
g(\(2.34)e Fe(\026S)5 b Fv(\).)31 b(W)-7 b(e)24 b(will)f(not)f(reach)f
(the)p eop
%%Page: 11 11
11 10 bop -116 91 a Fv(lo)n(wer)25 b(limit)i(of)f(250)f(c)o(ycles)g
([Lie93a)o(])h(reported)e(by)i(Liedtk)o(e)f(for)g(the)i(486DX50;)g(the)
f(Pentium)f(has)h(a)h(higher)d(CPU)j(to)g(memory)d(c)o(ycle)-116
191 y(ratio)f(than)g(the)h(486,)f(and)g(some)h(c)o(ycles)f(are)h
(required)d(in)j(our)f(IPC)h(path)f(for)g(v)n(alidating)g(the)g(in)m(v)
n(ok)o(ed)f(capability)h(and)g(for)g(the)g(capability)-116
291 y(cop)o(y)c(portion)g(of)h(the)g(in)m(v)n(ocation.)-116
579 y Fj(Corr)o(ectness)-116 781 y Fv(A)f(k)o(e)o(y)g(objecti)n(v)o(e)e
(of)i(the)g(ER)m(OS)g(ef)n(fort)f(is)i(to)f(sustain)g(a)h(mean)e(time)h
(between)f(sotw)o(are)h(f)o(ailures)g(measured)f(in)h(years.)24
b(A)c(further)d(objecti)n(v)o(e,)-116 881 y(and)22 b(in)h(some)g(w)o
(ays)g(a)h(more)e(important)f(one,)i(is)h(to)f(ensure)g(that)g(we)g
Fn(ne)o(ver)i Fv(write)e(an)g(inconsistent)f(checkpoint)f(image)h(to)h
(the)g(disk.)34 b(The)-116 981 y(w)o(orst)20 b(problem)f(in)h
(persistent)g(systems)h(is)g(that)f Fn(err)l(or)o(s)i
Fv(are)e(persistent)g(too.)8 1122 y(The)32 b(careful)e(tracking)g(of)i
(dependencies)d(and)i(interpretation)f(conte)o(xts)g(allo)n(ws)i(us)g
(to)g(ensure)f(with)h(high)f(lik)o(elihood)f(that)h(states)-116
1221 y(written)26 b(to)h(the)g(disk)g(are)f(consistent.)44
b(V)-9 b(eri\002able)26 b(consistenc)o(y)g(constraints)g(can)g(be)h
(deri)n(v)o(ed)e(from)h(them,)h(and)g(are)f(applied)g(before)f(the)-116
1321 y(system)f(commits)g(a)h(checkpoint)e(image.)37
b(If)24 b(an)o(y)f(consistenc)o(y)h(constraint)f(is)i(violated,)g(the)f
(system)h(restarts)f(rather)g(than)g(committing)f(a)-116
1421 y(damaged)18 b(checkpoint)g(image.)8 1562 y(These)30
b(checks)f(pro)o(vide)e(protection)h(against)h(some)h(insidious)f
(errors,)i(including)d(man)o(y)g(unreported)f(memory)h(errors.)52
b(The)30 b(state)-116 1661 y(constraint)f(tracking)f(in)i(ef)n(fect)f
(pro)o(vides)f(a)j(de)o(gree)d(of)i(redundant)d(encoding,)j(which)f
(mak)o(es)h(localized)f(memory)f(errors)h(in)h(cgroups,)-116
1761 y(the)24 b(object)f(table,)i(and)e(the)h(in-memory)e(object)h
(headers)g(relati)n(v)o(ely)g(detectable.)35 b(The)24
b(system)g(e)n(v)o(en)f(does)g(an)h(occasional)f(checksum)g(on)-116
1861 y Fn(un)p Fv(modi\002ed)18 b(pages.)8 2002 y(These)k(measures)f
(are)g(suf)n(\002cient)g(to)g(protect)g(the)g(system)h(o)o(v)o(erall,)e
(b)n(ut)i(the)o(y)e(do)i(not)f(allo)n(w)g(us)h(to)f(catch)h(memory)d
(errors)i(in)h(dirty)e(user)-116 2101 y(pages.)26 b(W)-7
b(e)22 b(e)o(xpect)e(that)h(these)g(will)h(e)n(v)o(entually)d(become)h
(the)g(dominant)g(source)g(of)g(data)h(corruption)d(on)j(current)e
(commodity)g(hardw)o(are,)-116 2201 y(and)g(can)h(be)h(pre)n(v)o(ented)
c(only)j(with)g(hardw)o(are)f(support.)-116 2489 y Fj(Related)h(Eff)n
(orts)-116 2692 y Fv(ER)m(OS)g(is)g(closely)f(related)g(to)g(K)n(e)o
(yK)n(OS)f([Har85)o(,)h(Bom92)o(],)g(a)h(system)f(de)n(v)o(eloped)e(by)
i(K)n(e)o(y)g(Logic,)f(Inc.)25 b(to)19 b(support)f(reliable)h(time)g
(sharing)-116 2791 y(services)31 b(among)e(mutually)h(suspicious)g
(users.)57 b(The)31 b(ER)m(OS)g(microk)o(ernel)e(design)h(borro)n(ws)f
(hea)n(vily)h(from)g(their)h(e)o(xperiences.)55 b(The)-116
2891 y(implementation)18 b(is)j(completely)e(ne)n(w)-5
b(,)19 b(and)h(ER)m(OS)h(departs)e(from)g(the)i(K)n(e)o(yK)n(OS)e
(architecture)g(in)h(tw)o(o)h(w)o(ays.)k(First,)c(we)f(ha)n(v)o(e)g
(abandoned)-116 2991 y(the)c(K)n(e)o(yK)n(OS)f Fn(meter)o(s)h
Fv(notion)f(in)h(f)o(a)n(v)n(or)f(of)h(processor)f(reserv)o(es.)22
b(Second,)16 b(K)n(e)o(yK)n(OS)f(had)g(no)g(notion)g(of)h(a)g(thread.)
22 b(Threads)15 b(were)h(originally)-116 3090 y(introduced)23
b(in)j(the)g(ER)m(OS)g(k)o(ernel)f(to)g(support)g(precise)g(scheduling)
f(of)h(dri)n(v)o(ers,)h(and)f(to)h(pro)o(vide)e(a)i(locus)f(at)h(which)
f(scheduling)f(polic)o(y)-116 3190 y(might)18 b(be)g(attached)g
(independent)e(of)j(the)g(domain)e(for)h(research)g(purposes.)23
b(Schedulable)17 b(k)o(ernel)h(dri)n(v)o(ers)f(are)i(pro)o(ving)d(to)j
(be)g(a)g(signi\002cant)-116 3289 y(and)g(useful)h(f)o(acility)-5
b(,)20 b(b)n(ut)g(it)h(is)g(not)f(clear)g(that)g(the)o(y)f(w)o(arrant)h
(the)g(o)o(v)o(erhead)e(of)i(the)g(thread)f(abstraction.)8
3431 y(W)m(ith)28 b(the)f(addition)f(of)h(memory)f(reserv)o(es)g
(\(pinned)g(objects\),)i(we)f(belie)n(v)o(e)g(that)g(ER)m(OS)h(could)e
(be)h(used)g(in)h(man)o(y)e(real-time)g(appli-)-116 3530
y(cations.)40 b(The)25 b(o)o(v)o(erhead)d(of)j(the)g(checkpoint)f
(mechanism)g(should)g(be)h(both)f(predictable)g(and)h(schedulable.)38
b(Persistent)26 b(acti)n(v)o(e)f(objects,)-116 3630 y(ho)n(we)n(v)o(er)
m(,)19 b(raise)i(a)h(number)e(of)h(questions)f(concerning)f
(scheduling,)g(particularly)h(in)h(the)h(area)f(of)g(priority)f
(inheritance.)26 b(When)21 b(the)h(clien-)-116 3729 y(t/serv)o(er)e
(relationship)f(is)j(transiti)n(v)o(e,)e(or)g(\(as)h(in)g(ER)m(OS\))g
(does)f(not)h(observ)o(e)e(a)i(strict)g(stack-oriented)e(call/return)h
(discipline)g(that)h(preserv)o(es)-116 3829 y(thread)i(identity)-5
b(,)23 b(the)h(priority)f(inheritance)g(mechanisms)g(proposed)f(by)h(T)
-7 b(okuda)23 b(et.)37 b(al.)g([Kit93)n(])25 b(are)e(inadequate.)35
b(Further)m(,)23 b(it)i(is)g(not)f(at)-116 3929 y(all)i(apparent)d
(that)j(priority)e(inheritance)f(is)k(an)e(appropriate)e(model)h(for)h
(communications)e(between)h(conceptually)f(independent)g(acti)n(v)o(e)
-116 4028 y(agents.)-116 4317 y Fj(Futur)o(e)c(Dir)o(ections)-116
4519 y Fv(The)25 b(current)f(ER)m(OS)i(system)g(w)o(as)g(constructed)e
(as)i(a)g(baseline)f(for)g(a)h(future)f(distrib)n(uted)f(system.)41
b(The)26 b(single-le)n(v)o(el)e(store)h(and)g(careful)-116
4619 y(dependenc)o(y)17 b(tracking)i(lend)g(themselv)o(es)h(well)h(to)f
(Lamport')-5 b(s)19 b(v)o(ector)g(time)h(notions)g([Lam78)m(])h(and)f
(his)g(subsequent)f(w)o(ork)g(on)h(distrib)n(uted)-116
4718 y(snapshots)25 b([Cha85)n(].)40 b(By)26 b(combining)d(the)j
(logging)d(checkpoint)g(approach)h(with)h(careful)f(coloring)g(strate)o
(gies,)i(we)g(hope)e(to)i(be)f(able)g(to)-116 4818 y(implement)19
b(a)h(reco)o(v)o(erable)e(distrib)n(uted)h(system)h(with)h(acceptable)e
(space)h(and)g(performance)d(o)o(v)o(erhead.)-116 5106
y Fj(Ackno)o(wledgements)-116 5309 y Fv(Bryan)f(F)o(ord)g(of)h(the)g
(Uni)n(v)o(ersity)e(of)i(Utah)g(has)g(acti)n(v)o(ely)f(participated)f
(in)i(the)g(design)f(discussions)h(that)g(led)g(to)g(this)g(design,)g
(as)g(ha)n(v)o(e)g(Norman)-116 5408 y(Hardy)-5 b(,)18
b(Charles)j(Landau,)d(and)i(W)m(illiam)g(Frantz)g(of)g(the)g(K)n(e)o(y)
g(K)n(OS)g(group.)p eop
%%Page: 12 12
12 11 bop 8 91 a Fv(Early)19 b(readers)g(caught)f(a)i(number)d(of)i
(errors)g(\226)g(some)g(substantial)g(\226)g(in)h(this)g(paper)-5
b(.)24 b(Thanks)18 b(to)i(Mitchell)f(P)-9 b(.)19 b(Marcus,)g(W)m
(illiam)h(Frantz,)-116 191 y(Colin)g(McLean,)f(Dennis)h(Allison,)g(and)
g(Ben)g(Chen)g(for)g(their)g(ef)n(forts)f(in)i(re)n(vie)n(wing)d(under)
h(se)n(v)o(ere)g(time)i(pressure.)-116 513 y Fo(Refer)n(ences)-116
731 y Fv([Bom92])85 b(Allen)33 b(C.)h(Bomber)o(ger)m(,)f(A.)g(Peri)g
(Frantz,)i(W)m(illiam)f(S.)f(Frantz,)i(Ann)e(C.)g(Hardy)-5
b(,)35 b(Norman)c(Hardy)-5 b(,)34 b(Charles)f(R.)h(Landau,)271
831 y(Jonathan)19 b(S.)i(Shapiro.)f(\223The)g(K)n(e)o(yK)n(OS)f(NanoK)n
(ernel)g(Architecture,)-6 b(\224)19 b Fn(Pr)l(oceedings)g(of)i(the)g
(USENIX)f(W)-8 b(orkshop)20 b(on)g(Micr)l(o-)271 931
y(K)m(ernels)h(and)f(Other)g(K)m(ernel)h(Ar)m(c)o(hitectur)m(es)p
Fv(.)e(USENIX)h(Association.)g(April)g(1992.)e(pp)i(95-112.)-116
1097 y([Cha85])113 b(K.)17 b(Mani)f(Chandy)f(and)h(Leslie)h(Lamport.)d
(\223Distrib)n(uted)i(Snapshots:)23 b(Determining)14
b(Global)i(States)h(of)f(Distrib)n(uted)g(Systems,)-6
b(\224)271 1196 y Fn(A)n(CM)21 b(T)-5 b(r)o(ansactions)19
b(on)h(Computer)g(Systems)p Fv(.)g(V)-11 b(ol)21 b(3,)f(No)g(1)g(pp.)g
(63-75)e(\(February)g(1985\))-116 1362 y([F)o(or93])132
b(Bryan)28 b(F)o(ord)g(and)g(Jay)h(Lepreau,)g(\223Ev)n(olving)d(Mach)j
(3.0)e(to)i(a)g(Migrating)e(Threads)h(Model,)-6 b(\224)30
b Fn(Pr)l(oceedings)d(of)i(the)f(W)-5 b(inter)271 1462
y(USENIX)20 b(Confer)m(ence)p Fv(,)f(January)g(1994.)-116
1628 y([Gra93])122 b(Jim)21 b(Gray)f(and)f(Andreas)h(Reuter)-5
b(.)20 b Fn(T)-5 b(r)o(ansaction)19 b(Pr)l(ocessing)o(,)h(Concepts)g
(and)f(T)-8 b(ec)o(hnolo)o(gy)p Fv(.)18 b(Mor)o(gan)g(Kaufmann.)g
(1993.)-116 1794 y([Ham95])85 b(Graham)30 b(Hamilton)g(and)g(P)o(anos)g
(K)m(ougiouris,)h Fn(The)g(Spring)f(Nucleus:)46 b(A)31
b(micr)l(ok)o(ernel)g(for)g(objects)p Fv(,)i(Sun)d(Microsystems)271
1894 y(Laboratories,)18 b(Inc.)-116 2060 y([Har85])122
b(Norman)19 b(Hardy)-5 b(.)19 b(\223The)g(K)n(e)o(yK)n(OS)h
(Architecture\224)e Fn(Oper)o(ating)h(Systems)i(Re)o(vie)o(w)p
Fv(.)e(Oct.)i(1985,)d(pp)i(8-25.)-116 2226 y([Kit93])141
b(T)-7 b(akuro)17 b(Kitayama,)g(T)-7 b(atsuo)18 b(Nakajima,)f(Hiroshi)h
(Araka)o(w)o(a,)f(and)g(Hide)o(yuki)f(T)-7 b(okuda.)16
b(\223Inte)o(grated)g(Management)g(of)h(Priority)271
2325 y(In)m(v)o(ersion)h(in)i(Real-T)m(ime)g(Mach.)-6
b(\224)20 b Fn(IEEE)f(Real-T)-5 b(ime)20 b(Systems)h(Symposium)p
Fv(.)e(December)g(1993)-116 2491 y([Lam76])94 b(Butler)26
b(W)-8 b(.)27 b(Lampson)e(and)g(Ho)n(werd)g(E.)h(Sutr)o(gis.)f
(\223Re\003ections)h(on)f(an)h(Operating)f(System)h(Design.)-6
b(\224)25 b Fn(Communications)f(of)271 2591 y(the)c(A)n(CM)h
Fv(V)-11 b(ol)20 b(19,)g(No)g(5,)g(May)g(1976.)-116 2757
y([Lam78])94 b(Leslie)30 b(Lamport.)d(\223T)m(ime,)j(Clocks,)h(and)e
(the)f(Ordering)g(of)g(Ev)o(ents)g(in)h(a)h(Distrib)n(uted)e(System,)-6
b(\224)31 b Fn(Communications)c(of)i(the)271 2857 y(A)n(CM)p
Fv(.)20 b(V)-11 b(ol)21 b(21,)f(No)g(7,)g(pp.)f(558-565)f(\(July)i
(1978\).)-116 3023 y([Lan92])117 b(Charles)17 b(R.)f(Landau.)f(\223The)
h(Checkpoint)e(Mechanism)h(in)i(K)n(e)o(yK)n(OS,)-6 b(\224)15
b Fn(Pr)l(oceedings)g(of)h(the)g(Second)f(International)f(W)-8
b(orkshop)271 3122 y(on)20 b(Object)g(Orientation)f(in)i(Oper)o(ating)d
(Systems)p Fv(.)j(IEEE.)e(September)g(1992.)f(pp)i(86-91.)-116
3289 y([Lie93a])99 b(Jochen)31 b(Liedtk)o(e.)g(\223Impro)o(ving)e(IPC)k
(by)e(K)n(ernel)h(Design,)-6 b(\224)34 b Fn(Pr)l(oceedings)d(of)h(the)g
(14th)g(A)n(CP)f(Symposium)g(on)h(Oper)o(ating)271 3388
y(System)20 b(Principles)p Fv(,)g(A)m(CM,)h(1993)-116
3554 y([Lie93b])94 b(Jochen)25 b(Liedtk)o(e.)h(\223)-7
b(A)26 b(Persistent)h(System)f(in)g(Real)h(Use)g(\226)f(Experiences)f
(of)h(the)g(First)h(13)e(Y)-8 b(ears\224)26 b Fn(Pr)l(oceedings)f(of)h
(the)h(3r)m(d)271 3654 y(International)18 b(W)-8 b(orkshop)20
b(on)g(Object-Orientation)e(in)i(Oper)o(ating)f(Systems)p
Fv(,)h(Ashe)n(ville,)g(N.C.)h(1993)-116 3820 y([Mer93])108
b(Clif)n(ford)29 b(W)-8 b(.)31 b(Mercer)m(,)f(Stef)o(an)g(Sa)n(v)n
(age,)i(and)d(Hide)o(yuki)f(T)-7 b(okuda.)28 b(\223Processor)h
(Capacity)g(Reserv)o(es:)45 b(An)29 b(Abstraction)g(for)271
3919 y(Managing)c(Processor)h(Usage,)-6 b(\224)28 b Fn(Pr)l(oceedings)e
(of)h(the)f(F)-9 b(ourth)26 b(W)-8 b(orkshop)27 b(on)f(W)-8
b(orkstation)26 b(Oper)o(ating)g(Systems)h(\(WW)n(OS-)271
4019 y(IV\))p Fv(,)20 b(October)f(1993)-116 4185 y([Tho78])112
b(K.)29 b(Thompson,)g(\223UNIX)f(Implementation,)-6 b(\224)29
b Fn(Bell)g(System)g(T)-8 b(ec)o(hnical)28 b(J)n(ournal)p
Fv(,)h(V)-11 b(ol)29 b(57,)i(No)e(6,)h(P)o(art)f(2,)i(pp.)d(1931-1946,)
271 4285 y(July/August)19 b(1978)-116 4451 y([Sha96a])85
b(Jonathan)19 b(S.)i(Shapiro.)e Fn(A)h(Pr)l(o)o(gr)o(ammer')m(s)f(Intr)
l(oduction)g(to)h(ER)m(OS)p Fv(.)f(A)-6 b(v)n(ailable)19
b(via)i(the)f(ER)m(OS)g(home)g(page)f(at)271 4550 y Fa
(http://www.cis.upenn.edu/\230eros)-116 4716 y Fv([Sha96b])80
b(Jonathan)21 b(S.)i(Shapiro.)d Fn(The)i(ER)m(OS)g(Object)g(Refer)m
(ence)f(Manual)p Fv(.)g(In)h(progress.)f(Draft)g(a)n(v)n(ailable)h(via)
g(the)g(ER)m(OS)h(home)e(page)271 4816 y(at)271 4916
y Fa(http://www.cis.upenn.edu/\230eros)-116 5082 y Fv([W)l(ul81])108
b(W)m(illiam)22 b(A.)g(W)l(ulf,)g(Ro)o(y)g(Le)n(vin,)f(and)g(Samuel)g
(P)-9 b(.)22 b(Harbison.)e Fn(HYDRA/C.mmp:)27 b(An)22
b(Experimental)e(Computer)i(System)f Fv(Mc-)271 5181
y(Gra)o(w)f(Hill,)h(1981.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
