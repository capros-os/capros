%!PS-Adobe-2.0
%%Creator: dvips(k) 5.85 Copyright 1999 Radical Eye Software
%%Title: sosp99-eros.dvi
%%Pages: 16
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Italic Times-Bold Helvetica-Bold
%%+ Helvetica Helvetica-Oblique Times-BoldItalic
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o tmp.ps sosp99-eros.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 1999.10.16:0013
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin @defspecial

 TeXDict begin /box{newpath 2 copy moveto 3 copy pop exch lineto 4
copy pop pop lineto 4 copy exch pop exch pop lineto closepath } bind
def /min{ 2 copy gt { exch } if pop } bind def/max{ 2 copy lt { exch
} if pop } bind def/roundedbox{/radius exch store 3 2 roll 2 copy min
radius sub /miny exch store max radius add /maxy exch store 2 copy
min radius sub /minx exch store max radius add /maxx exch store newpath
minx radius add miny moveto maxx miny maxx maxy radius arcto maxx maxy
minx maxy radius arcto minx maxy minx miny radius arcto minx miny maxx
miny radius arcto 16 {pop} repeat closepath }bind def /rectcartouche{box
gsave .95 setgray fill grestore 1 setlinewidth stroke }bind def /cartouche{roundedbox
gsave .95 setgray fill grestore 1 setlinewidth stroke }bind def end
 
@fedspecial end TeXDict begin
40258431 52099146 1000 600 600 (sosp99-eros.dvi) @start
/Fa 134[42 42 2[46 28 32 37 2[42 46 69 23 46 1[23 46
2[37 46 37 46 42 12[55 46 2[51 65 1[78 55 65 1[32 65
1[51 55 1[60 1[60 6[28 5[42 42 42 2[23 47[{
TeXBase1Encoding ReEncodeFont}36 83.022 /Times-Bold rf
%DVIPSBitmapFont: Fb cmr10 10 4
/Fb 4 59 df<EB03F8EB1FFF90387E0FC09038F803E03901E000F0484813780007147C48
487FA248C77EA2481580A3007EEC0FC0A600FE15E0B3007E15C0A4007F141F6C1580A36C
15006D5B000F143EA26C6C5B6C6C5B6C6C485A6C6C485A90387E0FC0D91FFFC7FCEB03F8
233A7DB72A>48 D<EB01C013031307131F13FFB5FCA2131F1200B3B3A8497E007FB512F0
A31C3879B72A>I<EB0FF0EB7FFE48B57E3903E03FE0390F000FF0000E6D7E486D7E486D
7E123000706D7E126012FCB4EC7F807FA56CC7FC121CC8FCEDFF00A34A5A5D14035D4A5A
5D140F4A5A4A5A92C7FC147C5C495A495A495A495A91C8FC011EEB01805B5B4913034848
1400485A485A000EC75A000FB6FC5A5A485CB6FCA321387CB72A>I<121C127FEAFF80A5
EA7F00121CC7FCB2121C127FEAFF80A5EA7F00121C092479A317>58
D E
%EndDVIPSBitmapFont
/Fc 133[35 3[40 45 25 35 35 1[45 45 45 66 25 2[25 45
45 1[40 45 40 45 45 12[51 45 56 3[61 11[56 12[45 45 45
45 45 2[23 46[{TeXBase1Encoding ReEncodeFont}30 90.9091
/Times-Italic rf /Fd 201[25 25 25 25 25 25 49[{
TeXBase1Encoding ReEncodeFont}6 49.8132 /Times-Roman
rf /Fe 201[29 29 29 29 29 29 49[{TeXBase1Encoding ReEncodeFont}6
58.1154 /Times-Roman rf
%DVIPSBitmapFont: Ff cmsy10 10 6
/Ff 6 104 df<007FB81280B912C0A26C17803204799641>0 D<0060150600F0150F6C15
1F007C153E6C157C6C15F86C6CEB01F06C6CEB03E06C6CEB07C06C6CEB0F806C6CEB1F00
017C133E6D5B6D5B90380F81F0903807C3E0903803E7C06DB45A6D90C7FC147EA214FF49
7F903803E7C0903807C3E090380F81F049C67E013E137C497F497F4848EB0F804848EB07
C04848EB03E04848EB01F048C812F8003E157C48153E48151F48150F00601506282874A8
41>2 D<EB1FF0EB7FFC48B5FC4814804814C04814E04814F04814F8A24814FCA2B612FE
A96C14FCA26C14F8A26C14F06C14E06C14C06C14806C140038007FFCEB1FF01F1F7BA42A
>15 D<181EA4181F84A285180785727EA2727E727E85197E85F11F80F10FC0F107F0007F
BA12FCBCFCA26C19FCCCEA07F0F10FC0F11F80F13F00197E61614E5A4E5AA24E5A61180F
96C7FCA260181EA4482C7BAA53>33 D<EC01F8140FEC3F80ECFC00495A495A495AA2130F
5CB3A7131F5C133F49C7FC13FEEA03F8EA7FE048C8FCEA7FE0EA03F8EA00FE137F6D7E13
1F80130FB3A7801307A26D7E6D7E6D7EEC3F80EC0FF814011D537ABD2A>102
D<12FCEAFFC0EA07F0EA01FCEA007E7F80131F80130FB3A7801307806D7E6D7EEB007EEC
1FF0EC07F8EC1FF0EC7E00495A495A495A5C130F5CB3A7131F5C133F91C7FC137E485AEA
07F0EAFFC000FCC8FC1D537ABD2A>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmmi10 10 20
/Fg 20 120 df<EB0380D907E01307010FEC0F80161F5CA2011F143FA24A1400A2013F5C
A291C7127EA24914FEA2017E5CA201FE1301A2495CA200011403A249ECF018A200031407
1738EEE030150F00071670031F1360153F6D017713E0486C9038E3E1C0903AFF03C1F380
903ACFFF00FF00D9C3FC133ED81FC0C9FCA25BA2123FA290CAFCA25AA2127EA212FEA25A
A212702D377EA432>22 D<121C127FEAFF80A213C0A3127F121C1200A412011380A21203
13005A1206120E5A5A5A12600A19798817>59 D<1760177017F01601A21603A21607160F
A24C7EA216331673166316C3A2ED0183A2ED0303150683150C160115181530A21560A215
C014011580DA03007FA202061300140E140C5C021FB5FC5CA20260C7FC5C83495A8349C8
FC1306A25BA25B13385B01F01680487E000716FFB56C013F13FF5EA2383C7DBB3E>65
D<0103B77E4916F018FC903B0007F80003FE4BEB00FFF07F80020FED3FC0181F4B15E0A2
141FA25DA2143F19C04B143F1980027F157F190092C812FE4D5A4A4A5AEF0FF04AEC1FC0
05FFC7FC49B612FC5F02FCC7B4FCEF3FC00103ED0FE0717E5C717E1307844A1401A2130F
17035CA2131F4D5A5C4D5A133F4D5A4A4A5A4D5A017F4BC7FC4C5A91C7EA07FC49EC3FF0
B812C094C8FC16F83B397DB83F>I<9339FF8001C0030F13E0037F9038F80380913A01FF
807E07913A07F8000F0FDA1FE0EB079FDA3F80903803BF0002FFC76CB4FCD901FC80495A
4948157E495A495A4948153E017F163C49C9FC5B1201484816385B1207485A1830121F49
93C7FCA2485AA3127F5BA312FF90CCFCA41703A25F1706A26C160E170C171C5F6C7E5F00
1F5E6D4A5A6C6C4A5A16076C6C020EC8FC6C6C143C6C6C5C6CB4495A90393FE00FC0010F
B5C9FC010313FC9038007FC03A3D7CBA3B>I<0103B7FC4916E018F8903B0007F80007FE
4BEB00FFF03F80020FED1FC0180F4B15E0F007F0021F1503A24B15F81801143F19FC5DA2
147FA292C8FCA25C18035CA2130119F84A1507A2130319F04A150FA2010717E0181F4A16
C0A2010FEE3F80A24AED7F00187E011F16FE4D5A4A5D4D5A013F4B5A4D5A4A4A5A057FC7
FC017F15FEEE03FC91C7EA0FF049EC7FC0B8C8FC16FC16C03E397DB845>I<0103B812F0
5BA290260007F8C7123F4B1407F003E0020F150118005DA2141FA25D19C0143FA24B1330
A2027F1470190092C7126017E05C16014A495A160F49B6FCA25F9138FC000F01031407A2
4A6DC8FCA201075C18034A130660010F160693C7FC4A150E180C011F161C18184A1538A2
013F5E18F04A4A5AA2017F15074D5A91C8123F49913803FF80B9FCA295C7FC3C397DB83D
>I<0103B812E05BA290260007F8C7123F4B140FF003C0140F18015DA2141FA25D198014
3FA25D1760027F14E095C7FC92C75AA24A1301A24A495A16070101141F91B6FC94C8FCA2
903903FC001F824A130EA21307A24A130CA2010F141CA24A90C9FCA2131FA25CA2133FA2
5CA2137FA291CBFC497EB612C0A33B397DB835>I<DCFF8013E0030F13F0037F9038FC01
C0913A01FF803E03913A07FC000F07DA0FE0EB038FDA3FC0903801DF804AC812FFEB01FE
D903F8157F4948ED3F00495A495A494881017F161E49C9FC5B12014848161C5B1207485A
1818121F4993C7FCA2485AA3127F5BA312FF90CCFC93387FFFFE93B5FCA29338007FC071
5A177F95C7FCA27E5F5F7F123F16016C7E5F6C6C14036D14071207D803FCEC1EF86C6C14
3C26007F80EBF07890393FF007E0010FB5EA8030010349C9FC9038003FE03B3D7DBA41>
I<147E903803FF8090390FC1C38090391F00EFC0017E137F49133F485A4848EB1F801207
5B000F143F48481400A2485A5D007F147E90C7FCA215FE485C5AA214015D48150CA21403
EDF01C16181407007C1538007E010F1330003E131F027B13706C01E113E03A0F83C0F9C0
3A03FF007F80D800FCEB1F0026267DA42C>97 D<163FED1FFFA3ED007F167EA216FEA216
FCA21501A216F8A21503A216F0A21507A2027E13E0903803FF8790380FC1CF90381F00EF
017EEB7FC049133F485A4848131F000715805B000F143F485A1600485A5D127F90C7127E
A215FE5A485CA21401A248ECF80CA21403161CEDF0181407007C1538007E010F1330003E
131F027B13706C01E113E03A0F83C0F9C03A03FF007F80D800FCEB1F00283B7DB92B>
100 D<EC3FC0903801FFF0903807E07890381F801C90387E001E49130E485A485A120748
5A49131E001F141C153C484813F8EC03E0007FEB3FC09038FFFE0014E090C8FC5A5AA700
7E140315071506003E140E153C6C14706C6C13E0EC07C03903E03F003801FFF838003FC0
20267DA427>I<EC07E0EC1FF891387C1C38903901F80EFC903803F007903807E003EB0F
C090381F8001D93F0013F85B017E130313FE16F0485A150712034914E0A2150F12074914
C0A2151FA2491480A2153FA2160000035C6D5B00015B4A5A3900F8077E90387C1EFEEB1F
F8903807E0FC90C7FC1401A25DA21403001E5C123F387F80075D00FF495A49485A4849C7
FC007C137E383C01F8381FFFE0000390C8FC26367FA428>103 D<EB03F0EA01FFA3EA00
075CA3130F5CA3131F5CA3133F91C9FCA35B90387E03F8EC0FFF91383C0F809039FEF007
C0D9FDC07FEBFF80EC0003485A5BA249130712035BA2150F00075D5BA2151F000F5D5B15
3F93C7FC121F4990387F0180157EEDFE03003F02FC130090C7FC5EEDF80648150E007E15
0C161C5E00FEEC787048EC3FE00038EC0F80293B7CB930>I<EB0FC0EA03FF5AA2EA001F
1480A2133FA21400A25BA2137EA213FEA25BA21201A25BA21203A25BA21207A25BA2120F
A25BA2121FA25BA2123FA290C7FCA25AA2EA7E03A2EAFE07130612FCA2130E130C131C13
18EA7C38EA3C70EA1FE0EA0780123B7DB919>108 D<D803E0137F3A07F801FFE03A0E3C
0781F03A1C3E1E00F826383F387F00305B4A137C00705B00605BA200E090C712FC485A13
7EA20000140101FE5C5BA2150300015D5B15075E120349010F133016C0031F13700007ED
80605B17E0EE00C0000F15014915801603EE0700001FEC0F0E49EB07FC0007C7EA01F02C
267EA432>110 D<90390F8003F090391FE00FFC903939F03C1F903A70F8700F80903AE0
FDE007C09038C0FF80030013E00001491303018015F05CEA038113015CA2D800031407A2
5CA20107140FA24A14E0A2010F141F17C05CEE3F80131FEE7F004A137E16FE013F5C6E48
5A4B5A6E485A90397F700F80DA383FC7FC90387E1FFCEC07E001FEC9FCA25BA21201A25B
A21203A25B1207B512C0A32C3583A42A>112 D<3903E001F83907F807FE390E3C1E0739
1C3E381F3A183F703F800038EBE07F0030EBC0FF00705B00601500EC007E153CD8E07F90
C7FCEAC07EA2120013FE5BA312015BA312035BA312075BA3120F5BA3121F5B0007C9FC21
267EA425>114 D<01F8EB03C0D803FEEB07E0D8070F130F000E018013F0121C12180038
140700301403D8701F130112601500D8E03F14E000C090C7FC5BEA007E16C013FE5B1501
000115805B150316001203495B1506150E150C151C151815385D00015C6D485A6C6C485A
D97E0FC7FCEB1FFEEB07F024267EA428>118 D<01F816F0D803FE9138E001F8D8070F90
3801F003000ED9800314FC121C12180038020713010030EDE000D8701F167C1260030F14
3CD8E03F163800C001005B5BD8007E131F183001FE5C5B033F1470000117604991C7FCA2
18E000034A14C049137E17011880170318005F03FE1306170E000101015C01F801BF5B3B
00FC039F8070903A7E0F0FC0E0903A1FFC03FFC0902703F0007FC7FC36267EA43B>I
E
%EndDVIPSBitmapFont
/Fh 138[51 2[32 8[23 1[51 1[46 30[51 12[46 46 46 46 46
46 46 46 46 46 48[{TeXBase1Encoding ReEncodeFont}16 83.022
/Helvetica-Bold rf /Fi 134[37 1[55 1[46 23 32 32 1[42
42 46 65 23 42 1[23 1[42 1[37 42 37 42 42 51[28 45[{
TeXBase1Encoding ReEncodeFont}20 83.022 /Times-BoldItalic
rf
%DVIPSBitmapFont: Fj cmsy6 6 2
/Fj 2 122 df<136013701360A20040132000E0137038F861F0387E67E0381FFF803807
FE00EA00F0EA07FE381FFF80387E67E038F861F038E060700040132000001300A2137013
6014157B9620>3 D<136013F0A71360A4387C63E0B512F0A2387C63E038006000A313F0
B3A21360A7142E7CA21E>121 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fk cmsy9 9 1
/Fk 1 14 df<ED0FFF92B512F0020714FE021F6E7E91267FF80113E0913AFF80001FF0D9
03FCC7EA03FCD907F0EC00FED90FC0153F49486F7E013EC9EA07C049707E49707E484870
7E4848177C49173C0007183E48488390CB7E481980001E1807A2003E19C0003C1803007C
19E000781801A300F819F0481800AB6C1801007819E0A3007C1803003C19C0003E180700
1E1980A2001F180F6C19006D5F6C6C173E0003183C6D177C6C6C5F6C6C4C5A017C4C5A6D
4C5A6D6CED1F806D6C4BC7FCD907F015FED903FCEC03FC902600FF80EB1FF0913A7FF801
FFE0021FB6128002074AC8FC020014F0030F90C9FC44457CB44D>13
D E
%EndDVIPSBitmapFont
/Fl 134[37 1[54 37 37 21 29 25 37 37 37 37 58 21 37 1[21
37 37 25 33 37 33 37 33 12[46 42 2[42 54 1[66 1[54 1[25
5[50 1[54 7[37 37 37 1[37 37 37 37 37 37 21 19 25 19
7[37 33[42 2[{TeXBase1Encoding ReEncodeFont}47 74.7198
/Times-Roman rf /Fm 103[28 1[42 1[37 37 24[37 42 42 60
42 42 23 32 28 42 42 42 42 65 23 42 23 23 42 42 28 37
42 37 42 37 3[28 1[28 1[60 60 78 60 60 51 46 55 60 46
60 60 74 51 60 32 28 60 60 46 51 60 55 55 60 5[23 23
42 42 42 42 42 42 42 42 42 42 23 21 28 21 47 42 28 28
28 1[69 6[28 26[46 46 2[{TeXBase1Encoding ReEncodeFont}82
83.022 /Times-Roman rf /Fn 133[32 37 37 55 37 42 23 32
32 42 42 42 42 60 23 37 23 23 42 42 23 37 42 37 42 42
7[46 51 69 51 60 46 42 51 1[51 60 55 69 46 55 37 28 60
1[51 51 60 55 51 51 6[28 42 42 42 42 42 42 42 42 42 42
23 21 28 21 2[28 28 28 39[{TeXBase1Encoding ReEncodeFont}67
83.022 /Times-Italic rf /Fo 134[50 1[72 50 55 33 39 44
1[55 50 55 83 28 55 33 28 55 50 33 44 55 44 55 50 10[72
1[66 55 72 1[61 78 1[94 66 78 1[39 78 2[66 72 72 1[72
7[50 50 50 50 50 50 50 50 50 2[25 46[{TeXBase1Encoding ReEncodeFont}48
99.6264 /Times-Bold rf /Fp 138[46 1[42 28 1[46 1[46 69
18 1[18 18 46 1[23 46 46 42 46 46 32[84 17[23 1[23 44[{
TeXBase1Encoding ReEncodeFont}19 83.022 /Helvetica-Oblique
rf /Fq 133[42 42 42 60 42 46 23 42 28 1[46 46 46 69 18
42 1[18 46 46 23 46 46 42 46 46 10[55 60 1[55 60 1[55
65 1[69 46 2[23 2[51 55 60 60 1[55 18[23 28 23 40[42
3[{TeXBase1Encoding ReEncodeFont}42 83.022 /Helvetica
rf
%DVIPSBitmapFont: Fr cmsy8 8 1
/Fr 1 122 df<1338137CA81338A7007C137CB512FEA3387C387C00001300A5137CB3A4
1338AD173D7CAE20>121 D E
%EndDVIPSBitmapFont
/Fs 137[50 1[28 1[33 1[55 55 55 83 3[22 55 2[55 55 1[55
55 13[66 5[83 2[50 3[61 1[72 21[28 46[{TeXBase1Encoding ReEncodeFont}19
99.6264 /Helvetica rf
%DVIPSBitmapFont: Ft cmsy10 12 1
/Ft 1 4 df<147014F8A81470007815F0007C1401B4EC07F8D87F80EB0FF0D83FE0EB3F
E0D80FF0EB7F80D803F8EBFE003900FE73F890383F77E090380FFF80D903FEC7FCEB00F8
EB03FE90380FFF8090383F77E09038FE73F83903F870FED80FF0EB7F80D83FE0EB3FE0D8
7F80EB0FF0D8FF00EB07F8007CEC01F000781400C7140014F8A81470252B7AAD32>3
D E
%EndDVIPSBitmapFont
/Fu 134[83 4[50 83 2[91 2[133 42 2[42 2[50 83 1[83 91
83 13[100 108 2[116 9[100 10[50 58[{TeXBase1Encoding ReEncodeFont}17
149.44 /Helvetica-Bold rf /Fv 203[33 33 51[{
TeXBase1Encoding ReEncodeFont}2 66.4176 /Times-Bold rf
/Fw 134[29 1[44 29 1[18 26 26 1[33 1[33 48 3[18 1[33
1[29 3[33 13[33 41 2[48 79[{TeXBase1Encoding ReEncodeFont}16
66.4176 /Times-Italic rf /Fx 105[33 27[29 33 33 48 33
33 18 26 22 1[33 33 33 52 18 33 18 18 33 33 22 29 33
29 33 29 3[22 1[22 3[63 2[41 37 44 1[37 48 48 59 1[48
26 22 48 1[37 1[48 44 44 48 5[18 18 33 33 33 33 33 1[33
33 33 33 1[17 22 17 2[22 22 22 52 2[33 31[37 37 2[{
TeXBase1Encoding ReEncodeFont}66 66.4176 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 170 1
170 0 bop 2205 -260 a Fx(17th)18 b(A)m(CM)f(Symposium)g(on)g(Operating)
i(Systems)e(Principles)j(\(SOSP)c('99\))2239 -169 y(Published)i(as)f
Fw(Oper)o(ating)i(Systems)f(Re)o(vie)o(w)p Fx(,)g Fv(34)p
Fx(\(5\):170\226185,)h(Dec.)i(1999)846 275 y Fu(ER)m(OS:)41
b(a)g(fast)g(capability)g(system)3035 222 y Ft(\003)439
532 y Fs(Jonathan)30 b(S)n(.)e(Shapiro)1338 496 y Fr(y)1640
532 y Fs(Jonathan)i(M.)d(Smith)301 b(Da)n(vid)28 b(J)m(.)f(F)-5
b(arber)1023 665 y Fq(Depar)s(tment)24 b(of)g(Computer)f(and)h(Inf)n
(or)r(mation)g(Science)1458 798 y(Univ)n(ersity)e(of)i(P)l(ennsylv)n
(ania)1293 930 y Fp(shap)m(,jms)o(,f)n(arber@dsl.cis)o(.upenn.edu)-152
1254 y Fo(Abstract)-152 1431 y Fn(ER)m(OS)19 b(is)h(a)f
(capability-based)d(oper)o(ating)i(system)i(for)g(commodity)-152
1523 y(pr)l(ocessor)o(s)g(whic)o(h)f(uses)h(a)f(single)g(le)o(vel)g
(stor)o(a)o(g)o(e)g(model.)24 b(The)19 b(sin-)-152 1614
y(gle)30 b(le)o(vel)f(stor)m(e')m(s)g(per)o(sistence)h(is)g(tr)o
(anspar)m(ent)e(to)i(applications.)-152 1705 y(The)h(performance)f
(consequences)f(of)i(support)f(for)i(tr)o(anspar)m(ent)-152
1797 y(per)o(sistence)18 b(and)f(capability-based)e(ar)m(c)o(hitectur)m
(es)i(ar)m(e)h(g)o(ener)o(ally)-152 1888 y(belie)o(ved)27
b(to)h(be)f(ne)m(gative)o(.)46 b(Surprisingly)-5 b(,)29
b(the)e(basic)h(oper)o(ations)-152 1979 y(of)c(ER)m(OS)e(\(suc)o(h)g
(as)i(IPC\))f(ar)m(e)g(g)o(ener)o(ally)f(compar)o(able)f(in)j(cost)f
(to)-152 2071 y(similar)j(oper)o(ations)d(in)i(con)m(ventional)d
(systems.)40 b(This)25 b(is)h(demon-)-152 2162 y(str)o(ated)j(with)f(a)
h(set)g(of)f(micr)l(obenc)o(hmark)f(measur)m(ements)h(of)g(se-)-152
2253 y(mantically)20 b(similar)h(oper)o(ations)d(in)j(Linux.)-27
2345 y(The)i(ER)m(OS)g(system)h(ac)o(hie)o(ves)e(its)j(performance)d
(by)h(coupling)-152 2436 y(well-c)o(hosen)38 b(abstr)o(act)g(objects)h
(with)g(cac)o(hing)e(tec)o(hniques)g(for)-152 2527 y(those)d(objects.)
64 b(The)33 b(objects)g(\(pr)l(ocesses,)k(nodes,)f(and)c(pa)o(g)o(es\))
-152 2619 y(ar)m(e)25 b(well-supported)f(by)g(con)m(ventional)e(har)m
(dwar)m(e)o(,)j(r)m(educing)e(the)-152 2710 y(o)o(verhead)k(of)h
(capabilities.)47 b(Softwar)m(e-mana)o(g)o(ed)25 b(cac)o(hing)h(tec)o
(h-)-152 2801 y(niques)e(for)g(these)g(objects)g(r)m(educe)f(the)h
(cost)h(of)f(per)o(sistence)o(.)36 b(The)-152 2893 y(r)m(esulting)j
(performance)f(sug)o(g)o(ests)h(that)g(composing)e(pr)l(otected)-152
2984 y(subsystems)21 b(may)f(be)g(less)i(costly)e(than)f(commonly)g
(belie)o(ved.)-152 3231 y Fo(1)100 b(Intr)n(oduction)-152
3408 y Fm(ER)m(OS)26 b(is)g(a)f(capability-based)e(microk)o(ernel)f
(with)j(a)h(single-le)n(v)o(el)-152 3500 y(storage)d(model.)35
b(The)23 b(single-le)n(v)o(el)f(store')-5 b(s)24 b(persistence)f(is)i
(trans-)-152 3591 y(parent)i(to)i(applications.)47 b(Storage)27
b(allocation,)i(scheduling,)f(and)-152 3682 y(f)o(ault)20
b(handling)e(policies)i(are)g(e)o(xported)e(from)h(the)h(k)o(ernel)f
(to)h(allo)n(w)-152 3773 y(multiple)c(operating)f(en)m(vironments)f
(and)i(application)g(customized)-152 3865 y(resource)30
b(management.)53 b(T)-7 b(o)31 b(simplify)f(security)g(assurance,)i
(all)-152 3956 y(code)16 b(ha)n(ving)e(either)i(direct)f(access)i(to)f
(the)g(hardw)o(are)e(or)i(the)g(ability)-152 4047 y(to)24
b(directly)f(transform)f(the)i(system')-5 b(s)24 b(security)f(state)i
(is)f(collected)-152 4139 y(in)17 b(the)g(k)o(ernel.)23
b(Bottom-half)15 b(de)n(vice)h(dri)n(v)o(ers)g(and)g(the)h(single-le)n
(v)o(el)-152 4230 y(store)j(are)h(therefore)d(implemented)g(within)i
(the)g(k)o(ernel.)-152 4468 y Fo(1.1)99 b(History)24
b(of)h(ER)m(OS)-152 4615 y Fm(ER)m(OS)38 b(is)g(the)g(third)e
(implementation)g(of)h(the)g(GNOSIS)h(\(later)-152 4706
y(renamed)26 b(K)n(e)o(yK)n(OS\))g(architecture)g([15)o(])h(created)g
(by)g(T)-7 b(ymShare,)p -152 4778 900 5 v -152 4861 a
Fl(Permission)18 b(to)f(mak)o(e)i(digital)e(or)h(hard)g(copies)g(of)g
(all)f(or)h(part)f(of)h(this)f(w)o(ork)-152 4944 y(for)22
b(personal)h(or)f(classroom)h(use)f(is)g(granted)g(without)h(fee)f(pro)
o(vided)h(that)-152 5027 y(copies)f(are)f(not)g(made)h(or)f(distrib)o
(uted)f(for)h(pro\002t)g(or)g(commercial)g(adv)n(an-)-152
5110 y(tage,)30 b(and)d(that)h(copies)f(bear)h(this)f(notice)h(and)g
(the)f(full)g(citation)g(on)h(the)-152 5194 y(\002rst)19
b(page.)27 b(T)-6 b(o)20 b(cop)o(y)h(otherwise,)f(to)g(republish,)g(to)
g(post)g(on)h(serv)o(ers)f(or)g(to)-152 5277 y(redistrib)o(ute)f(to)g
(lists,)e(requires)j(prior)f(speci\002c)g(permission)g(and/or)h(a)f
(fee.)-152 5360 y(SOSP-17)f(12/1999)j(Kia)o(w)o(ah)e(Island,)g(SC)-130
5441 y(c)-152 5443 y Fk(\015)p Fl(1999)h(A)m(CM)f
(1-58113-140-2/99/0012.)11 b(.)g(.)g($5.00)2040 1254
y Fm(Inc.)59 b(First)32 b(deplo)o(yed)e(in)i(1982,)h(the)e(goal)g(of)h
(GNOSIS)g(w)o(as)g(to)2040 1346 y(support)39 b(secure)h(time)g(sharing)
f(and)h(controlled)f(collaboration)2040 1437 y(among)27
b(mutually)h(adv)o(ersarial)f(users.)51 b(The)29 b(\002rst)g(GNOSIS)g
(k)o(er)n(-)2040 1528 y(nel)g(\(later)f(renamed)g(K)n(e)o(yK)n
(OS/370\))e(w)o(as)j(implemented)e(in)i(370)2040 1619
y(assembler)k(language,)i(with)e(application)f(code)h(in)g(PL/1.)65
b(This)2040 1711 y(system)20 b(ran)f(VISA)g(transaction)f(processing)h
(and)f(netw)o(orking)g(ap-)2040 1802 y(plications.)52
b(In)30 b(the)f(late)h(1980s)e(the)i(k)o(ernel)f(and)g(selected)g(com-)
2040 1893 y(ponents)f(were)i(reimplemented)d(in)i(C)i(for)e(the)g
(Motorola)f(88000)2040 1985 y(f)o(amily)e(\(K)n(e)o(yK)n(OS/88k\).)40
b(De)n(v)o(elopment)24 b(ceased)i(in)h(1991)e(when)2040
2076 y(the)16 b(compan)o(y)e(closed.)23 b(The)16 b(ER)m(OS)h(project)e
(started)h(shortly)f(there-)2040 2167 y(after)25 b(as)i(a)f(clean-room)
d(reimplementation)g(of)i(the)h(GNOSIS)g(ar)n(-)2040
2259 y(chitecture)21 b(in)h(C++,)h(and)f(has)g(since)g(made)f(minor)g
(enhancements)2040 2350 y(to)g(the)f(architecture.)j(ER)m(OS)e(for)f
(the)g(x86)f(may)h(be)g(obtained)f(from)2040 2441 y(the)h(ER)m(OS)h
(web)f(site)h([41)o(].)2040 2679 y Fo(1.2)99 b(Components)26
b(and)g(capabilities)2040 2826 y Fm(Lar)o(ge-scale)66
b(softw)o(are)h(architectures)g(are)g(e)n(v)n(olving)f(\(e.g.,)2040
2918 y(CORB)m(A\),)21 b(in)f(which)g(applications)f(can)g(be)h(vie)n
(wed)f(as)i(capability)2040 3009 y(connected)16 b(components.)21
b(This)d(suggests)f(that)h(the)f(study)g(of)g(capa-)2040
3100 y(bility)25 b(systems)g(is)g(of)g(increasing)e(importance,)h
(since)h(by)f(design,)2040 3192 y(capability)15 b(systems)g(pro)o(vide)
f(support)g(for)h(protected)f(subsystems,)2040 3283 y(non-hierarchical)
h(protection)h(domains,)h(and)g(typed)g(objects)h([26)n(].)2165
3374 y(Experience)24 b(with)i(systems)g(such)g(as)h(the)f(IBM)g(AS/400)
f([47)o(])2040 3466 y(\(a.k.a.)55 b(System)31 b(38\),)h(the)e(Plesse)o
(y)h(System)g(250)e([19)o(,)i(29)o(],)i(and)2040 3557
y(K)n(e)o(yK)n(OS)d([22)o(])h(suggests)f(that)h(reliability)f(and)h
(security)f(can)g(be)2040 3648 y(impro)o(v)o(ed)16 b(at)j(both)f
(application)f(and)h(system)h(le)n(v)o(els)f(if)h(objects)f(are)2040
3740 y(separated)j(into)g(distinct)g(protected)f(subsystems)h(to)h(pro)
o(vide)d(both)2040 3831 y(f)o(ault)26 b(isolation)g(and)g
(discretionary)e(access)j(control.)43 b(Language-)2040
3922 y(based)34 b(approaches)d(to)j(enforcing)e(protected)g(subsystems)
i(ha)n(v)o(e)2040 4014 y(pro)o(v)o(en)d(dif)n(\002cult)i(to)h
(implement)e([54)o(],)37 b(and)c(require)f(e)o(xpensi)n(v)o(e)2040
4105 y(con)m(v)o(ersion)18 b(of)j(e)o(xisting)f(applications)f(to)i
(the)g(ne)n(w)f(language.)25 b(An)2040 4196 y(OS-based)32
b(solution,)i(possibly)d(augmented)f(by)i(language)f(le)n(v)o(el)2040
4288 y(mechanisms,)19 b(is)i(therefore)e(preferable.)2165
4379 y(Ho)n(we)n(v)o(er)m(,)38 b(the)f(desirable)f(features)h(of)f
(transparent)f(persis-)2040 4470 y(tence)20 b(and)g(capability-based)e
(protection)h(are)h(widely)g(belie)n(v)o(ed)f(to)2040
4562 y(ha)n(v)o(e)g(prohibiti)n(v)o(e)f(performance.)k(This)e(belief)g
(is)g(lar)o(gely)f(justi\002ed)2040 4653 y(by)c(e)o(xperience.)22
b(The)15 b(performance)e(issues)k(of)e(the)h(i432)f(ha)n(v)o(e)g(been)
2040 4744 y(e)o(xamined)23 b(by)i(Col)o(well)h([7)o(],)g(and)e(those)h
(of)g(Mach)g(by)f(F)o(ord)h([14)n(].)2040 4836 y(While)h(the)f(IBM)h
(AS/400)f([47)n(])h(\(a.k.a.)39 b(System)26 b(38\))e(has)i(been)f(a)
2040 4927 y(lar)o(ge-scale)18 b(commercial)g(success,)i(its)g
(performance)d(depends)h(on)p 2040 5006 797 4 v 2040
5068 a Fj(\003)2107 5092 y Fx(This)13 b(research)j(w)o(as)e(supported)i
(by)e(D)m(ARP)-6 b(A)14 b(under)h(Contracts)h(#N66001-96-C-)2107
5174 y(852,)k(#MD)m(A972-95-1-0013,)j(and)e(#D)m(ABT63-95-C-0073.)32
b(Additional)23 b(sup-)2107 5256 y(port)g(w)o(as)g(pro)o(vided)i(by)e
(the)h(A)-7 b(T&T)21 b(F)o(oundation,)26 b(and)e(the)f(He)n(wlett-P)o
(ackard,)2107 5338 y(T)-5 b(andem)16 b(Computer)j(and)e(Intel)i
(Corporations.)2040 5404 y Fj(y)2107 5427 y Fx(Author)e(no)n(w)h(with)f
(the)h(IBM)f(T)-5 b(.)16 b(J.)g(W)-5 b(atson)17 b(Research)i(Center)l
(.)1878 5726 y Fm(170)p eop
%%Page: 171 2
171 1 bop -152 81 a Fm(an)16 b(augmented)d(processor)i(instruction)f
(set)i(and)g(a)g(tagged)e(memory)-152 172 y(system.)-152
410 y Fo(1.3)99 b(ER)m(OS)26 b(and)f(what)g(we)g(sho)o(w)g(in)g(this)g
(paper)-152 557 y Fm(This)33 b(paper)f(presents)g(the)h(ER)m(OS)h
(architecture,)g(and)e(describes)-152 648 y(an)g(ef)n(\002cient)f
(reduction)e(to)j(practice)f(of)g(this)h(architecture)e(for)h(a)-152
740 y(commodity)23 b(processor)h(f)o(amily:)35 b(Intel')-5
b(s)26 b(Pentium[23)m(].)41 b(W)-7 b(e)26 b(dis-)-152
831 y(cuss)19 b(the)f(impact)f(of)h(persistence)f(on)h(the)f(system')-5
b(s)19 b(design)e(in)h(both)-152 922 y(structure)j(and)f(comple)o(xity)
-5 b(.)26 b(The)21 b(ER)m(OS)h(design)e(and)h(implemen-)-152
1014 y(tation)k(applies)g(the)g(architectural)e(ideas)i(of)g(microk)o
(ernels)e(to)i(ob-)-152 1105 y(tain)17 b(performance)d(in)j(a)g(system)
g(that)g(is)g(secure,)g(capability-based,)-152 1196 y(and)j
(transparently)e(persistent.)-27 1288 y(W)-7 b(e)40 b(e)n(v)n(aluate)d
(the)i(performance)d(of)i(the)g(resulting)g(system)-152
1379 y(using)28 b(microbenchmarks.)46 b(While)29 b(the)f
(microbenchmarks)d(cur)n(-)-152 1470 y(rently)45 b(a)n(v)n(ailable)g
(for)f(ER)m(OS)i(do)f(not)g(support)f(general)g(con-)-152
1562 y(clusions)34 b(about)f(application)g(performance,)h(the)o(y)g
(suggest)f(that)-152 1653 y(ER)m(OS)23 b(will)g(achie)n(v)o(e)e
(reasonable)g(performance)e(on)j(end)g(user)g(ap-)-152
1744 y(plications.)j(The)19 b(results)h(suggest)g(that)g(capabilities)f
(are)h(a)h(reason-)-152 1836 y(able)i(substrate)g(for)f(a)h
(high-performance,)c(high-security)h(system)-152 1927
y(on)g(commodity)e(hardw)o(are.)-152 2174 y Fo(2)100
b(Capabilities)-152 2351 y Fm(A)33 b Fi(capability)e
Fm(is)j(an)e(unfor)o(geable)d(pair)j(made)g(up)g(of)g(an)g(object)-152
2443 y(identi\002er)18 b(and)g(a)h(set)h(of)e(authorized)e(operations)h
(\(an)h(interf)o(ace\))g(on)-152 2534 y(that)k(object)g([9)o(].)30
b(UNIX)22 b(\002le)h(descriptors)e([51)n(],)h(for)g(e)o(xample,)e(are)
-152 2625 y(capabilities.)-27 2717 y(In)28 b(a)g(capability)g(system,)i
(each)e(process)f(holds)h(capabilities,)-152 2808 y(and)20
b(can)g(perform)e(those)i(operations)f(authorized)f(by)i(its)h
(capabili-)-152 2899 y(ties.)26 b(Security)20 b(is)h(assured)e(by)h
(three)g(properties:)-65 3050 y(1.)37 b(capabilities)20
b(are)g(unfor)o(geable)d(and)j(tamper)f(proof,)-65 3171
y(2.)37 b(processes)23 b(are)f(able)h(to)g(obtain)f(capabilities)h
(only)f(by)g(using)35 3263 y(authorized)c(interf)o(aces,)i(and)-65
3384 y(3.)37 b(capabilities)21 b(are)h(only)f(gi)n(v)o(en)f(to)h
(processes)h(that)f(are)h(autho-)35 3475 y(rized)e(to)g(hold)g(them.)
-27 3626 y(A)h Fi(protection)f(domain)g Fm(is)i(the)f(set)g(of)g
(capabilities)f(accessible)-152 3718 y(to)e(a)h(subsystem.)24
b(An)18 b(essential)g(idea)g(of)g(capability-based)d(system)-152
3809 y(design)k(is)i(that)f(both)e(applications)h(and)g(operating)f
(system)h(should)-152 3900 y(be)e(di)n(vided)e(into)i(cleanly)f
(separated)f(components,)g(each)i(of)f(which)-152 3992
y(resides)21 b(in)f(its)h(o)n(wn)f(protection)e(domain.)-27
4083 y(Subject)31 b(to)i(constraint)e(by)g(an)h(e)o(xternal)f
(reference)f(monitor)-152 4174 y(\(Figure)22 b(1\),)g(capabilities)g
(may)f(be)i(transferred)d(from)h(one)h(protec-)-152 4266
y(tion)h(domain)f(to)h(another)e(and)i(may)f(be)h(written)g(to)g
(objects)f(in)h(the)-152 4357 y(persistent)c(store.)24
b(Access)19 b(rights,)f(in)h(addition)e(to)i(data,)f(can)g(there-)-152
4448 y(fore)30 b(be)g(sa)n(v)o(ed)g(for)f(use)i(across)f
(instantiations)g(of)g(one)f(or)h(more)-152 4540 y(programs.)-152
4777 y Fo(2.1)99 b(Implications)25 b(f)n(or)f(persistence)-152
4925 y Fm(When)16 b(persistent)f(objects)h(are)f(permitted)g(to)g
(contain)g(capabilities,)-152 5016 y(the)o(y)22 b(tak)o(e)h(on)f
(certain)g(characteristics)g(of)g(\002le)h(metadata.)31
b(In)22 b(con-)-152 5107 y(v)o(entional)h(\002le)j(systems,)g(correct)e
(stabilization)g(of)h(\002les)h(depends)-152 5199 y(on)21
b(the)f(order)g(of)g(data)h(and)f(metadata)g(writes:)27
b(data)21 b(must)g(be)f(writ-)-152 5290 y(ten)32 b(before)e(the)h
(metadata)g(that)g(references)f(it)i([18)o(].)58 b(Similarly)-5
b(,)-152 5381 y(objects)20 b(in)h(a)f(capability)g(system)g(must)g(be)g
(written)g(before)f(the)h(ca-)-152 5473 y(pabilities)k(that)f
(reference)f(those)i(objects.)34 b(Unlik)o(e)23 b(a)h(\002le)g(system,)
2040 81 y(ho)n(we)n(v)o(er)m(,)j(the)g(update)f(dependenc)o(y)e(graph)i
(in)i(a)g(capability)e(sys-)2040 172 y(tem)20 b(is)i(unconstrained)17
b(\(and)i(potentially)g(circular\).)2165 263 y(Plausible)i(mechanisms)g
(to)h(ensure)f(a)i(consistent)e(system)h(im-)2040 355
y(age)e(in)g(the)g(store)g(include)f(application-managed)c
(transactions)k(or)2040 446 y(some)29 b(form)g(of)g(periodic)f
(consistent)h(snapshot)g(of)g(the)g(machine)2040 537
y(state.)i(F)o(or)22 b(reasons)f(of)h(simplicity)g(and)f(correctness,)g
(ER)m(OS)i(uses)2040 629 y(a)17 b(periodic)f(checkpoint)f(similar)i(to)
g(the)g(K)n(e)o(yK)n(OS)f(mechanism)g(de-)2040 720 y(scribed)k(by)f
(Landau)g([28)o(].)2040 958 y Fo(2.2)99 b(Design)25 b(challenges)2040
1105 y Fm(There)16 b(are)g(\002)n(v)o(e)g(k)o(e)o(y)g(challenges)g(in)g
(architecting)f(a)i(capability)f(sys-)2040 1196 y(tem.)2165
1288 y Fn(F)l(ir)o(st)p Fm(,)62 b(transferring)50 b(control)i(across)h
(protection)e(domain)2040 1379 y(boundaries)33 b(is)j(e)o(xpensi)n(v)o
(e)d(unless)i(great)f(care)h(is)h(tak)o(en)e(in)h(im-)2040
1470 y(plementing)28 b(protected)g(control)g(transfers.)52
b(By)30 b(def)o(ault,)h(no)e(ac-)2040 1562 y(cess)k(should)f(be)g
(shared)g(across)g(such)g(a)h(boundary)-5 b(.)58 b(In)32
b(a)h(con-)2040 1653 y(v)o(entional)24 b(architecture,)h(this)h
(requires)f(that)g(the)h(preceding)d(con-)2040 1744 y(te)o(xt)i(\(the)f
(TLB)h(and)f(cache)h(contents\))e(be)i(made)f(unreachable)f(by)2040
1836 y(means)f(of)h(hardw)o(are)e(tagging,)h(cache)g(\003ush,)h(or)f
(other)g(hardw)o(are-)2040 1927 y(enforced)g(means)h(of)g(isolation.)35
b(Strate)o(gies)24 b(for)f(performing)d(ef)n(\002-)2040
2018 y(cient)26 b(conte)o(xt)f(switch)i(ha)n(v)o(e)f(been)f(de)n(v)o
(eloped)f([30)o(,)i(32)o(],)i(and)e(we)2040 2110 y(ha)n(v)o(e)17
b(applied)f(these)h(ideas)g(for)g(protection)e(domain)h(crossings)h
(and)2040 2201 y(presented)i(the)h(results)h(in)f([44)o(].)2165
2292 y Fn(Second,)h Fm(we)h(w)o(ould)g(lik)o(e)h(a)f(uniform)f
(protection)f(mechanism)2040 2384 y(for)26 b Fn(all)g
Fm(system)g(resources.)42 b(Choosing)25 b(primiti)n(v)o(e)g(protected)g
(ob-)2040 2475 y(jects)j(and)e(access)h(rights)g(that)f(reduce)g
(directly)g(to)h(the)g(hardw)o(are)2040 2566 y(with)c(minimal)e(o)o(v)o
(erhead)f(is)j(critical.)31 b(If)22 b(too)g(lar)o(ge)g(a)g(unit)g(of)g
(pro-)2040 2658 y(tection)28 b(\(e.g.,)i(memory)d(re)o(gions\))g(is)i
(selected,)i(as)e(in)g(Mach)f([1)o(],)2040 2749 y(softw)o(are)e(is)h
(required)d(to)i(translate)g(this)h(abstraction)e(into)h(some-)2040
2840 y(thing)g(that)h(the)f(hardw)o(are)f(can)i(implement.)43
b(If)26 b(too)g(small)h(a)g(unit)2040 2932 y(of)f(protection)f(\(e.g.)
43 b(w)o(ords\))26 b(is)h(used,)h(the)e(hardw)o(are)f(protection)2040
3023 y(mechanisms)c(cannot)g(be)h(used)g(directly)f(and)g(protection)f
(must)i(be)2040 3114 y(realized)e(by)f(softw)o(are)h(emulation.)2165
3206 y Fn(Thir)m(d)p Fm(,)i(a)g(collection)f(of)h(system)g(services)g
(must)g(be)g(identi\002ed)2040 3297 y(that)32 b(compose)f(these)h
(primiti)n(v)o(e)f(objects)h(into)f(higher)g(le)n(v)o(el)h(ab-)2040
3388 y(stractions)20 b(ef)n(\002ciently)f(and)h(securely)-5
b(.)2165 3479 y Fn(F)c(ourth,)26 b Fm(the)g(system)g(must)g(ensure)f
(that)h(a)g(correct)f(initial)h(ar)n(-)2040 3571 y(rangement)k(of)i
(entities)h(and)f(access)h(relationships)e(is)i(achie)n(v)o(ed)2040
3662 y(when)25 b(the)h(system)g(starts)g(up.)41 b(In)25
b(particular)m(,)g(the)h(correctness)e(of)2040 3753 y(this)32
b(arrangement)d(must)i(be)g(maintained)f(at)h(the)g(stable)h(storage)
2040 3845 y(boundary)-5 b(.)63 b(Man)o(y)33 b(capability)g(systems)h
(use)h(con)m(v)o(entional)c(\002le)2040 3936 y(systems)c(protected)e
(by)h(access)i(control)d(lists.)45 b(In)27 b(doing)e(so)i(the)o(y)2040
4027 y(gi)n(v)o(e)19 b(up)h(the)g(security)g(adv)n(antages)f(of)h
(capabilities.)2165 4119 y Fn(F)l(inally)p Fm(,)c(capability)g(systems)
h(ha)n(v)o(e)f(dif)n(\002culty)f(with)i(traceabil-)2040
4210 y(ity)25 b(and)f(selecti)n(v)o(e)g(re)n(v)n(ocation:)32
b(determining)23 b(who)h(has)h(what)f(ac-)2040 4301 y(cess)c(and)f
(remo)o(ving)e(a)j(particular)e(user')-5 b(s)19 b(access)h(to)g(an)f
(object.)24 b(T)-7 b(o)2040 4393 y(solv)o(e)32 b(this)g(problem,)h
(hybrid)d(designs)h(using)g(both)g(capabilities)2040
4484 y(and)23 b(access)g(control)f(lists)j(ha)n(v)o(e)d(been)g
(proposed)f(in)j([4)o(])f(and)g([25)n(].)2040 4575 y(In)29
b(a)h(pure)f(capability)g(system)h(lik)o(e)f(ER)m(OS,)h(this)g(issue)h
(must)e(be)2040 4667 y(addressed)19 b(by)h(the)g(reference)f(monitor)-5
b(.)2040 4904 y Fo(2.3)99 b(Mandatory)26 b(access)f(contr)n(ols)2040
5052 y Fm(ER)m(OS)h(pro)o(vides)e(a)i(primiti)n(v)o(e)e(mechanism)g
(for)h(re)n(v)n(oking)f(access)2040 5143 y(to)c(objects.)25
b(Both)20 b(objects)g(and)g(their)g(capabilities)f(ha)n(v)o(e)h(a)g(v)o
(ersion)2040 5234 y(number)-5 b(.)25 b(If)20 b(the)g(v)o(ersion)g
(numbers)f(do)h(not)g(match,)g(the)g(capability)2040
5326 y(is)25 b(in)m(v)n(alid)d(and)h(con)m(v)o(e)o(ys)e(no)i(authority)
-5 b(.)33 b(Mandatory)21 b(access)j(con-)2040 5417 y(trol)18
b(\(MA)m(C\))f(policies)g(require)g(a)h(\002ner)f(mechanism:)23
b(one)17 b(that)g(pro-)1878 5726 y(171)p eop
%%Page: 172 3
172 2 bop -152 81 a Fm(vides)16 b(selecti)n(v)o(e)g(re)n(v)n(ocation)f
(and)g(access)i(traceability)-5 b(.)22 b(The)16 b(ER)m(OS)-152
172 y(constructor)e(\(Section)h(5.3\))g(enforces)g(a)h(discretionary)e
(polic)o(y)h([46)n(])-152 263 y(similar)27 b(to)f(Lampson')-5
b(s)25 b(con\002nement)f(polic)o(y)h([27)o(].)42 b(This)27
b(polic)o(y)-152 355 y(allo)n(ws)22 b(secure)f(reference)f(monitors)h
(to)g(be)h(b)n(uilt)g(at)g(user)f(le)n(v)o(el,)h(as)-152
446 y(has)f(been)e(done)g(in)i(K)n(e)o(ySafe)e([38)o(].)-80
555 y
 14603550 4933632 0 0 14603550 4933632 startTexFig
 -80 555 a
%%BeginDocument: compartments.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: compartments.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:23 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 222 75
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-3.0 78.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /endash 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Roman /Times-Roman-iso isovec ReEncode
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 2287 m -1000 -1000 l 4742 -1000 l 4742 2287 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Ellipse
n 787 337 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 787 487 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 937 412 54 54 0 360 DrawEllipse gs col0 s gr

% Polyline
 [60] 0 sd
n 780 225 m 675 225 675 495 105 arcto 4 {pop} repeat
  675 600 945 600 105 arcto 4 {pop} repeat
  1050 600 1050 330 105 arcto 4 {pop} repeat
  1050 225 780 225 105 arcto 4 {pop} repeat
 cp gs col0 s gr  [] 0 sd
% Ellipse
n 1912 562 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 2137 262 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 1987 262 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 2362 487 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 2212 487 54 54 0 360 DrawEllipse gs col0 s gr

% Polyline
 [60] 0 sd
n 1980 150 m 1875 150 1875 270 105 arcto 4 {pop} repeat
  1875 375 2145 375 105 arcto 4 {pop} repeat
  2250 375 2250 255 105 arcto 4 {pop} repeat
  2250 150 1980 150 105 arcto 4 {pop} repeat
 cp gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 2205 375 m 2100 375 2100 495 105 arcto 4 {pop} repeat
  2100 600 2370 600 105 arcto 4 {pop} repeat
  2475 600 2475 480 105 arcto 4 {pop} repeat
  2475 375 2205 375 105 arcto 4 {pop} repeat
 cp gs col0 s gr  [] 0 sd
% Polyline
n 1800 75 m 2550 75 l 2550 675 l 1800 675 l cp gs col0 s gr 
% Polyline
n 75 750 m 2550 750 l 2550 975 l 75 975 l cp gs col0 s gr 
/Times-Roman-iso ff 150.00 scf sf
375 900 m
gs 1 -1 sc (User-level Reference Monitor) col0 sh gr
% Polyline
n 2625 75 m 2775 75 l 2775 225 l 2625 225 l cp gs col0 s gr 
/Times-Roman-iso ff 150.00 scf sf
2850 225 m
gs 1 -1 sc (Compartment) col0 sh gr
% Polyline
 [60] 0 sd
n 2700 375 m 2625 375 2625 450 75 arcto 4 {pop} repeat
  2625 525 2775 525 75 arcto 4 {pop} repeat
  2850 525 2850 450 75 arcto 4 {pop} repeat
  2850 375 2700 375 75 arcto 4 {pop} repeat
 cp gs col0 s gr  [] 0 sd
/Times-Roman-iso ff 150.00 scf sf
2925 525 m
gs 1 -1 sc (Sandbox) col0 sh gr
% Ellipse
n 2737 750 84 84 0 360 DrawEllipse gs col0 s gr

/Times-Roman-iso ff 150.00 scf sf
2850 825 m
gs 1 -1 sc (Process) col0 sh gr
% Polyline
n 75 1050 m 2550 1050 l 2550 1275 l 75 1275 l cp gs col0 s gr 
/Times-Roman-iso ff 150.00 scf sf
1050 1200 m
gs 1 -1 sc (Kernel) col0 sh gr
% Ellipse
n 412 487 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 262 337 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 562 187 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 1312 562 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 1537 262 54 54 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 1537 487 54 54 0 360 DrawEllipse gs col0 s gr

% Polyline
 [60] 0 sd
n 255 225 m 150 225 150 495 105 arcto 4 {pop} repeat
  150 600 420 600 105 arcto 4 {pop} repeat
  525 600 525 330 105 arcto 4 {pop} repeat
  525 225 255 225 105 arcto 4 {pop} repeat
 cp gs col0 s gr  [] 0 sd
% Polyline
n 75 75 m 1125 75 l 1125 675 l 75 675 l cp gs col0 s gr 
% Polyline
 [60] 0 sd
n 1530 150 m 1425 150 1425 495 105 arcto 4 {pop} repeat
  1425 600 1545 600 105 arcto 4 {pop} repeat
  1650 600 1650 255 105 arcto 4 {pop} repeat
  1650 150 1530 150 105 arcto 4 {pop} repeat
 cp gs col0 s gr  [] 0 sd
% Polyline
n 1200 75 m 1725 75 l 1725 675 l 1200 675 l cp gs col0 s gr 
$F2psEnd
rs

%%EndDocument

 endTexFig
 -152 1355 a Fh(Figure)k(1)p Fq(.)29 b(Components)24
b(within)g(compar)s(tments)-27 1614 y Fm(The)31 b(K)n(e)o(ySafe)f
(design)h(di)n(vides)f(a)i(secure)f(system)h(into)f(pro-)-152
1705 y(tected)f(compartments)e(\(Figure)h(1\).)55 b(Communication)27
b(between)-152 1796 y(these)40 b(compartments)e(is)j(mediated)e(by)g(a)
h(reference)e(monitor)m(,)-152 1888 y(which)27 b(inserts)h(transparent)
d(forw)o(arding)g(objects)i(in)h(front)e(of)h(all)-152
1979 y(capabilities)e(that)h(cross)f(compartment)e(boundaries.)39
b(T)-7 b(o)25 b(rescind)-152 2070 y(the)31 b(access)g(rights)f(of)h(a)g
(compartment,)f(the)h(reference)e(monitor)-152 2162 y(rescinds)20
b(the)g(forw)o(arding)e(object.)-27 2253 y(A)23 b(particularly)e
(attracti)n(v)o(e)h(aspect)h(of)g(the)f(K)n(e)o(ySafe)g(design)g(is)
-152 2344 y(that)28 b(it)g(allo)n(ws)f(straightforw)o(ard)e(re)n
(vision)h(of)h(mandatory)e(access)-152 2436 y(policies.)31
b(Appropriate)20 b(mandatory)g(access)j(control)e(policies)h(de-)-152
2527 y(pend)d(on)h(the)g(objects)f(controlled,)f(and)i(are)g(therefore)
e(application)-152 2618 y(dependent.)46 b(The)28 b(K)n(e)o(ySafe)f
(design)g(f)o(acilitates)h(modi\002cation)f(of)-152 2710
y(the)21 b(mandatory)c(access)k(controls)e(as)i(the)g(system)f(e)n(v)n
(olv)o(es.)-27 2801 y(Ev)n(aluators)45 b(spent)i(se)n(v)o(eral)f
(months)f(in)i(1986)f(e)o(xamining)-152 2892 y(K)n(e)o(yK)n(OS/K)n(e)o
(ySAFE,)25 b(and)h(encouraged)e(its)k(submission)e(for)g(B2)-152
2984 y(e)n(v)n(aluation)h([53)n(].)48 b(The)28 b(B2)g(security)g
(requirements)e(speci\002cally)-152 3075 y(co)o(v)o(er)d(both)h
(traceability)g(and)g(re)n(v)n(ocation,)g(and)g(the)g(NCSC)i(team)-152
3166 y(felt)21 b(that)f(the)g(K)n(e)o(ySafe)g(design)f(w)o(as)i(sound.)
-152 3413 y Fo(3)100 b(The)26 b(ER)m(OS)f(k)o(er)o(nel)-152
3591 y Fm(The)i(ER)m(OS)g(architecture)e(is)j(di)n(vided)d(into)i(a)g
(k)o(ernel)f(that)h(imple-)-152 3682 y(ments)i(a)h(small)g(number)d(of)
i(primiti)n(v)o(e)f(capability)g(types:)44 b(num-)-152
3773 y(bers,)32 b(nodes,)f(data)f(pages,)h(capability)e(pages,)j
(processes,)f(entry)-152 3865 y(and)19 b(resume)f(capabilities,)g(and)g
(a)i(fe)n(w)e(miscellaneous)g(k)o(ernel)g(ser)n(-)-152
3956 y(vices.)37 b(These)24 b(are)g(described)e(in)j(this)f(section.)36
b(The)24 b(architecture)-152 4047 y(also)f(includes)f(a)h(collection)e
(of)i(system)f(services)h(that)g(are)f(imple-)-152 4138
y(mented)h(by)f(non-pri)n(vile)o(ged)e(applications.)32
b(These)23 b(services)h(pro-)-152 4230 y(vide)h(higher)n(-le)n(v)o(el)f
(abstractions)g(such)i(as)g(\002les,)h(directories,)f(and)-152
4321 y(memory)19 b(objects.)-27 4412 y(The)29 b(k)o(ernel)g(presents)g
(a)h(f)o(airly)g(direct)f(virtualization)f(of)h(the)-152
4504 y(underlying)k(hardw)o(are)g(via)i(capability-protected)d
(abstractions.)-152 4595 y(Both)21 b(data)g(and)f(capabilities)h(are)g
(stored)f(in)h Fi(pages)p Fm(,)f(whose)h(size)g(is)-152
4686 y(dictated)28 b(by)g(the)h(underlying)d(hardw)o(are.)48
b(Capabilities)29 b(are)f(also)-152 4778 y(stored)33
b(in)g Fi(nodes)p Fm(.)62 b(Nodes)33 b(hold)f(32)g(capabilities,)j(and)
e(serv)o(e)f(a)-152 4869 y(function)16 b(equi)n(v)n(alent)f(to)j
(metadata)e(in)h(con)m(v)o(entional)d(systems.)25 b(All)-152
4960 y(state)c(visible)f(to)h(applications)e(is)i(stored)f(in)g(pages)g
(and)f(nodes.)-27 5052 y(The)26 b(k)o(ernel)g(enforces)g(a)h(partition)
e(between)h(data)h(and)f(capa-)-152 5143 y(bilities)32
b(by)f(tagging.)56 b(Data)31 b(can)g(be)g(read/written)f(only)g(to)i
(data)-152 5234 y(pages)19 b(and)f(capabilities)g(to)h(capability)e
(pages.)24 b(A)19 b(capability)f(page)-152 5326 y(is)k(ne)n(v)o(er)d
(mapped)f(in)j(such)f(a)h(w)o(ay)f(that)h(access)g(is)g(permitted)e
(from)-152 5417 y(user)k(mode)g(programs.)32 b(Capability)23
b(load)f(and)h(store)g(instructions)2040 81 y(are)d(emulated)g(in)g
(supervisor)f(softw)o(are,)g(and)h(check)g(the)g(per)n(-page)2040
172 y(type)g(tag.)2165 263 y(The)33 b(k)o(ernel)g(also)i(implements)e
(LR)m(U)h(paging)f(and)g(the)h(dis-)2040 355 y(patch)18
b(portion)f(of)h(a)g(scheduler)f(based)h(on)g(capacity)g(reserv)o(es)g
([35)n(].)2040 446 y(As)k(these)g(ideas)f(are)h(not)f(ne)n(w)-5
b(,)21 b(the)o(y)g(are)g(not)g(discussed)g(further)f(in)2040
537 y(this)h(paper)-5 b(.)2040 775 y Fo(3.1)99 b(Addr)n(ess)26
b(translation)2040 922 y Fm(Lik)o(e)40 b(other)f(recent)g(microk)o
(ernels,)j(ER)m(OS)e(vie)n(ws)g(an)g(address)2040 1014
y(space)20 b(as)h(a)g(set)g(of)f(mappings)e(of)i(the)g(form:)2382
1188 y Fg(v)s(pag)s(e)j Ff(\000)-15 b(!)23 b Fg(ppag)s(e)18
b Ff(\002)g(f)p Fg(r)n(;)c(w)r Ff(g)k(\002)g Fg(handl)r(er)2040
1362 y Fm(where)36 b Fg(handl)r(er)j Fm(is)e(an)f Fi(entry)i
(capability)d Fm(to)i(a)f(process)g(\(Sec-)2040 1454
y(tion)29 b(3.2\).)53 b(When)29 b(an)h(addressing)e(e)o(xception)g
(occurs,)j(the)e(f)o(ault)2040 1545 y(handler)f(may)h(either)f(alter)i
(the)f(structure)f(of)h(the)g(address)g(space)2040 1636
y(and)c(restart)g(the)g(process)g(or)g(pass)h(the)f(f)o(ault)g(to)g
(the)h(process)e(f)o(ault)2040 1728 y(handler)19 b(for)g(further)g
(handling.)2165 1819 y(The)31 b(ER)m(OS)h(k)o(ernel)f(captures)g
(address)g(space)h(mappings)e(in)2040 1910 y(machine-independent)17
b(f)o(ashion)k(using)g(nodes.)3461 1880 y Fe(1)3522 1910
y Fm(Address)g(spaces)2040 2002 y(are)35 b(formed)d(by)j(b)n(uilding)e
(a)i(tree)f(of)h(nodes)e(whose)i(lea)n(v)o(es)f(are)2040
2093 y(data)19 b(or)g(capability)f(pages.)24 b(Each)18
b(node)g(contains)g(32)h(capabilities,)2040 2184 y(which)d(may)f(point)
h(to)g(either)g(nodes)f(or)h(to)h(pages)e(\(Figure)g(2\).)24
b(Node)2040 2276 y(capabilities)19 b(encode)g(the)g(height)g(of)h(the)f
(tree)h(that)g(the)o(y)f(name,)g(en-)2040 2367 y(abling)h
(short-circuit)f(tra)n(v)o(ersal)h(similar)h(to)f(that)h(of)f(the)h
(MC68851)2040 2458 y([36)o(],)f(and)g(a)n(v)n(oiding)f(the)h(need)f
(for)h(tall)h(translation)e(trees.)2111 2568 y
 14603550 12169625 0 0 14603550 12169625 startTexFig
 2111 2568
a
%%BeginDocument: keptseg.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: keptseg.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:23 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 222 185
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/MyAppDict 100 dict dup begin def
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def
/col32 {0.894 0.635 0.000 srgb} bind def

end
save
-6.0 188.0 translate
1 -1 scale
.9 .9 scale % to make patterns same scale as in xfig

% This junk string is used by the show operators
/PATsstr 1 string def
/PATawidthshow { 	% cx cy cchar rx ry string
  % Loop over each character in the string
  {  % cx cy cchar rx ry char
    % Show the character
    dup				% cx cy cchar rx ry char char
    PATsstr dup 0 4 -1 roll put	% cx cy cchar rx ry char (char)
    false charpath		% cx cy cchar rx ry char
    /clip load PATdraw
    % Move past the character (charpath modified the
    % current point)
    currentpoint			% cx cy cchar rx ry char x y
    newpath
    moveto			% cx cy cchar rx ry char
    % Reposition by cx,cy if the character in the string is cchar
    3 index eq {			% cx cy cchar rx ry
      4 index 4 index rmoveto
    } if
    % Reposition all characters by rx ry
    2 copy rmoveto		% cx cy cchar rx ry
  } forall
  pop pop pop pop pop		% -
  currentpoint
  newpath
  moveto
} bind def
/PATcg {
  7 dict dup begin
    /lw currentlinewidth def
    /lc currentlinecap def
    /lj currentlinejoin def
    /ml currentmiterlimit def
    /ds [ currentdash ] def
    /cc [ currentrgbcolor ] def
    /cm matrix currentmatrix def
  end
} bind def
% PATdraw - calculates the boundaries of the object and
% fills it with the current pattern
/PATdraw {			% proc
  save exch
    PATpcalc			% proc nw nh px py
    5 -1 roll exec		% nw nh px py
    newpath
    PATfill			% -
  restore
} bind def
% PATfill - performs the tiling for the shape
/PATfill { % nw nh px py PATfill -
  PATDict /CurrentPattern get dup begin
    setfont
    % Set the coordinate system to Pattern Space
    PatternGState PATsg
    % Set the color for uncolored pattezns
    PaintType 2 eq { PATDict /PColor get PATsc } if
    % Create the string for showing
    3 index string		% nw nh px py str
    % Loop for each of the pattern sources
    0 1 Multi 1 sub {		% nw nh px py str source
	% Move to the starting location
	3 index 3 index		% nw nh px py str source px py
	moveto			% nw nh px py str source
	% For multiple sources, set the appropriate color
	Multi 1 ne { dup PC exch get PATsc } if
	% Set the appropriate string for the source
	0 1 7 index 1 sub { 2 index exch 2 index put } for pop
	% Loop over the number of vertical cells
	3 index 		% nw nh px py str nh
	{			% nw nh px py str
	  currentpoint		% nw nh px py str cx cy
	  2 index show		% nw nh px py str cx cy
	  YStep add moveto	% nw nh px py str
	} repeat		% nw nh px py str
    } for
    5 { pop } repeat
  end
} bind def

% PATkshow - kshow with the current pattezn
/PATkshow {			% proc string
  exch bind			% string proc
  1 index 0 get			% string proc char
  % Loop over all but the last character in the string
  0 1 4 index length 2 sub {
				% string proc char idx
    % Find the n+1th character in the string
    3 index exch 1 add get	% string proe char char+1
    exch 2 copy			% strinq proc char+1 char char+1 char
    % Now show the nth character
    PATsstr dup 0 4 -1 roll put	% string proc chr+1 chr chr+1 (chr)
    false charpath		% string proc char+1 char char+1
    /clip load PATdraw
    % Move past the character (charpath modified the current point)
    currentpoint newpath moveto
    % Execute the user proc (should consume char and char+1)
    mark 3 1 roll		% string proc char+1 mark char char+1
    4 index exec		% string proc char+1 mark...
    cleartomark			% string proc char+1
  } for
  % Now display the last character
  PATsstr dup 0 4 -1 roll put	% string proc (char+1)
  false charpath		% string proc
  /clip load PATdraw
  neewath
  pop pop			% -
} bind def
% PATmp - the makepattern equivalent
/PATmp {			% patdict patmtx PATmp patinstance
  exch dup length 7 add		% We will add 6 new entries plus 1 FID
  dict copy			% Create a new dictionary
  begin
    % Matrix to install when painting the pattern
    TilingType PATtcalc
    /PatternGState PATcg def
    PatternGState /cm 3 -1 roll put
    % Check for multi pattern sources (Level 1 fast color patterns)
    currentdict /Multi known not { /Multi 1 def } if
    % Font dictionary definitions
    /FontType 3 def
    % Create a dummy encoding vector
    /Encoding 256 array def
    3 string 0 1 255 {
      Encoding exch dup 3 index cvs cvn put } for pop
    /FontMatrix matrix def
    /FontBBox BBox def
    /BuildChar {
	mark 3 1 roll		% mark dict char
	exch begin
	Multi 1 ne {PaintData exch get}{pop} ifelse  % mark [paintdata]
	  PaintType 2 eq Multi 1 ne or
	  { XStep 0 FontBBox aload pop setcachedevice }
	  { XStep 0 setcharwidth } ifelse
	  currentdict		% mark [paintdata] dict
	  /PaintProc load	% mark [paintdata] dict paintproc
	end
	gsave
	  false PATredef exec true PATredef
	grestore
	cleartomark		% -
    } bind def
    currentdict
  end				% newdict
  /foo exch			% /foo newlict
  definefont			% newfont
} bind def
% PATpcalc - calculates the starting point and width/height
% of the tile fill for the shape
/PATpcalc {	% - PATpcalc nw nh px py
  PATDict /CurrentPattern get begin
    gsave
	% Set up the coordinate system to Pattern Space
	% and lock down pattern
	PatternGState /cm get setmatrix
	BBox aload pop pop pop translate
	% Determine the bounding box of the shape
	pathbbox			% llx lly urx ury
    grestore
    % Determine (nw, nh) the # of cells to paint width and height
    PatHeight div ceiling		% llx lly urx qh
    4 1 roll				% qh llx lly urx
    PatWidth div ceiling		% qh llx lly qw
    4 1 roll				% qw qh llx lly
    PatHeight div floor			% qw qh llx ph
    4 1 roll				% ph qw qh llx
    PatWidth div floor			% ph qw qh pw
    4 1 roll				% pw ph qw qh
    2 index sub cvi abs			% pw ph qs qh-ph
    exch 3 index sub cvi abs exch	% pw ph nw=qw-pw nh=qh-ph
    % Determine the starting point of the pattern fill
    %(px, py)
    4 2 roll				% nw nh pw ph
    PatHeight mul			% nw nh pw py
    exch				% nw nh py pw
    PatWidth mul exch			% nw nh px py
  end
} bind def

% Save the original routines so that we can use them later on
/oldfill	/fill load def
/oldeofill	/eofill load def
/oldstroke	/stroke load def
/oldshow	/show load def
/oldashow	/ashow load def
/oldwidthshow	/widthshow load def
/oldawidthshow	/awidthshow load def
/oldkshow	/kshow load def

% These defs are necessary so that subsequent procs don't bind in
% the originals
/fill	   { oldfill } bind def
/eofill	   { oldeofill } bind def
/stroke	   { oldstroke } bind def
/show	   { oldshow } bind def
/ashow	   { oldashow } bind def
/widthshow { oldwidthshow } bind def
/awidthshow { oldawidthshow } bind def
/kshow 	   { oldkshow } bind def
/PATredef {
  MyAppDict begin
    {
    /fill { /clip load PATdraw newpath } bind def
    /eofill { /eoclip load PATdraw newpath } bind def
    /stroke { PATstroke } bind def
    /show { 0 0 null 0 0 6 -1 roll PATawidthshow } bind def
    /ashow { 0 0 null 6 3 roll PATawidthshow }
    bind def
    /widthshow { 0 0 3 -1 roll PATawidthshow }
    bind def
    /awidthshow { PATawidthshow } bind def
    /kshow { PATkshow } bind def
  } {
    /fill   { oldfill } bind def
    /eofill { oldeofill } bind def
    /stroke { oldstroke } bind def
    /show   { oldshow } bind def
    /ashow  { oldashow } bind def
    /widthshow { oldwidthshow } bind def
    /awidthshow { oldawidthshow } bind def
    /kshow  { oldkshow } bind def
    } ifelse
  end
} bind def
false PATredef
% Conditionally define setcmykcolor if not available
/setcmykcolor where { pop } {
  /setcmykcolor {
    1 sub 4 1 roll
    3 {
	3 index add neg dup 0 lt { pop 0 } if 3 1 roll
    } repeat
    setrgbcolor - pop
  } bind def
} ifelse
/PATsc {		% colorarray
  aload length		% c1 ... cn length
    dup 1 eq { pop setgray } { 3 eq { setrgbcolor } { setcmykcolor
  } ifelse } ifelse
} bind def
/PATsg {		% dict
  begin
    lw setlinewidth
    lc setlinecap
    lj setlinejoin
    ml setmiterlimit
    ds aload pop setdash
    cc aload pop setrgbcolor
    cm setmatrix
  end
} bind def

/PATDict 3 dict def
/PATsp {
  true PATredef
  PATDict begin
    /CurrentPattern exch def
    % If it's an uncolored pattern, save the color
    CurrentPattern /PaintType get 2 eq {
      /PColor exch def
    } if
    /CColor [ currentrgbcolor ] def
  end
} bind def
% PATstroke - stroke with the current pattern
/PATstroke {
  countdictstack
  save
  mark
  {
    currentpoint strokepath moveto
    PATpcalc				% proc nw nh px py
    clip newpath PATfill
    } stopped {
	(*** PATstroke Warning: Path is too complex, stroking
	  with gray) =
    cleartomark
    restore
    countdictstack exch sub dup 0 gt
	{ { end } repeat } { pop } ifelse
    gsave 0.5 setgray oldstroke grestore
  } { pop restore pop } ifelse
  newpath
} bind def
/PATtcalc {		% modmtx tilingtype PATtcalc tilematrix
  % Note: tiling types 2 and 3 are not supported
  gsave
    exch concat					% tilingtype
    matrix currentmatrix exch			% cmtx tilingtype
    % Tiling type 1 and 3: constant spacing
    2 ne {
	% Distort the pattern so that it occupies
	% an integral number of device pixels
	dup 4 get exch dup 5 get exch		% tx ty cmtx
	XStep 0 dtransform
	round exch round exch			% tx ty cmtx dx.x dx.y
	XStep div exch XStep div exch		% tx ty cmtx a b
	0 YStep dtransform
	round exch round exch			% tx ty cmtx a b dy.x dy.y
	YStep div exch YStep div exch		% tx ty cmtx a b c d
	7 -3 roll astore			% { a b c d tx ty }
    } if
  grestore
} bind def
/PATusp {
  false PATredef
  PATDict begin
    CColor PATsc
  end
} bind def

% horizontal lines
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 16 8 true [ 16 0 0 -8 0 8 ]
	{< ffff000000000000ffff000000000000>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P9 exch def

% vertical lines
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 8 16 true [ 8 0 0 -16 0 16 ]
	{<11111111111111111111111111111111>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P10 exch def
1.1111 1.1111 scale %restore scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 4120 m -1000 -1000 l 4799 -1000 l 4799 4120 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 1728 978 m 1803 978 l 1803 1378 l 1728 1378 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P9 [16 0 0 -8 115.20 65.20] PATmp PATsp ef gr PATusp gs col0 s gr 
% Polyline
n 2040 1679 m 2040 1559 l 2549 1559 l 2549 1679 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P10 [8 0 0 -16 136.00 103.93] PATmp PATsp ef gr PATusp gs col0 s gr 
% Ellipse
n 2250 412 346 346 0 360 DrawEllipse gs col0 s gr

/Times-Bold ff 150.00 scf sf
2025 375 m
gs 1 -1 sc (Fault) col0 sh gr
/Times-Bold ff 150.00 scf sf
1950 525 m
gs 1 -1 sc (Handler) col0 sh gr
% Polyline
gs  clippath
1834 690 m 1950 600 l 1879 729 l 1983 608 l 1937 569 l cp
clip
n 1770 1290 m 1770 810 l 1950 600 l gs col0 s gr gr

% arrowhead
n 1834 690 m 1950 600 l 1879 729 l 1872 691 l 1834 690 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 752 978 m 827 978 l 827 1378 l 752 1378 l cp gs col-1 s gr 
% Polyline
n 827 978 m 902 978 l 902 1378 l 827 1378 l cp gs col-1 s gr 
% Polyline
n 902 978 m 977 978 l 977 1378 l 902 1378 l cp gs col-1 s gr 
% Polyline
n 977 978 m 1053 978 l 1053 1378 l 977 1378 l cp gs col-1 s gr 
% Polyline
n 1053 978 m 1128 978 l 1128 1378 l 1053 1378 l cp gs col-1 s gr 
% Polyline
n 1128 978 m 1203 978 l 1203 1378 l 1128 1378 l cp gs col-1 s gr 
% Polyline
n 1203 978 m 1277 978 l 1277 1378 l 1203 1378 l cp gs col-1 s gr 
% Polyline
n 1277 978 m 1352 978 l 1352 1378 l 1277 1378 l cp gs col-1 s gr 
% Polyline
n 1352 978 m 1428 978 l 1428 1378 l 1352 1378 l cp gs col-1 s gr 
% Polyline
n 1428 978 m 1502 978 l 1502 1378 l 1428 1378 l cp gs col-1 s gr 
% Polyline
n 1502 978 m 1577 978 l 1577 1378 l 1502 1378 l cp gs col-1 s gr 
% Polyline
n 1577 978 m 1652 978 l 1652 1378 l 1577 1378 l cp gs col-1 s gr 
% Polyline
n 1652 978 m 1728 978 l 1728 1378 l 1652 1378 l cp gs col-1 s gr 
% Polyline
n 228 1804 m 303 1804 l 303 2204 l 228 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 303 1804 m 378 1804 l 378 2204 l 303 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 378 1804 m 453 1804 l 453 2204 l 378 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 453 1804 m 528 1804 l 528 2204 l 453 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 528 1804 m 603 1804 l 603 2204 l 528 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 603 1804 m 678 1804 l 678 2204 l 603 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 678 1804 m 753 1804 l 753 2204 l 678 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 753 1804 m 828 1804 l 828 2204 l 753 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 828 1804 m 903 1804 l 903 2204 l 828 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 903 1804 m 978 1804 l 978 2204 l 903 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 978 1804 m 1053 1804 l 1053 2204 l 978 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1053 1804 m 1128 1804 l 1128 2204 l 1053 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1128 1804 m 1203 1804 l 1203 2204 l 1128 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1203 1804 m 1278 1804 l 1278 2204 l 1203 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1278 1804 m 1353 1804 l 1353 2204 l 1278 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1353 1804 m 1428 1804 l 1428 2204 l 1353 2204 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
/Times-Roman ff 90.00 scf sf
153 1905 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
1466 1905 m
gs 1 -1 sc (31) col-1 sh gr
% Polyline
n 2402 2028 m 2477 2028 l 2477 2429 l 2402 2429 l cp gs col-1 s gr 
% Polyline
n 2477 2028 m 2552 2028 l 2552 2429 l 2477 2429 l cp gs col-1 s gr 
% Polyline
n 2552 2028 m 2627 2028 l 2627 2429 l 2552 2429 l cp gs col-1 s gr 
% Polyline
n 2627 2028 m 2702 2028 l 2702 2429 l 2627 2429 l cp gs col-1 s gr 
% Polyline
n 2702 2028 m 2777 2028 l 2777 2429 l 2702 2429 l cp gs col-1 s gr 
% Polyline
n 2777 2028 m 2853 2028 l 2853 2429 l 2777 2429 l cp gs col-1 s gr 
% Polyline
n 2853 2028 m 2928 2028 l 2928 2429 l 2853 2429 l cp gs col-1 s gr 
% Polyline
n 2928 2028 m 3003 2028 l 3003 2429 l 2928 2429 l cp gs col-1 s gr 
% Polyline
n 3003 2028 m 3078 2028 l 3078 2429 l 3003 2429 l cp gs col-1 s gr 
% Polyline
n 3078 2028 m 3152 2028 l 3152 2429 l 3078 2429 l cp gs col-1 s gr 
% Polyline
n 3152 2028 m 3227 2028 l 3227 2429 l 3152 2429 l cp gs col-1 s gr 
% Polyline
n 3227 2028 m 3302 2028 l 3302 2429 l 3227 2429 l cp gs col-1 s gr 
% Polyline
n 3302 2028 m 3378 2028 l 3378 2429 l 3302 2429 l cp gs col-1 s gr 
% Polyline
n 2327 2028 m 2402 2028 l 2402 2429 l 2327 2429 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 3378 2028 m 3453 2028 l 3453 2429 l 3378 2429 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 3453 2028 m 3528 2028 l 3528 2429 l 3453 2429 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2055 1229 m 2055 1119 l 2535 1119 l 2535 1229 l cp gs col-1 s gr 
% Polyline
n 603 978 m 677 978 l 677 1378 l 603 1378 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
n 677 978 m 752 978 l 752 1378 l 677 1378 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
/Times-Roman ff 90.00 scf sf
528 1079 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
1840 1079 m
gs 1 -1 sc (31) col-1 sh gr
/Times-Roman ff 90.00 scf sf
2252 2128 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
3565 2128 m
gs 1 -1 sc (31) col-1 sh gr
% Polyline
n 2805 2685 m 2940 2685 l 2940 2835 l 2805 2835 l cp gs col-1 s gr 
% Polyline
n 3270 2685 m 3405 2685 l 3405 2835 l 3270 2835 l cp gs col-1 s gr 
% Polyline
n 3495 2685 m 3630 2685 l 3630 2835 l 3495 2835 l cp gs col-1 s gr 
% Polyline
gs  clippath
2715 2620 m 2820 2685 l 2697 2677 l 2825 2718 l 2843 2661 l cp
clip
n 2355 2175 m 2355 2535 l 2820 2685 l gs col-1 s gr gr

% arrowhead
n 2715 2620 m 2820 2685 l 2697 2677 l 2706 2648 l 2715 2620 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
3422 2573 m 3345 2670 l 3367 2548 l 3311 2671 l 3366 2696 l cp
clip
n 3420 2160 m 3420 2505 l 3345 2670 l gs col-1 s gr gr

% arrowhead
n 3422 2573 m 3345 2670 l 3367 2548 l 3395 2561 l 3422 2573 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
3523 2551 m 3555 2670 l 3470 2580 l 3536 2698 l 3589 2669 l cp
clip
n 3480 2160 m 3480 2535 l 3555 2670 l gs col-1 s gr gr

% arrowhead
n 3523 2551 m 3555 2670 l 3470 2580 l 3497 2565 l 3523 2551 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Bold ff 150.00 scf sf
2732 1962 m
gs 1 -1 sc (node) col-1 sh gr
% Polyline
n 2040 1454 m 2040 1334 l 2549 1334 l 2549 1454 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
2676 1455 m
gs 1 -1 sc (Node Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2676 1680 m
gs 1 -1 sc (Entry Capability) col-1 sh gr
% Polyline
n 2056 999 m 2056 885 l 2559 885 l 2559 999 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
2670 1250 m
gs 1 -1 sc (Null Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2683 999 m
gs 1 -1 sc (Page Capability) col-1 sh gr
% Polyline
gs  clippath
255 1680 m 225 1800 l 195 1680 l 195 1815 l 255 1815 l cp
clip
n 630 1125 m 630 1500 l 225 1500 l 225 1800 l gs col-1 s gr gr

% arrowhead
n 255 1680 m 225 1800 l 195 1680 l 225 1680 l 255 1680 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
246 2431 m 180 2535 l 189 2412 l 147 2540 l 204 2559 l cp
clip
n 255 1965 m 255 2310 l 180 2535 l gs col-1 s gr gr

% arrowhead
n 246 2431 m 180 2535 l 189 2412 l 218 2421 l 246 2431 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 390 2520 m 525 2520 l 525 2670 l 390 2670 l cp gs col-1 s gr 
% Polyline
n 645 2520 m 780 2520 l 780 2670 l 645 2670 l cp gs col-1 s gr 
% Polyline
n 885 2520 m 1020 2520 l 1020 2670 l 885 2670 l cp gs col-1 s gr 
% Polyline
n 1110 2520 m 1245 2520 l 1245 2670 l 1110 2670 l cp gs col-1 s gr 
% Polyline
n 1335 2520 m 1470 2520 l 1470 2670 l 1335 2670 l cp gs col-1 s gr 
% Polyline
n 1560 2520 m 1695 2520 l 1695 2670 l 1560 2670 l cp gs col-1 s gr 
% Polyline
n 1785 2520 m 1920 2520 l 1920 2670 l 1785 2670 l cp gs col-1 s gr 
% Polyline
n 120 2520 m 255 2520 l 255 2670 l 120 2670 l cp gs col-1 s gr 
% Polyline
n 240 2760 m 375 2760 l 375 2910 l 240 2910 l cp gs col-1 s gr 
% Polyline
n 510 2775 m 645 2775 l 645 2925 l 510 2925 l cp gs col-1 s gr 
% Polyline
n 750 2775 m 885 2775 l 885 2925 l 750 2925 l cp gs col-1 s gr 
% Polyline
n 975 2775 m 1110 2775 l 1110 2925 l 975 2925 l cp gs col-1 s gr 
% Polyline
n 1230 2775 m 1365 2775 l 1365 2925 l 1230 2925 l cp gs col-1 s gr 
% Polyline
n 1455 2775 m 1590 2775 l 1590 2925 l 1455 2925 l cp gs col-1 s gr 
% Polyline
n 1680 2775 m 1815 2775 l 1815 2925 l 1680 2925 l cp gs col-1 s gr 
% Polyline
n 1950 2775 m 2085 2775 l 2085 2925 l 1950 2925 l cp gs col-1 s gr 
% Polyline
gs  clippath
1746 2431 m 1845 2505 l 1723 2487 l 1847 2538 l 1870 2483 l cp
clip
n 1305 1965 m 1305 2280 l 1845 2505 l gs col-1 s gr gr

% arrowhead
n 1746 2431 m 1845 2505 l 1723 2487 l 1734 2459 l 1746 2431 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1525 2426 m 1620 2505 l 1499 2480 l 1620 2539 l 1647 2485 l cp
clip
n 1155 1980 m 1155 2280 l 1620 2505 l gs col-1 s gr gr

% arrowhead
n 1525 2426 m 1620 2505 l 1499 2480 l 1512 2453 l 1525 2426 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1305 2420 m 1395 2505 l 1276 2473 l 1393 2539 l 1423 2486 l cp
clip
n 1020 1995 m 1020 2295 l 1395 2505 l gs col-1 s gr gr

% arrowhead
n 1305 2420 m 1395 2505 l 1276 2473 l 1290 2446 l 1305 2420 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1096 2406 m 1170 2505 l 1058 2453 l 1163 2538 l 1201 2491 l cp
clip
n 855 1980 m 855 2250 l 1170 2505 l gs col-1 s gr gr

% arrowhead
n 1096 2406 m 1170 2505 l 1058 2453 l 1077 2429 l 1096 2406 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
890 2418 m 960 2520 l 850 2463 l 951 2552 l 991 2507 l cp
clip
n 705 1980 m 705 2295 l 960 2520 l gs col-1 s gr gr

% arrowhead
n 890 2418 m 960 2520 l 850 2463 l 870 2441 l 890 2418 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
660 2390 m 705 2505 l 611 2425 l 689 2535 l 738 2500 l cp
clip
n 555 1980 m 555 2295 l 705 2505 l gs col-1 s gr gr

% arrowhead
n 660 2390 m 705 2505 l 611 2425 l 635 2407 l 660 2390 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
349 2626 m 315 2745 l 289 2624 l 285 2759 l 344 2761 l cp
clip
n 330 1965 m 330 2295 l 315 2745 l gs col-1 s gr gr

% arrowhead
n 349 2626 m 315 2745 l 289 2624 l 319 2625 l 349 2626 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
600 2640 m 570 2760 l 540 2640 l 540 2775 l 600 2775 l cp
clip
n 480 1980 m 480 2280 l 570 2520 l 570 2760 l gs col-1 s gr gr

% arrowhead
n 600 2640 m 570 2760 l 540 2640 l 570 2640 l 600 2640 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
855 2655 m 825 2775 l 795 2655 l 795 2790 l 855 2790 l cp
clip
n 630 1965 m 630 2280 l 825 2490 l 825 2775 l gs col-1 s gr gr

% arrowhead
n 855 2655 m 825 2775 l 795 2655 l 825 2655 l 855 2655 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1095 2640 m 1065 2760 l 1035 2640 l 1035 2775 l 1095 2775 l cp
clip
n 780 1980 m 780 2280 l 1065 2490 l 1065 2760 l gs col-1 s gr gr

% arrowhead
n 1095 2640 m 1065 2760 l 1035 2640 l 1065 2640 l 1095 2640 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
469 2381 m 465 2505 l 411 2394 l 439 2526 l 497 2513 l cp
clip
n 420 1965 m 420 2295 l 465 2505 l gs col-1 s gr gr

% arrowhead
n 469 2381 m 465 2505 l 411 2394 l 440 2388 l 469 2381 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1312 2642 m 1275 2760 l 1252 2638 l 1244 2773 l 1304 2777 l cp
clip
n 945 1974 m 945 2280 l 1290 2505 l 1275 2760 l gs col-1 s gr gr

% arrowhead
n 1312 2642 m 1275 2760 l 1252 2638 l 1282 2640 l 1312 2642 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1537 2642 m 1500 2760 l 1477 2638 l 1469 2773 l 1529 2777 l cp
clip
n 1080 1965 m 1080 2265 l 1515 2505 l 1500 2760 l gs col-1 s gr gr

% arrowhead
n 1537 2642 m 1500 2760 l 1477 2638 l 1507 2640 l 1537 2642 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1770 2655 m 1740 2775 l 1710 2655 l 1710 2790 l 1770 2790 l cp
clip
n 1230 1980 m 1230 2265 l 1740 2520 l 1740 2775 l gs col-1 s gr gr

% arrowhead
n 1770 2655 m 1740 2775 l 1710 2655 l 1740 2655 l 1770 2655 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
2048 2654 m 2025 2775 l 1988 2657 l 1996 2792 l 2056 2788 l cp
clip
n 1395 1968 m 1395 2250 l 2010 2505 l 2025 2775 l gs col-1 s gr gr

% arrowhead
n 2048 2654 m 2025 2775 l 1988 2657 l 2018 2655 l 2048 2654 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
330 945 m 450 975 l 330 1005 l 465 1005 l 465 945 l cp
clip
n 825 675 m 150 675 l 150 975 l 450 975 l gs col-1 s gr gr

% arrowhead
n 330 945 m 450 975 l 330 1005 l 330 975 l 330 945 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 465 750 m 974 750 l 974 630 l 465 630 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
gs  clippath
2355 1905 m 2325 2025 l 2295 1905 l 2295 2040 l 2355 2040 l cp
clip
n 720 1140 m 720 1500 l 1650 1500 l 1650 1800 l 2325 1800 l 2325 2025 l gs col-1 s gr gr

% arrowhead
n 2355 1905 m 2325 2025 l 2295 1905 l 2325 1905 l 2355 1905 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Bold ff 150.00 scf sf
677 1752 m
gs 1 -1 sc (node) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1007 942 m
gs 1 -1 sc (node) col-1 sh gr
/Times-Bold ff 150.00 scf sf
525 600 m
gs 1 -1 sc (Node Capablity) col-1 sh gr
/Times-Bold ff 150.00 scf sf
750 3075 m
gs 1 -1 sc (Pages) col-1 sh gr
$F2psEnd
rs
end

%%EndDocument

 endTexFig
 2040 4284 a Fh(Figure)k(2)p Fq(.)29 b(ER)n(OS)23 b(memor)r(y)h(tree)
2165 4543 y Fm(Ev)o(ery)14 b(ER)m(OS)j(process)f(includes)f(a)i
(capability)e(that)h(names)g(the)2040 4634 y(root)h(of)h(its)h(address)
f(space)f(tree.)25 b(The)17 b(mapping)f(described)h(by)h(this)2040
4725 y(tree)i(is)i(translated)d(on)h(demand)f(into)h(the)g
(representation)e(required)2040 4817 y(by)24 b(the)g(underlying)e
(hardw)o(are.)35 b(When)25 b(a)f(page)g(f)o(ault)g(occurs,)g(the)2040
4908 y(ER)m(OS)c(k)o(ernel)f(\002rst)i(attempts)e(to)h(tra)n(v)o(erse)f
(the)h(address)f(space)h(tree)2040 4999 y(to)25 b(establish)f(a)h(v)n
(alid)e(mapping,)h(performing)d(an)o(y)i(necessary)h(ob-)2040
5091 y(ject)g(f)o(aults)g(to)f(load)h(pages)f(and)g(nodes)f(from)h(the)
g(disk.)35 b(If)24 b(a)g(v)n(alid)2040 5182 y(mapping)d(is)j(found,)d
(this)j(mapping)c(is)k(installed)f(in)g(the)g(hardw)o(are)p
2040 5261 797 4 v 2040 5323 a Fd(1)2107 5347 y Fx(T)-5
b(o)16 b(those)j(f)o(amiliar)h(with)f(earlier)h(capability)h(systems,)d
(a)g(node)h(may)e(be)i(thought)2107 5429 y(of)d(as)h(a)g(\002x)o
(ed-size)i(c-list)g([29].)1878 5726 y Fm(172)p eop
%%Page: 173 4
173 3 bop -152 81 a Fm(mapping)20 b(table)h(and)f(the)h(operation)e(is)
k(restarted.)k(Otherwise,)20 b(the)-152 172 y(f)o(ault)31
b(is)h(re\003ected)f(using)f(an)h(upcall)g(to)g(a)g(user)n(-le)n(v)o
(el)f(f)o(ault)h(han-)-152 263 y(dler)18 b(speci\002ed)g(by)f(the)h
(address)g(space)f(\(if)h(present\))f(or)h(the)g(process)-152
355 y(\(otherwise\).)-27 446 y(Using)j(a)h(tree)f(of)g(nodes)f(rather)g
(than)h(page)f(tables)i(to)f(describe)-152 537 y(address)k(space)h
(mappings)e(permits)h(relati)n(v)o(ely)f(\002ne-grain)g(speci-)-152
629 y(\002cation)d(of)f(f)o(ault)g(handlers)g(\(Figure)f(2\).)26
b(Information)18 b(about)i(f)o(ault)-152 720 y(handlers)f(is)i(stored)f
(in)g(the)g(node-based)e(mapping)h(tree,)h(b)n(ut)g(is)h(not)-152
811 y(directly)f(captured)e(by)i(the)g(hardw)o(are)f(mapping)f(tables.)
-152 1049 y Fo(3.2)99 b(Pr)n(ocesses)-152 1196 y Fm(ER)m(OS)26
b(process)e(state)i(includes)f(the)g(user)n(-mode)e(re)o(gisters)i(of)f
(the)-152 1288 y(underlying)h(processor)m(,)i(including)f(the)h(user)n
(-accessible)g(portion)-152 1379 y(of)20 b(the)h(processor)e(status)i
(w)o(ord.)j(In)c(addition,)f(each)h(process)f(has)i(a)-152
1470 y(capability)e(re)o(gister)h(set)h(implemented)d(by)i(the)g(k)o
(ernel.)k(The)c(capa-)-152 1562 y(bility)e(re)o(gisters)g(contain)f
(those)h(capabilities)g(that)g(the)g(process)g(can)-152
1653 y(directly)i(in)m(v)n(ok)o(e.)-27 1744 y(The)34
b(k)o(ernel)f(e)o(xports)g(the)h(process)f(abstraction)g(to)h(applica-)
-152 1836 y(tion)21 b(code)e(via)i(tw)o(o)g(types)f(of)g(capabilities:)
26 b Fi(process)21 b(capabilities)p Fm(,)-152 1927 y(which)31
b(pro)o(vide)e(operations)g(to)i(manipulate)f(the)h(process)f(itself,)
-152 2018 y(and)22 b Fi(entry)h(capabilities)p Fm(,)e(which)h(allo)n(w)
g(the)g(holder)e(to)j(in)m(v)n(ok)o(e)d(the)-152 2110
y(services)g(pro)o(vided)e(by)i(a)h(program)d(within)i(a)g(particular)f
(process.)-27 2201 y(Because)29 b(ER)m(OS)g(is)h(a)f(persistent)f
(system,)j(all)e(process)g(state)-152 2292 y(must)16
b(ultimately)f(reside)h(in)g(structures)f(that)h(can)g(be)f(stored)h
(to)g(disk.)-152 2384 y(In)i(ER)m(OS,)f(these)h(structures)f(are)g
(pages)h(and)f(nodes.)23 b(Process)18 b(state)-152 2475
y(is)24 b(recorded)d(using)i(nodes)f(\(Figure)g(3\).)33
b(Data)24 b(re)o(gister)e(v)n(alues)g(are)-152 2566 y(stored)27
b(to)g(the)h(node)e(using)g Fi(number)i(capabilities)p
Fm(,)f(which)g(name)-152 2658 y(an)20 b(unsigned)f(v)n(alue)g(and)h
(implement)f Fn(r)m(ead)j Fm(operations.)-60 2767 y
 14274641 9341009 0 0 14274641 9341009 startTexFig
 -60
2767 a
%%BeginDocument: ndomain.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: ndomain.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:23 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 217 142
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/MyAppDict 100 dict dup begin def
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def
/col32 {0.894 0.635 0.000 srgb} bind def

end
save
-10.0 151.0 translate
1 -1 scale
.9 .9 scale % to make patterns same scale as in xfig

% This junk string is used by the show operators
/PATsstr 1 string def
/PATawidthshow { 	% cx cy cchar rx ry string
  % Loop over each character in the string
  {  % cx cy cchar rx ry char
    % Show the character
    dup				% cx cy cchar rx ry char char
    PATsstr dup 0 4 -1 roll put	% cx cy cchar rx ry char (char)
    false charpath		% cx cy cchar rx ry char
    /clip load PATdraw
    % Move past the character (charpath modified the
    % current point)
    currentpoint			% cx cy cchar rx ry char x y
    newpath
    moveto			% cx cy cchar rx ry char
    % Reposition by cx,cy if the character in the string is cchar
    3 index eq {			% cx cy cchar rx ry
      4 index 4 index rmoveto
    } if
    % Reposition all characters by rx ry
    2 copy rmoveto		% cx cy cchar rx ry
  } forall
  pop pop pop pop pop		% -
  currentpoint
  newpath
  moveto
} bind def
/PATcg {
  7 dict dup begin
    /lw currentlinewidth def
    /lc currentlinecap def
    /lj currentlinejoin def
    /ml currentmiterlimit def
    /ds [ currentdash ] def
    /cc [ currentrgbcolor ] def
    /cm matrix currentmatrix def
  end
} bind def
% PATdraw - calculates the boundaries of the object and
% fills it with the current pattern
/PATdraw {			% proc
  save exch
    PATpcalc			% proc nw nh px py
    5 -1 roll exec		% nw nh px py
    newpath
    PATfill			% -
  restore
} bind def
% PATfill - performs the tiling for the shape
/PATfill { % nw nh px py PATfill -
  PATDict /CurrentPattern get dup begin
    setfont
    % Set the coordinate system to Pattern Space
    PatternGState PATsg
    % Set the color for uncolored pattezns
    PaintType 2 eq { PATDict /PColor get PATsc } if
    % Create the string for showing
    3 index string		% nw nh px py str
    % Loop for each of the pattern sources
    0 1 Multi 1 sub {		% nw nh px py str source
	% Move to the starting location
	3 index 3 index		% nw nh px py str source px py
	moveto			% nw nh px py str source
	% For multiple sources, set the appropriate color
	Multi 1 ne { dup PC exch get PATsc } if
	% Set the appropriate string for the source
	0 1 7 index 1 sub { 2 index exch 2 index put } for pop
	% Loop over the number of vertical cells
	3 index 		% nw nh px py str nh
	{			% nw nh px py str
	  currentpoint		% nw nh px py str cx cy
	  2 index show		% nw nh px py str cx cy
	  YStep add moveto	% nw nh px py str
	} repeat		% nw nh px py str
    } for
    5 { pop } repeat
  end
} bind def

% PATkshow - kshow with the current pattezn
/PATkshow {			% proc string
  exch bind			% string proc
  1 index 0 get			% string proc char
  % Loop over all but the last character in the string
  0 1 4 index length 2 sub {
				% string proc char idx
    % Find the n+1th character in the string
    3 index exch 1 add get	% string proe char char+1
    exch 2 copy			% strinq proc char+1 char char+1 char
    % Now show the nth character
    PATsstr dup 0 4 -1 roll put	% string proc chr+1 chr chr+1 (chr)
    false charpath		% string proc char+1 char char+1
    /clip load PATdraw
    % Move past the character (charpath modified the current point)
    currentpoint newpath moveto
    % Execute the user proc (should consume char and char+1)
    mark 3 1 roll		% string proc char+1 mark char char+1
    4 index exec		% string proc char+1 mark...
    cleartomark			% string proc char+1
  } for
  % Now display the last character
  PATsstr dup 0 4 -1 roll put	% string proc (char+1)
  false charpath		% string proc
  /clip load PATdraw
  neewath
  pop pop			% -
} bind def
% PATmp - the makepattern equivalent
/PATmp {			% patdict patmtx PATmp patinstance
  exch dup length 7 add		% We will add 6 new entries plus 1 FID
  dict copy			% Create a new dictionary
  begin
    % Matrix to install when painting the pattern
    TilingType PATtcalc
    /PatternGState PATcg def
    PatternGState /cm 3 -1 roll put
    % Check for multi pattern sources (Level 1 fast color patterns)
    currentdict /Multi known not { /Multi 1 def } if
    % Font dictionary definitions
    /FontType 3 def
    % Create a dummy encoding vector
    /Encoding 256 array def
    3 string 0 1 255 {
      Encoding exch dup 3 index cvs cvn put } for pop
    /FontMatrix matrix def
    /FontBBox BBox def
    /BuildChar {
	mark 3 1 roll		% mark dict char
	exch begin
	Multi 1 ne {PaintData exch get}{pop} ifelse  % mark [paintdata]
	  PaintType 2 eq Multi 1 ne or
	  { XStep 0 FontBBox aload pop setcachedevice }
	  { XStep 0 setcharwidth } ifelse
	  currentdict		% mark [paintdata] dict
	  /PaintProc load	% mark [paintdata] dict paintproc
	end
	gsave
	  false PATredef exec true PATredef
	grestore
	cleartomark		% -
    } bind def
    currentdict
  end				% newdict
  /foo exch			% /foo newlict
  definefont			% newfont
} bind def
% PATpcalc - calculates the starting point and width/height
% of the tile fill for the shape
/PATpcalc {	% - PATpcalc nw nh px py
  PATDict /CurrentPattern get begin
    gsave
	% Set up the coordinate system to Pattern Space
	% and lock down pattern
	PatternGState /cm get setmatrix
	BBox aload pop pop pop translate
	% Determine the bounding box of the shape
	pathbbox			% llx lly urx ury
    grestore
    % Determine (nw, nh) the # of cells to paint width and height
    PatHeight div ceiling		% llx lly urx qh
    4 1 roll				% qh llx lly urx
    PatWidth div ceiling		% qh llx lly qw
    4 1 roll				% qw qh llx lly
    PatHeight div floor			% qw qh llx ph
    4 1 roll				% ph qw qh llx
    PatWidth div floor			% ph qw qh pw
    4 1 roll				% pw ph qw qh
    2 index sub cvi abs			% pw ph qs qh-ph
    exch 3 index sub cvi abs exch	% pw ph nw=qw-pw nh=qh-ph
    % Determine the starting point of the pattern fill
    %(px, py)
    4 2 roll				% nw nh pw ph
    PatHeight mul			% nw nh pw py
    exch				% nw nh py pw
    PatWidth mul exch			% nw nh px py
  end
} bind def

% Save the original routines so that we can use them later on
/oldfill	/fill load def
/oldeofill	/eofill load def
/oldstroke	/stroke load def
/oldshow	/show load def
/oldashow	/ashow load def
/oldwidthshow	/widthshow load def
/oldawidthshow	/awidthshow load def
/oldkshow	/kshow load def

% These defs are necessary so that subsequent procs don't bind in
% the originals
/fill	   { oldfill } bind def
/eofill	   { oldeofill } bind def
/stroke	   { oldstroke } bind def
/show	   { oldshow } bind def
/ashow	   { oldashow } bind def
/widthshow { oldwidthshow } bind def
/awidthshow { oldawidthshow } bind def
/kshow 	   { oldkshow } bind def
/PATredef {
  MyAppDict begin
    {
    /fill { /clip load PATdraw newpath } bind def
    /eofill { /eoclip load PATdraw newpath } bind def
    /stroke { PATstroke } bind def
    /show { 0 0 null 0 0 6 -1 roll PATawidthshow } bind def
    /ashow { 0 0 null 6 3 roll PATawidthshow }
    bind def
    /widthshow { 0 0 3 -1 roll PATawidthshow }
    bind def
    /awidthshow { PATawidthshow } bind def
    /kshow { PATkshow } bind def
  } {
    /fill   { oldfill } bind def
    /eofill { oldeofill } bind def
    /stroke { oldstroke } bind def
    /show   { oldshow } bind def
    /ashow  { oldashow } bind def
    /widthshow { oldwidthshow } bind def
    /awidthshow { oldawidthshow } bind def
    /kshow  { oldkshow } bind def
    } ifelse
  end
} bind def
false PATredef
% Conditionally define setcmykcolor if not available
/setcmykcolor where { pop } {
  /setcmykcolor {
    1 sub 4 1 roll
    3 {
	3 index add neg dup 0 lt { pop 0 } if 3 1 roll
    } repeat
    setrgbcolor - pop
  } bind def
} ifelse
/PATsc {		% colorarray
  aload length		% c1 ... cn length
    dup 1 eq { pop setgray } { 3 eq { setrgbcolor } { setcmykcolor
  } ifelse } ifelse
} bind def
/PATsg {		% dict
  begin
    lw setlinewidth
    lc setlinecap
    lj setlinejoin
    ml setmiterlimit
    ds aload pop setdash
    cc aload pop setrgbcolor
    cm setmatrix
  end
} bind def

/PATDict 3 dict def
/PATsp {
  true PATredef
  PATDict begin
    /CurrentPattern exch def
    % If it's an uncolored pattern, save the color
    CurrentPattern /PaintType get 2 eq {
      /PColor exch def
    } if
    /CColor [ currentrgbcolor ] def
  end
} bind def
% PATstroke - stroke with the current pattern
/PATstroke {
  countdictstack
  save
  mark
  {
    currentpoint strokepath moveto
    PATpcalc				% proc nw nh px py
    clip newpath PATfill
    } stopped {
	(*** PATstroke Warning: Path is too complex, stroking
	  with gray) =
    cleartomark
    restore
    countdictstack exch sub dup 0 gt
	{ { end } repeat } { pop } ifelse
    gsave 0.5 setgray oldstroke grestore
  } { pop restore pop } ifelse
  newpath
} bind def
/PATtcalc {		% modmtx tilingtype PATtcalc tilematrix
  % Note: tiling types 2 and 3 are not supported
  gsave
    exch concat					% tilingtype
    matrix currentmatrix exch			% cmtx tilingtype
    % Tiling type 1 and 3: constant spacing
    2 ne {
	% Distort the pattern so that it occupies
	% an integral number of device pixels
	dup 4 get exch dup 5 get exch		% tx ty cmtx
	XStep 0 dtransform
	round exch round exch			% tx ty cmtx dx.x dx.y
	XStep div exch XStep div exch		% tx ty cmtx a b
	0 YStep dtransform
	round exch round exch			% tx ty cmtx a b dy.x dy.y
	YStep div exch YStep div exch		% tx ty cmtx a b c d
	7 -3 roll astore			% { a b c d tx ty }
    } if
  grestore
} bind def
/PATusp {
  false PATredef
  PATDict begin
    CColor PATsc
  end
} bind def

% this is the pattern fill program from the Second edition Reference Manual
% with changes to call the above pattern fill
% left30
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 32 16 true [ 32 0 0 -16 0 16 ]
	{<c000c000300030000c000c000300030000c000c000300030
	000c000c00030003c000c000300030000c000c0003000300
	00c000c000300030000c000c00030003>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P1 exch def

% left45
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 32 32 true [ 32 0 0 -32 0 32 ]
	{<808080804040404020202020101010100808080804040404
	020202020101010180808080404040402020202010101010
	080808080404040402020202010101018080808040404040
	202020201010101008080808040404040202020201010101
	808080804040404020202020101010100808080804040404
	0202020201010101>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P4 exch def
1.1111 1.1111 scale %restore scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3502 m -1000 -1000 l 4781 -1000 l 4781 3502 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 1822 1114 m 1897 1114 l 1897 1514 l 1822 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1897 1114 m 1972 1114 l 1972 1514 l 1897 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1972 1114 m 2047 1114 l 2047 1514 l 1972 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2047 1114 m 2122 1114 l 2122 1514 l 2047 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2122 1114 m 2197 1114 l 2197 1514 l 2122 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2197 1114 m 2272 1114 l 2272 1514 l 2197 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2272 1114 m 2347 1114 l 2347 1514 l 2272 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2347 1114 m 2422 1114 l 2422 1514 l 2347 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2422 1114 m 2497 1114 l 2497 1514 l 2422 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2497 1114 m 2572 1114 l 2572 1514 l 2497 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2572 1114 m 2647 1114 l 2647 1514 l 2572 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2647 1114 m 2722 1114 l 2722 1514 l 2647 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2722 1114 m 2797 1114 l 2797 1514 l 2722 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2797 1114 m 2872 1114 l 2872 1514 l 2797 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 2872 1114 m 2947 1114 l 2947 1514 l 2872 1514 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1747 1114 m 1822 1114 l 1822 1514 l 1747 1514 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 116.47 74.27] PATmp PATsp ef gr PATusp gs col-1 s gr 
/Times-Roman ff 90.00 scf sf
1672 1215 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
2985 1215 m
gs 1 -1 sc (31) col-1 sh gr
% Polyline
n 1811 2089 m 1886 2089 l 1886 2490 l 1811 2490 l cp gs col-1 s gr 
% Polyline
n 1886 2089 m 1961 2089 l 1961 2490 l 1886 2490 l cp gs col-1 s gr 
% Polyline
n 1961 2089 m 2036 2089 l 2036 2490 l 1961 2490 l cp gs col-1 s gr 
% Polyline
n 2036 2089 m 2111 2089 l 2111 2490 l 2036 2490 l cp gs col-1 s gr 
% Polyline
n 2111 2089 m 2186 2089 l 2186 2490 l 2111 2490 l cp gs col-1 s gr 
% Polyline
n 2186 2089 m 2262 2089 l 2262 2490 l 2186 2490 l cp gs col-1 s gr 
% Polyline
n 2262 2089 m 2337 2089 l 2337 2490 l 2262 2490 l cp gs col-1 s gr 
% Polyline
n 2337 2089 m 2412 2089 l 2412 2490 l 2337 2490 l cp gs col-1 s gr 
% Polyline
n 2412 2089 m 2487 2089 l 2487 2490 l 2412 2490 l cp gs col-1 s gr 
% Polyline
n 2487 2089 m 2561 2089 l 2561 2490 l 2487 2490 l cp gs col-1 s gr 
% Polyline
n 2561 2089 m 2636 2089 l 2636 2490 l 2561 2490 l cp gs col-1 s gr 
% Polyline
n 2636 2089 m 2711 2089 l 2711 2490 l 2636 2490 l cp gs col-1 s gr 
% Polyline
n 2711 2089 m 2787 2089 l 2787 2490 l 2711 2490 l cp gs col-1 s gr 
% Polyline
n 2787 2089 m 2862 2089 l 2862 2490 l 2787 2490 l cp gs col-1 s gr 
% Polyline
n 2862 2089 m 2937 2089 l 2937 2490 l 2862 2490 l cp gs col-1 s gr 
% Polyline
n 1905 554 m 1905 444 l 2385 444 l 2385 554 l cp gs col-1 s gr 
% Polyline
n 752 303 m 827 303 l 827 703 l 752 703 l cp gs col-1 s gr 
% Polyline
n 827 303 m 903 303 l 903 703 l 827 703 l cp gs col-1 s gr 
% Polyline
n 903 303 m 978 303 l 978 703 l 903 703 l cp gs col-1 s gr 
% Polyline
n 978 303 m 1053 303 l 1053 703 l 978 703 l cp gs col-1 s gr 
% Polyline
n 1053 303 m 1127 303 l 1127 703 l 1053 703 l cp gs col-1 s gr 
% Polyline
n 1127 303 m 1202 303 l 1202 703 l 1127 703 l cp gs col-1 s gr 
% Polyline
n 1202 303 m 1278 303 l 1278 703 l 1202 703 l cp gs col-1 s gr 
% Polyline
n 1278 303 m 1352 303 l 1352 703 l 1278 703 l cp gs col-1 s gr 
% Polyline
n 1352 303 m 1427 303 l 1427 703 l 1352 703 l cp gs col-1 s gr 
% Polyline
n 1427 303 m 1502 303 l 1502 703 l 1427 703 l cp gs col-1 s gr 
% Polyline
n 1578 303 m 1653 303 l 1653 703 l 1578 703 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
n 1502 303 m 1578 303 l 1578 703 l 1502 703 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
n 677 303 m 752 303 l 752 703 l 677 703 l cp gs col-1 s gr 
% Polyline
n 602 303 m 677 303 l 677 703 l 602 703 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
n 1736 2089 m 1811 2089 l 1811 2490 l 1736 2490 l cp gs col-1 s gr 
/Times-Bold ff 150.00 scf sf
1809 2014 m
gs 1 -1 sc (Registers Annex) col-1 sh gr
/Times-Roman ff 90.00 scf sf
1661 2189 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
2974 2189 m
gs 1 -1 sc (31) col-1 sh gr
% Polyline
gs  clippath
1755 1980 m 1725 2100 l 1695 1980 l 1695 2115 l 1755 2115 l cp
clip
n 1545 401 m 1545 1800 l 1725 1800 l 1725 2100 l gs col-1 s gr gr

% arrowhead
n 1755 1980 m 1725 2100 l 1695 1980 l 1725 1980 l 1755 1980 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1770 990 m 1740 1110 l 1710 990 l 1710 1125 l 1770 1125 l cp
clip
n 1616 401 m 1620 825 l 1740 825 l 1740 1110 l gs col-1 s gr gr

% arrowhead
n 1770 990 m 1740 1110 l 1710 990 l 1740 990 l 1770 990 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
n 1906 324 m 1906 210 l 2409 210 l 2409 324 l cp gs col7 0.75 shd ef gr gs col-1 s gr 
% Polyline
n 1890 779 m 1890 659 l 2399 659 l 2399 779 l cp gs col7 0.95 shd ef gr gs col-1 s gr 
% Polyline
n 527 303 m 602 303 l 602 703 l 527 703 l cp gs col-1 s gr 
% Polyline
n 453 303 m 527 303 l 527 703 l 453 703 l cp gs col-1 s gr 
% Polyline
gs  clippath
671 896 m 641 1016 l 611 896 l 611 1031 l 671 1031 l cp
clip
n 641 409 m 641 1016 l gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P4 [16 0 0 -16 42.73 27.27] PATmp PATsp ef gr PATusp gs col-1 s gr gr

% arrowhead
n 671 896 m 641 1016 l 611 896 l 641 896 l 671 896 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1740 1605 m 1770 1485 l 1800 1605 l 1800 1470 l 1740 1470 l cp
clip
n 1770 1485 m 1770 1710 l gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P4 [16 0 0 -16 118.00 99.00] PATmp PATsp ef gr PATusp gs col-1 s gr gr

% arrowhead
n 1740 1605 m 1770 1485 l 1800 1605 l 1770 1605 l 1740 1605 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Bold ff 150.00 scf sf
2520 575 m
gs 1 -1 sc (Number Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2533 324 m
gs 1 -1 sc (Any Capability) col-1 sh gr
/Times-Roman ff 90.00 scf sf
378 404 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 90.00 scf sf
1690 404 m
gs 1 -1 sc (31) col-1 sh gr
/Times-Bold ff 150.00 scf sf
1832 1024 m
gs 1 -1 sc (Capability Registers) col-1 sh gr
/Times-Bold ff 150.00 scf sf
2526 780 m
gs 1 -1 sc (Node Capability) col-1 sh gr
/Times-Bold ff 150.00 scf sf
629 256 m
gs 1 -1 sc (Process Root) col-1 sh gr
/Times-Roman ff 135.00 scf sf
183 1162 m
gs 1 -1 sc (\(To Address Space\)) col-1 sh gr
/Times-Roman ff 135.00 scf sf
1845 1725 m
gs 1 -1 sc (\(Always Zero\)) col-1 sh gr
$F2psEnd
rs
end

%%EndDocument

 endTexFig
 -152 4125 a Fh(Figure)h(3)p Fq(.)29 b(Process)22 b(str)q(ucture)-27
4384 y Fm(ER)m(OS)50 b(mak)o(es)f(no)g(distinction)f(between)h
(processes)g(and)-152 4475 y(threads.)f(All)28 b(processes)g(are)f
(single-threaded.)46 b(T)-7 b(w)o(o)28 b(processes)-152
4566 y(may)33 b(share)h(an)f(address)h(space;)40 b(each)33
b(of)h(these)f(processes)h(can)-152 4658 y(hold)22 b(distinct)g
(capabilities.)31 b(Multithreaded)20 b(services)i(are)g(imple-)-152
4749 y(mented)16 b(by)h(ha)n(ving)f(se)n(v)o(eral)g(processes)h(that)g
(share)f(a)i(common)d(ad-)-152 4840 y(dress)h(space.)23
b(Most)16 b(of)f(these)g(processes)g(serv)o(e)g(as)h(w)o(ork)o(er)e
(threads.)-152 4932 y(A)24 b(distinguished)e(process)h(publishes)f(the)
i(e)o(xternally)d(visible)j(en-)-152 5023 y(try)k(point)f(to)h(the)g
(service.)47 b(This)28 b(process)f(accepts)h(requests)f(and)-152
5114 y(forw)o(ards)19 b(them)h(to)g(the)h(w)o(ork)o(er)e(processes.)
1152 5084 y Fe(2)-27 5206 y Fm(In)37 b(ER)m(OS,)g(each)g(process)f(is)j
(a)e(protection)e(domain.)75 b(Ap-)-152 5297 y(plications)32
b(are)g(designed)f(as)i(multiple)e(cooperating)f(processes.)-152
5388 y(Application-transparent)15 b(persistence)i(ensures)h(that)h
(consistenc)o(y)2040 81 y(between)25 b(processes)h(is)h(preserv)o(ed)d
(across)i(system)g(restarts.)43 b(Be-)2040 172 y(cause)21
b(the)g(arrangement)e(and)h(consistenc)o(y)g(of)g(these)i(processes)e
(is)2040 263 y(not)k(lost)g(in)g(the)g(e)n(v)o(ent)f(of)h(a)g(system)g
(crash,)h(the)f(associated)f(inter)n(-)2040 355 y(process)28
b(relationships)f(need)h(not)g(be)g(reconstructed)e(e)n(v)o(ery)h(time)
2040 446 y(the)20 b(application)f(is)i(accessed.)2040
684 y Fo(3.3)99 b(Capability)25 b(in)l(v)o(ocation)2040
831 y Fm(All)d(resource)e(access)i(in)g(ER)m(OS)g(is)g(ultimately)f
(performed)d(by)j(ca-)2040 922 y(pability)31 b(in)m(v)n(ocation.)2695
892 y Fe(3)2785 922 y Fm(If)g(authorized)e(by)i(the)h(capability)-5
b(,)33 b(each)2040 1014 y(in)m(v)n(ocation)18 b(causes)j(the)f(named)g
(object)f(to)i(perform)d(some)i(object-)2040 1105 y(de\002ned)30
b(operation)f(speci\002ed)h(by)g(the)h(in)m(v)n(ok)o(er)-5
b(.)55 b(Ev)o(en)30 b(memory)2040 1196 y(accesses)h(performed)d(by)j
(load)f(and)g(store)g(instructions)g(may)g(be)2040 1288
y(modeled)21 b(as)i(an)g(ef)n(\002ciently)e(cached)h(capability)g(in)m
(v)n(ocation.)30 b(The)2040 1379 y(semantics)c(of)f(memory)f(reference)
h(is)h(therefore)e(co)o(v)o(ered)g(by)h(the)2040 1470
y(capability)k(semantics.)53 b(Capabilities)29 b(are)h(used)f(to)h(in)m
(v)n(ok)o(e)e(both)2040 1562 y(k)o(ernel)18 b(implemented)g(services)h
(\(pages,)f(nodes,)h(processes,)f(num-)2040 1653 y(bers\))f(and)f
(services)h(or)g(objects)g(implemented)e(by)i(user)g(processes.)2040
1744 y(Process-implemented)i(services)i(are)f(implemented)g(using)g(a)i
(\223re-)2040 1836 y(ply)f(and)g(w)o(ait\224)h(loop;)f(if)g(the)h
(service)f(is)h(not)f(a)n(v)n(ailable)g(at)h(the)f(time)2040
1927 y(of)g(the)f(call,)i(the)f(caller)f(blocks)g(until)h(the)g
(service)f(becomes)g(a)n(v)n(ail-)2040 2018 y(able.)2165
2110 y(Capability)26 b(in)m(v)n(ocations)g(transmit)h(a)g(small)h
(number)d(of)i(data)2040 2201 y(re)o(gisters)g(\(4\),)h(a)g(contiguous)
e(data)h(string,)h(and)f(a)h(small)g(number)2040 2292
y(of)21 b(capability)g(re)o(gisters)g(\(4\).)28 b(If)21
b(desired,)g(the)g(sender)g(can)g(cause)h(a)2040 2384
y(distinguished)g(entry)h(capability)g(called)h(a)g Fi(resume)h
(capability)d Fm(to)2040 2475 y(replace)h(the)g(last)i(capability)d(ar)
o(gument.)32 b(The)23 b(resume)g(capability)2040 2566
y(enables)d(the)g(recipient)f(to)i(reply)e(to)h(the)h(sender)-5
b(.)2165 2658 y(All)36 b(copies)g(of)g(a)g(resume)g(capability)f(are)h
(ef)n(\002ciently)f(con-)2040 2749 y(sumed)15 b(when)g(an)o(y)g(cop)o
(y)g(is)h(in)m(v)n(ok)o(ed,)f(ensuring)f(an)h(\223at)h(most)g(once\224)
2040 2840 y(reply)-5 b(.)23 b(Manifesting)15 b(the)i(callers)g
(continuation)e(as)i(a)h(capability)d(in-)2040 2932 y(stead)h(of)f
(using)g(an)g(implicit)h(stack)g(allo)n(ws)f(non-hierarchical)d(inter)n
(-)2040 3023 y(process)21 b(control)g(\003o)n(w)-5 b(,)21
b(which)g(is)i(useful)e(for)g(thread)g(dispatching.)2040
3114 y(Distinguishing)27 b(start)i(and)f(resume)g(capabilities)g(\(and)
g(the)g(asso-)2040 3206 y(ciated)i(process)g(states\))g(also)h(allo)n
(ws)f(applications)f(to)h(construct)2040 3297 y(an)h(implicit)h(mute)o
(x)e(around)g(e)o(xtended)f(co-routine)g(interactions)2040
3388 y(by)c(in)m(v)n(oking)e(an)i(e)o(xisting)f(resume)g(capability)g
(and)h(generating)e(a)2040 3479 y(ne)n(w)g(resume)f(capability)g(with)h
(each)f(interprocess)g(control)g(trans-)2040 3571 y(fer)-5
b(.)51 b(This)28 b(mechanism)g(is)i(sometimes)e(used)g(to)h(ensure)f
(that)h(e)o(x-)2040 3662 y(tended)e(string)g(transfers)g(are)h(not)g
(interrupted)d(by)j(other)f(in)m(v)n(oca-)2040 3753 y(tions.)2165
3845 y(Since)20 b(entry)f(capability)h(in)m(v)n(ocations)e(\(including)
h(resume)g(ca-)2040 3936 y(pabilities\))h(are)h(v)o(ery)e(common,)g(ER)
m(OS)i(includes)f(a)h(f)o(ast)g(interpro-)2040 4027 y(cess)f
(communication)15 b(\(IPC\))k(mechanism)e(described)h(in)g([43)o(])h
(and)2040 4119 y([44)o(].)62 b(Although)30 b(the)j(implementation)d
(reported)h(here)h(has)h(not)2040 4210 y(been)26 b(carefully)f
(optimized,)h(earlier)g(implementations)f(ha)n(v)o(e)h(e)o(x-)2040
4301 y(actly)20 b(matched)f(the)h(performance)e(of)i(L4')-5
b(s)20 b(IPC)h(primiti)n(v)o(e)e([44)o(].)2165 4393 y(An)28
b(unusual)f(aspect)h(of)g(the)h(architecture)e(is)i(that)f(capability)
2040 4484 y(in)m(v)n(ocation)17 b(is)j(the)e Fn(only)h
Fm(\223system)f(call\224)i(implemented)c(by)j(the)f(k)o(er)n(-)2040
4575 y(nel.)24 b(Because)16 b(there)f(are)g(no)h(other)f(system)h
(calls,)h(all)f(actions)g(tak)o(en)2040 4667 y(by)25
b(a)h(process)f(are)h(implicitly)f(access)h(check)o(ed.)40
b(Objects)26 b(imple-)p 2040 4746 797 4 v 2040 4808 a
Fd(2)2107 4832 y Fx(Orran)e(Krie)o(ger)i(has)f(noted)g(that)h(this)f
(implementation)i(has)e(unfortunate)i(pro-)2107 4914
y(cessor)d(locality)j(implications)g(on)c(lar)o(ge)j(SMP)d(systems.)41
b(A)23 b(planned)j(k)o(ernel-)2107 4996 y(implemented)19
b(dispatcher)h(object)e(will)g(address)g(this.)2040 5061
y Fd(3)2107 5085 y Fx(F)o(or)i(emulation)j(of)d(other)i(operating)h
(systems,)e(the)h(authority)h(to)e(e)o(xplicitly)j(in-)2107
5167 y(v)o(ok)o(e)17 b(capabilities)j(can)d(be)g(disabled)h(by)e(a)g
(per)o(-process)i(mode)e(bit.)22 b(If)16 b(capability)2107
5249 y(in)m(v)o(ocations)28 b(are)d(disabled,)k(the)d(in)m(v)o(ocation)
i(trap)f(instruction)g(is)f(treated)h(as)e(a)2107 5331
y(con)m(v)o(entional)h(e)o(xception)g(and)e(re\003ected)h(via)f(upcall)
g(to)g(the)f(per)o(-process)i(f)o(ault)2107 5413 y(handler)l(.)1878
5726 y Fm(173)p eop
%%Page: 174 5
174 4 bop -152 81 a Fm(mented)18 b(by)g(the)h(k)o(ernel)e(are)i
(accessed)g(by)f(in)m(v)n(oking)e(their)i(capabil-)-152
172 y(ities.)26 b(All)21 b(capabilities)f(tak)o(e)g(the)g(same)h(ar)o
(guments)d(at)j(the)f(trap)g(in-)-152 263 y(terf)o(ace.)27
b(In)20 b(consequence,)f(processes)i(implementing)d(either)j(me-)-152
355 y(diation)e(or)h(request)f(logging)e(can)j(be)g(transparently)d
(interposed)h(in)-152 446 y(front)25 b(of)g(most)g(objects.)41
b(In)25 b(particular)m(,)g(mandatory)e(access)j(con-)-152
537 y(trol)19 b(across)f(con\002ned)f(subsystems)i(can)f(be)g(enforced)
f(using)h(either)-152 629 y(indirection)30 b(using)g(the)h(k)o
(ernel-implemented)d(indirector)h(object)-152 720 y(or)22
b(simulation)e(by)i(a)g(transparently)d(interposed)h(\002lter)i
(process,)g(as)-152 811 y(in)f(K)n(e)o(ySafe)e([38)o(].)-152
1049 y Fo(3.4)99 b(Limiting)25 b(access)g(pr)n(opagation)-152
1196 y Fm(Capability)19 b(systems)i(permit)d(capabilities)i(to)g(be)f
(transferred)f(o)o(v)o(er)-152 1288 y(authorized)27 b(channels.)49
b(As)29 b(a)g(result,)i(security)d(ar)o(guments)e(must)-152
1379 y(consider)19 b(both)h(the)g(propagation)d(of)j(information)e(and)
i(the)g(propa-)-152 1470 y(gation)i(of)h(access)h(rights.)34
b(Capability)23 b(access)h(rights)f(can)g(be)g(sur)n(-)-152
1562 y(prisingly)e(po)n(werful;)h(a)g(read-only)e(capability)h(to)h(a)h
(node)e(permits)-152 1653 y(a)i(read-write)d(capability)h(residing)g
(in)h(that)g(node)f(to)h(be)g(e)o(xtracted,)-152 1744
y(which)e(in)g(turn)g(allo)n(ws)g(other)g(data)g(structures)f(to)i(be)f
(modi\002ed.)-27 1836 y(The)g(ER)m(OS)h(architecture)e(uses)i(tw)o(o)g
(mechanisms)e(to)i(address)-152 1927 y(this)g(issue:)26
b(the)20 b Fi(w)o(eak)g Fm(access)h(right)f(and)f(access)i
(indirection.)-27 2018 y(W)-7 b(eak)28 b(access)g(is)h(similar)f(to)f
(read-only)f(access,)k(e)o(xcept)c(that)-152 2110 y(capabilities)e
(fetched)e(via)i(a)g(weak)g(capability)e(are)i(diminished)e(in)-152
2201 y(authority)16 b(so)i(as)h(to)f(be)f(both)g(read-only)f(and)h
(weak.)24 b(The)17 b(net)h(ef)n(fect)-152 2292 y(is)32
b(that)f Fn(tr)o(ansitive)g Fm(read-only)d(access)k(is)f(ensured.)56
b(The)30 b(def)o(ault)-152 2384 y(cop)o(y-on-write)17
b(pager)i(implementation)f(described)h(in)h(Section)g(5,)-152
2475 y(for)32 b(e)o(xample,)i(remains)e(in)g(the)h(\223trusted)f
(computing)e(base\224)i(for)-152 2566 y(reasons)g(of)g(inte)o(grity)-5
b(,)33 b(b)n(ut)f(is)h(unable)e(to)h(leak)g(information)e(be-)-152
2658 y(cause)d(it)h(holds)f(only)f(a)i(weak)f(capability)f(to)h(the)g
(original)f(mem-)-152 2749 y(ory)31 b(object.)58 b(The)31
b(ER)m(OS)h(weak)f(access)h(right)f(is)h(a)g(generaliza-)-152
2840 y(tion)20 b(of)h(the)f(K)n(e)o(yK)n(OS)f(sense)i(capability)f([22)
n(];)h(sense)g(capabilities)-152 2932 y(are)31 b(read-only)-5
b(,)30 b(weak)h(capabilities)f(need)g(not)h(be.)56 b(A)31
b(write)g(via)-152 3023 y(a)h(weak)g(capability)f(stores)h(a)g
(diminished)e(\(i.e.)60 b(read-only)29 b(and)-152 3114
y(weak\))20 b(form)f(of)h(the)g(stored)g(capability)-5
b(.)-27 3206 y(Access)31 b(indirection)f(can)g(be)h(used)g(to)g
(implement)f(selecti)n(v)o(e)-152 3297 y(re)n(v)n(ocation.)24
b(When)c(sensiti)n(v)o(e)g(capabilities)g(are)g(granted)f(by)g(a)i
(ref-)-152 3388 y(erence)d(monitor)m(,)e(the)i(monitor)f(can)h(either)g
(transparently)e(forw)o(ard)-152 3479 y(requests)i(on)h(those)f
(capabilities)g(or)g(supply)g(an)g(indirection)f(object)-152
3571 y(in)26 b(place)f(of)g(the)h(real)f(capability)-5
b(.)40 b(Access)26 b(can)f(later)h(be)f(re)n(v)n(ok)o(ed)-152
3662 y(by)20 b(destro)o(ying)f(the)h(indirection)e(object.)-152
3900 y Fo(3.5)99 b(Checkpointing)27 b(and)e(persistence)-152
4047 y Fm(The)d(correctness)f(of)g(the)h(ER)m(OS)h(operating)d(system)i
(relies)g(on)f(the)-152 4138 y(f)o(act)29 b(that)g(all)g(operations)e
(performed)f(by)j(the)f(k)o(ernel)g(result)h(in)g(a)-152
4230 y(correct)c(system)h(state)g(so)g(long)f(as)h(the)g(initial)g
(state)g(w)o(as)h(correct.)-152 4321 y(The)21 b(le)o(gality)g(of)g(an)g
(operation)f(depends)g(on)h(the)g(state)i(of)e(the)g(sys-)-152
4412 y(tem,)35 b(which)d(in)g(turn)f(depends)g(on)h(pre)n(vious)e
(operations.)59 b(This)-152 4504 y(implies)21 b(that)f(causal)g(order)f
(of)h(operations)f(must)h(be)g(maintained.)-27 4595 y(The)26
b(challenge)e(in)j(causal)f(ordering)e(lies)j(in)f(ensuring)f(that)h(a)
-152 4686 y(correct)k(system)h(state)g(is)h(reco)o(v)o(ered)c(when)i
(an)g Fn(unplanned)g Fm(shut)-152 4778 y(do)n(wn)21 b(occurs)h(\(i.e.,)
g(a)g(crash\).)31 b(T)-7 b(o)22 b(achie)n(v)o(e)f(this,)i(the)f(k)o
(ernel)f(must)-152 4869 y(periodically)c(arrange)g(for)i(a)g
(consistent)f(image)g(to)h(be)g(sa)n(v)o(ed)g(with-)-152
4960 y(out)f(application)f(support,)g(and)g(without)h(unduly)e
(intruding)g(on)i(ap-)-152 5052 y(plication)d(performance.)21
b(The)15 b(dif)n(\002culty)g(lies)h(in)g(ensuring)f(that)g(the)-152
5143 y(image)24 b(written)g(to)h(the)f(disk)g(is)h(correct;)h(once)d
(committed,)h(a)h(bad)-152 5234 y(checkpoint)j(cannot)g(be)i(undone.)50
b(The)30 b(ER)m(OS)g(implementation)-152 5326 y(guarantees)18
b(that)i(a)f(correct)g(state)h(e)o(xists)f(on)g(the)h(disk)f(by)g
(means)g(of)2040 81 y(a)h(transparent)e(persistence)i(mechanism)e(e)n
(v)n(olv)o(ed)g(from)h(K)n(e)o(yK)n(OS)2040 172 y([28)o(].)2040
376 y Fc(3.5.1)92 b(Snapshot)2165 505 y Fm(As)31 b(in)f(K)n(e)o(yK)n
(OS,)g(the)g(ER)m(OS)h(implementation)d(tak)o(es)j(a)g(pe-)2040
596 y(riodic)h(snapshot)g(of)g(the)h(entire)g(machine.)61
b(This)33 b(state)h(is)f(writ-)2040 688 y(ten)27 b(to)h(the)f(disk)h
(asynchronously)-5 b(.)43 b(On)27 b(restart)g(the)h(system)f(pro-)2040
779 y(ceeds)21 b(from)f(the)h(pre)n(viously)e(sa)n(v)o(ed)h(system)h
(image.)27 b(Because)21 b(the)2040 870 y(checkpointed)14
b(image)i(is)i(globally)e(consistent,)h(causal)g(ordering)d(is)2040
962 y(maintained.)2432 932 y Fe(4)2165 1053 y Fm(The)21
b(snapshot)g(mechanism)f(introduces)g(minimal)h(disruption)2040
1144 y(of)d(e)o(x)o(ecution.)k(While)d(all)g(processes)f(are)g(halted)g
(during)e(the)j(snap-)2040 1236 y(shot,)j(this)g(phase)g(performs)e(a)i
(consistenc)o(y)f(check)g(and)g(marks)h(all)2040 1327
y(objects)g(cop)o(y-on-write)d(\(e)n(v)o(en)i(to)h(the)g(k)o(ernel\).)
29 b(Care)22 b(is)h(tak)o(en)f(by)2040 1418 y(the)h(snapshot)f
(procedure)f(to)i(ensure)g(that)g(capabilities)g(remain)f(in)2040
1510 y(their)e(optimized)e(form)h(\(Section)g(4.1\).)24
b(Memory)18 b(mappings)g(must)2040 1601 y(be)f(mark)o(ed)f(read-only)f
(to)i(support)f(the)h(k)o(ernel)f(cop)o(y-on-write)e(im-)2040
1692 y(plementation,)k(b)n(ut)j(the)f(mapping)f(structures)h(are)g(not)
g(dismantled)2040 1784 y(as)h(a)g(side)f(ef)n(fect)g(of)g
(checkpointing.)2165 1875 y(An)32 b(important)e(dif)n(ference)h
(between)g(the)h(snapshot)f(mecha-)2040 1966 y(nism)20
b(of)g(ER)m(OS)h(\(and)e(K)n(e)o(yK)n(OS\))g(and)g(those)h(of)g(L3)g
([31)n(])h(or)e(Fluk)o(e)2040 2058 y([52)o(])k(is)h(that)f(the)g(ER)m
(OS)g(snapshot)f(mechanism)g(performs)f(a)i(con-)2040
2149 y(sistenc)o(y)i(check)f(before)f(the)i(snapshot)f(is)i(tak)o(en.)
38 b(Critical)26 b(k)o(ernel)2040 2240 y(data)17 b(structures)g(are)h
(check)o(ed)e(to)i(ensure)e(that)i(their)f(pointers)g(point)2040
2332 y(to)j(objects)f(of)g(appropriate)e(type,)i(alle)o(gedly)g
(read-only)e(objects)i(in)2040 2423 y(the)26 b(object)g(cache)g(are)g
(checksummed)e(to)i(v)o(erify)f(that)h(the)o(y)g(ha)n(v)o(e)2040
2514 y(not)17 b(changed,)f(e)n(v)o(ery)g(modi\002ed)g(object)h(must)g
(ha)n(v)o(e)g(an)g(entry)g(in)g(the)2040 2605 y(in-core)i(checkpoint)g
(directory)-5 b(,)18 b(and)i(the)h(types)f(of)h(capabilities)f(in)2040
2697 y(process)c(slots)h(are)f(check)o(ed.)22 b(If)16
b(an)o(y)g(of)g(these)g(checks)g(f)o(ail,)h(the)f(sys-)2040
2788 y(tem)k(is)i(rebooted)c(without)h(committing)g(the)h(current)f
(checkpoint.)2165 2879 y(Once)32 b(committed,)i(an)e(inconsistent)g
(checkpoint)e(li)n(v)o(es)j(for)n(-)2040 2971 y(e)n(v)o(er)-5
b(.)29 b(Aside)22 b(from)f(errors)g(that)g(ha)n(v)o(e)g(occurred)f
(while)i(deb)n(ugging)2040 3062 y(the)g(stabilization)g(code)f(itself,)
i(neither)f(K)n(e)o(yK)n(OS)f(nor)g(ER)m(OS)i(has)2040
3153 y(been)32 b(observ)o(ed)e(to)i(write)g(an)h(inconsistent)e
(checkpoint)f(in)i(se)n(v-)2040 3245 y(enteen)g(calendar)f(years)h(of)h
(operation.)60 b(The)32 b(check)g(procedure)2040 3336
y(in)d(ER)m(OS)f(has)h(caught)e(innumerable)f(b)n(ugs)i(in)h(the)f
(implementa-)2040 3427 y(tion,)33 b(including)c(se)n(v)o(eral)h
(obscure)g(boundary)e(conditions)h(and)i(a)2040 3519
y(number)19 b(of)h(stray)g(pointer)f(errors.)25 b(This)c(pro)o(v)o(ed)d
(suf)n(\002ciently)h(use-)2040 3610 y(ful)i(that)g(ER)m(OS)h(no)n(w)e
(performs)g(these)h(checks)f(continuously)f(as)j(a)2040
3701 y(lo)n(w-priority)c(background)f(task.)2165 3793
y(In)23 b(the)g(current)f(implementation,)g(the)h(duration)e(of)i(the)h
(snap-)2040 3884 y(shot)j(phase)f(is)h(a)g(function)e(of)h(physical)g
(memory)f(size.)44 b(On)27 b(sys-)2040 3975 y(tems)d(with)h(256)e(me)o
(gabytes)e(of)j(physical)f(memory)f(the)i(snapshot)2040
4067 y(tak)o(es)e(less)h(than)e(50)h(ms)g(to)g(perform.)28
b(This)22 b(time)g(includes)f(e)o(x)o(ecu-)2040 4158
y(tion)k(of)f(the)h(system)g(sanity)f(check)o(er)g(described)f(abo)o(v)
o(e.)37 b(A)25 b(more)2040 4249 y(incremental)j(design)g(w)o(ould)g
(use)h(cop)o(y-on-write)d(techniques)i(to)2040 4341 y(implement)e(the)i
(snapshot)e(itself.)48 b(This)27 b(w)o(ould)g(mak)o(e)g(the)h(snap-)
2040 4432 y(shot)e(phase)g(solely)g(a)h(function)d(of)i(the)h(process)e
(table)i(size)f(\(Sec-)2040 4523 y(tion)35 b(4.3\),)j(which)d(should)f
(reduce)g(the)i(synchronous)c(phase)j(to)2040 4615 y(roughly)18
b(a)j(millisecond.)p 2040 4694 797 4 v 2040 4756 a Fd(4)2107
4780 y Fx(A)36 b(journaling)k(mechanism)f(\(also)f(described)h(in)f
([28]\))g(may)f(be)h(used)f(by)2107 4862 y(databases)25
b(to)f(ensure)g(that)g(committed)i(state)e(does)g(not)g(roll)g(back.)41
b(The)23 b(jour)o(-)2107 4944 y(naling)17 b(operation)h(violates)g
(causal)f(ordering,)g(b)o(ut)f(is)g(restricted)i(to)e(data)h(objects.)
2107 5026 y(Because)29 b(journaling)i(does)d(not)h(violate)h(the)e
(causal)i(ordering)f(of)f(protection)2107 5108 y(state,)17
b(it)h(does)f(not)h(violate)h(the)f(protection)i(model.)1878
5726 y Fm(174)p eop
%%Page: 175 6
175 5 bop -152 81 a Fc(3.5.2)92 b(Stabilization)-27 209
y Fm(Once)26 b(a)h(snapshot)f(has)h(been)f(captured,)h(the)g(state)g
(is)h(written)-152 301 y(to)33 b(the)g(disk)g(asynchronously)-5
b(.)59 b(T)-7 b(o)33 b(a)n(v)n(oid)f(checkpoint-induced)-152
392 y(delays,)f(stabilization)e(must)g(complete)g(before)f(the)h(ne)o
(xt)g(check-)-152 483 y(point,)18 b(which)f(is)i(typically)e(set)i(at)f
(5)g(minute)f(interv)n(als.)24 b(T)-7 b(o)18 b(pre)n(v)o(ent)-152
575 y(o)o(v)o(errun)e(when)i(applications)g(perform)e(unusually)h(lar)o
(ge)h(numbers)-152 666 y(of)26 b(object)f(mutations,)h(a)g(checkpoint)e
(is)i(also)g(forced)f(when)g(65\045)-152 757 y(of)20
b(the)g(total)g(checkpoint)d(area)j(has)g(been)f(allocated)g(to)h(the)g
(current)-152 849 y(checkpoint.)36 b(Experience)22 b(with)j(the)f(K)n
(e)o(yK)n(OS)g(design)g([28)n(])h(sug-)-152 940 y(gests)d(that)f(this)h
(design)e(can)h(scale)h(in)f(memory)f(capacity)g(with)h(the)-152
1031 y(bandwidth)e(of)h(a)n(v)n(ailable)f(I/O)i(channels.)-152
1232 y Fc(3.5.3)92 b(Bootstr)o(ap)25 b(and)f(installation)-27
1361 y Fm(The)g(checkpoint)e(mechanism)h(is)i(used)f(both)g(for)f
(startup)h(and)-152 1452 y(for)30 b(installation.)57
b(In)30 b(ER)m(OS,)h(an)g(initial)g(system)g(disk)f(image)g(is)-152
1544 y(compiled)d(using)g(a)h(cross)g(compilation)e(en)m(vironment.)44
b(The)28 b(im-)-152 1635 y(age)e(generation)d(tools)i(link)h(processes)
f(by)g(capabilities)g(in)g(much)-152 1726 y(the)h(w)o(ay)h(that)f(a)g
(con)m(v)o(entional)d(link)j(editor)f(performs)g(relocation)-152
1817 y(as)k(it)g(b)n(uilds)g(a)f(binary)f(image.)49 b(The)28
b(resulting)f(checkpoint)g(area)-152 1909 y(contains)18
b(a)g(list)h(of)f(running)d(processes)j(that)g(should)f(be)h
(\(re\)started)-152 2000 y(when)i(the)g(system)g(resumes.)-27
2091 y(While)38 b(installation)f(tools)g(are)g(not)g(yet)h
(implemented,)h(the)-152 2183 y(b)n(uilt-in)33 b(checkpoint)d(and)j
(replication)e(mechanisms)h(mak)o(e)h(this)-152 2274
y(straightforw)o(ard.)64 b(The)34 b(program)d(on)j(the)g(installation)f
(disk)o(ette)-152 2365 y(formats)21 b(ne)n(w)h(ranges)f(on)g(the)h
(hard)f(disk)g(corresponding)e(to)j(those)-152 2457 y(on)17
b(the)f(\003opp)o(y)g(and)g(mounts)g(them.)23 b(Because)17
b(the)o(y)f(match)g(e)o(xisting)-152 2548 y(ranges)22
b(\(the)g(ones)f(on)h(the)g(\003opp)o(y\))f(b)n(ut)h(ha)n(v)o(e)g(old)g
(sequence)f(num-)-152 2639 y(bers,)33 b(the)d(k)o(ernel)g(reco)o(v)o
(ers)f(the)h(\223stale\224)h(range)f(by)g(sequentially)-152
2731 y(marking)20 b(all)h(objects)g(in)g(the)g(ne)n(wly)f(duple)o(x)o
(ed)f(range)h(\223dirty\224)g(and)-152 2822 y(allo)n(wing)k(the)g
(replication)g(logic)g(to)g(re)n(write)h(them)f(to)g(both)g(repli-)-152
2913 y(cates.)35 2883 y Fe(5)93 2913 y Fm(The)17 b(installation)f(tool)
h(simply)g(w)o(aits)h(for)e(mirror)g(reco)o(v)o(ery)-152
3005 y(to)25 b(complete)f(and)g(forces)g(a)h(checkpoint.)36
b(The)24 b(end)g(result)h(is)g(that)-152 3096 y(the)j(image)f(on)h(the)
f(hard)g(disk)h(is)g(no)n(w)g(a)g(v)n(alid)f(bootable)f(image.)-152
3187 y(This)19 b(mechanism)e(is)j(considerably)c(simpler)i(than)g(the)h
(\223big)f(bang\224)-152 3279 y(used)i(in)h(K)n(e)o(yK)n(OS)e
(installation)h([22)n(].)-152 3479 y Fc(3.5.4)92 b(Supporting)27
b(design)e(rules)-27 3608 y Fm(Checkpointing)18 b(is)j(f)o(acilitated)f
(by)f(tw)o(o)i(k)o(ernel)e(design)h(rules:)-44 3752 y
Ff(\017)37 b Fm(All)21 b(state)g(resides)f(in)h(pages)e(and)h(nodes.)
-44 3872 y Ff(\017)37 b Fm(All)21 b(k)o(ernel)e(operations)g(are)h
(atomic.)1126 3842 y Fe(6)-152 4016 y Fm(Much)k(of)h(the)f(ER)m(OS)i
(design)e(is)h(predicated)e(on)i(the)f(\002rst)i(restric-)-152
4107 y(tion,)c(which)f(limits)i(the)f(number)d(of)j(disk)g(object)f
(types)h(that)f(must)-152 4199 y(be)f(managed)f(by)h(the)g(persistence)
f(subsystem.)25 b(W)m(ith)20 b(the)h(sole)f(e)o(x-)-152
4290 y(ception)g(of)g(the)g(list)h(of)f(stalled)h(processes,)f(this)h
(objecti)n(v)o(e)e(is)i(actu-)-152 4381 y(ally)i(satis\002ed)h(by)f
(the)g(current)f(implementation;)g(the)h(ER)m(OS)h(k)o(er)n(-)-152
4473 y(nel)k(o)n(wns)f(no)g(state.)48 b(Restricting)27
b(the)g(number)f(of)h(data)h(types)f(at)-152 4564 y(this)d(le)n(v)o(el)
f(also)h(reduces)f(the)g(number)f(of)h(storage)g(allocators)f(that)-152
4655 y(must)f(be)f(managed)e(by)i(the)g(implementation.)-27
4747 y(The)i(atomicity)g(rule)g(is)h(a)g(corollary)e(of)h(the)h(pages)f
(and)g(nodes)-152 4838 y(requirement.)35 b(When)25 b(a)f(k)o(ernel)g
(in)m(v)n(ocation)e(must)j(stall,)h(as)f(when)-152 4929
y(w)o(aiting)31 b(for)f(page)f(I/O,)i(a)g(small,)i(in-k)o(ernel)c
(\223thread\224)g(structure)-152 5021 y(containing)14
b(a)j(capability)e(to)h(the)g(stalled)h(process)e(is)i(queued)e(on)g
(the)-152 5112 y(in-k)o(ernel)23 b(stall)i(queue.)36
b(The)24 b(in)m(v)n(ok)o(er')-5 b(s)24 b(program)e(counter)h(is)i(ad-)
-152 5203 y(justed)19 b(to)f(retry)g(the)g(in)m(v)n(ocation)f(when)g(a)
o(w)o(ak)o(ened.)23 b(This)c(design)e(is)-152 5295 y(similar)24
b(to)f(that)g(adopted)e(in)j(Fluk)o(e)e([12)o(])h(and)g(MIT')-5
b(s)23 b(ITS)g(system)-152 5386 y([10)o(,)k(3],)h(and)e(simpli\002es)h
(checkpointing,)e(as)j(checkpointed)c(k)o(er)n(-)-152
5477 y(nel)g(state)g(requires)f(special)h(handling)e(by)h(the)h
(checkpoint)d(mech-)2040 81 y(anism.)39 b(In)24 b(the)h(current)e
(implementation,)h(the)h(only)e(k)o(ernel)h(state)2040
172 y(that)j(must)g(be)f(checkpointed)e(is)k(the)e(table)h(of)f(stall)i
(queue)e(struc-)2040 263 y(tures.)32 b(The)22 b(stall)h(queue)e
(structures)h(are)g(also)h(the)f(only)g(k)o(ernel)f(re-)2040
355 y(source)f(that)g(can)g(be)g(e)o(xhausted)e(by)i(action)g(of)g
(applications.)2165 446 y(While)40 b(it)h(is)g(not)f(presently)f
(implemented,)k(such)d(e)o(xhaus-)2040 537 y(tion)29
b(can)g(be)g(managed)f(by)g(a)i(trusted)f(decongester)e(application.)
2040 629 y(When)h(stall)i(queue)d(structures)g(are)i(o)o(v)o
(ersubscribed,)e(the)h(k)o(ernel)2040 720 y(constructs)20
b(f)o(ault)g(capabilities)g(\(a)h(specialized)e(resume)h(capability)
2040 811 y(used)j(by)g(user)n(-le)n(v)o(el)f(f)o(ault)h(handlers)g(to)g
(restart)g(a)h(f)o(aulted)f(process)2040 903 y(without)k(changing)f
(its)j(state\))g(to)f(the)g(lo)n(west)g(priority)e(processes)2040
994 y(and)f(passes)g(these)g(f)o(ault)g(capabilities)g(to)g(the)g
(decongester)e(appli-)2040 1085 y(cation)d(for)f(later)i(resumption.)
2040 1327 y Fo(4)100 b(Implementation)2040 1504 y Fm(This)22
b(section)g(describes)f(ho)n(w)g(the)h(abstractions)f(of)g(Section)g(3)
h(are)2040 1595 y(mapped)d(to)h(con)m(v)o(entional)d(hardw)o(are)i
(mechanisms.)2165 1686 y(The)i(de\002niti)n(v)o(e)f(representation)g
(for)h(all)h(ER)m(OS)g(objects)g(is)g(the)2040 1778 y(one)i(that)h
(resides)g(in)g(pages)g(and)f(nodes)g(on)h(the)g(disk.)39
b(P)o(ages)25 b(and)2040 1869 y(nodes)g(are)h(cached)f(at)i(tw)o(o)f
(le)n(v)o(els)g(of)g(abstraction)f(by)h(the)g(ER)m(OS)2040
1960 y(k)o(ernel)18 b(\(Figure)f(4\).)25 b(The)18 b(\002rst)h(le)n(v)o
(el)f(is)i(for)e(ef)n(\002cient)g(access)h(by)f(the)2040
2052 y(processor)-5 b(.)23 b(The)17 b(second)f(le)n(v)o(el)g(is)i
(simply)f(an)f(object)h(cache,)g(which)2040 2143 y(is)32
b(a)g(fully)e(associati)n(v)o(e,)j(write-back)d(cache)g(of)h(the)g
(on-disk)f(ob-)2040 2234 y(jects.)25 b(Address)19 b(translation)g
(causes)g(the)g(contents)g(of)g(some)g(nodes)2040 2326
y(to)e(be)f(cached)f(in)h(hardw)o(are)f(mapping)g(tables.)24
b(Process)16 b(in)m(v)n(ocation)2040 2417 y(causes)29
b(other)e(nodes)h(to)h(be)f(cached)g(in)g(the)h(process)f(table.)50
b(The)2040 2508 y(process)27 b(table)g(is)h(managed)d(as)j(a)g
(write-back)e(cache)g(that)i(sits)g(in)2040 2600 y(front)23
b(of)g(the)h(object)f(cache.)35 b(Hardw)o(are)23 b(mapping)f
(structures)h(are)2040 2691 y(treated)g(as)h(read-only)-5
b(.)31 b(Both)24 b(are)f(\003ushed)g(when)f(the)h(capabilities)2040
2782 y(the)o(y)d(cache)f(are)h(in)m(v)n(alidated.)2145
2879 y
 14077296 7564902 0 0 14077296 7564902 startTexFig
 2145 2879 a
%%BeginDocument: caches.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: caches.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:23 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 214 115
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-9.0 123.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3037 m -1000 -1000 l 4711 -1000 l 4711 3037 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 1500 975 m 2775 975 l 2775 1200 l 1500 1200 l cp gs col0 s gr 
/Times-Roman ff 150.00 scf sf
1650 1125 m
gs 1 -1 sc (Object Cache) col0 sh gr
% Polyline
n 1200 150 m 1950 150 l 1950 600 l 1200 600 l cp gs col0 s gr 
/Times-Roman ff 150.00 scf sf
1350 525 m
gs 1 -1 sc (Table) col0 sh gr
/Times-Roman ff 150.00 scf sf
1275 300 m
gs 1 -1 sc (Process) col0 sh gr
% Polyline
n 2550 150 m 3450 150 l 3450 600 l 2550 600 l cp gs col0 s gr 
/Times-Roman ff 150.00 scf sf
2625 525 m
gs 1 -1 sc (Structures) col0 sh gr
/Times-Roman ff 150.00 scf sf
2700 300 m
gs 1 -1 sc (Paging) col0 sh gr
% Polyline
n 1200 1650 m 2025 1650 l 2025 2025 l 1200 2025 l cp gs col0 s gr 
/Times-Roman ff 150.00 scf sf
1275 1800 m
gs 1 -1 sc (Checkpoint) col0 sh gr
/Times-Roman ff 150.00 scf sf
1425 1950 m
gs 1 -1 sc (Log) col0 sh gr
% Polyline
n 2175 2025 m 3375 2025 l 3375 1650 l 2175 1650 l cp gs col0 s gr 
/Times-Roman ff 150.00 scf sf
2400 1800 m
gs 1 -1 sc (Permanent) col0 sh gr
/Times-Roman ff 150.00 scf sf
2550 1950 m
gs 1 -1 sc (Store) col0 sh gr
% Polyline
gs  clippath
1441 1535 m 1350 1650 l 1388 1508 l 1316 1650 l 1370 1677 l cp
clip
n 1575 1200 m 1350 1650 l gs col0 s gr gr

% arrowhead
n 1441 1535 m 1350 1650 l 1388 1508 l 1404 1543 l 1441 1535 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2663 1342 m 2625 1200 l 2716 1315 l 2645 1173 l 2591 1200 l cp
clip
n 2850 1650 m 2625 1200 l gs col0 s gr gr

% arrowhead
n 2663 1342 m 2625 1200 l 2716 1315 l 2679 1307 l 2663 1342 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2512 1508 m 2550 1650 l 2459 1535 l 2530 1677 l 2584 1650 l cp
clip
n 1650 1650 m 1800 1350 l 2400 1350 l 2550 1650 l gs col0 s gr gr

% arrowhead
n 2512 1508 m 2550 1650 l 2459 1535 l 2496 1543 l 2512 1508 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
1526 745 m 1500 600 l 1581 723 l 1522 575 l 1467 597 l cp
clip
n 1650 975 m 1500 600 l gs col0 s gr gr

% arrowhead
n 1526 745 m 1500 600 l 1581 723 l 1545 711 l 1526 745 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
1924 830 m 1950 975 l 1869 852 l 1928 1000 l 1983 978 l cp
clip
n 1800 600 m 1950 975 l gs col0 s gr gr

% arrowhead
n 1924 830 m 1950 975 l 1869 852 l 1905 864 l 1924 830 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2739 701 m 2839 593 l 2791 732 l 2872 596 l 2821 565 l cp
clip
n 2614 968 m 2839 593 l gs col0 s gr gr

% arrowhead
n 2739 701 m 2839 593 l 2791 732 l 2777 696 l 2739 701 l  cp gs 0.00 setgray ef gr  col0 s
/Times-Italic ff 150.00 scf sf
825 900 m
gs 1 -1 sc (Preparation) col0 sh gr
/Times-Italic ff 150.00 scf sf
750 1350 m
gs 1 -1 sc (Checkpoint) col0 sh gr
/Times-Italic ff 150.00 scf sf
825 1575 m
gs 1 -1 sc (Pageout) col0 sh gr
/Times-Italic ff 150.00 scf sf
1950 825 m
gs 1 -1 sc (Aging) col0 sh gr
/Times-Italic ff 150.00 scf sf
2775 900 m
gs 1 -1 sc (Page Faults) col0 sh gr
/Times-Italic ff 150.00 scf sf
2850 1500 m
gs 1 -1 sc (Object Faults) col0 sh gr
/Times-Italic ff 150.00 scf sf
1800 1575 m
gs 1 -1 sc (Migration) col0 sh gr
/Times-Roman ff 150.00 scf sf
150 1800 m
gs 1 -1 sc (Permanent) col0 sh gr
/Times-Roman ff 150.00 scf sf
150 1950 m
gs 1 -1 sc (Store) col0 sh gr
/Times-Roman ff 150.00 scf sf
150 1050 m
gs 1 -1 sc (Second) col0 sh gr
/Times-Roman ff 150.00 scf sf
150 1200 m
gs 1 -1 sc (Level) col0 sh gr
/Times-Roman ff 150.00 scf sf
150 300 m
gs 1 -1 sc (First) col0 sh gr
/Times-Roman ff 150.00 scf sf
150 450 m
gs 1 -1 sc (Level) col0 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 2040 4011 a Fh(Figure)28 b(4)p Fq(.)45 b(La)n(y)n(ered)28
b(caching.)45 b(Arro)o(w)28 b(labels)h(indicate)g(the)2040
4103 y(oper)o(ations)24 b(that)g(induce)f(load)h(and)g(\003ush)e(of)h
(each)h(cache)o(.)2165 4348 y Fm(Use)e(of)f(softw)o(are)g(caching)f(at)
i(multiple)f(le)n(v)o(els)g(of)h(the)f(system)2040 4439
y(means)32 b(that)h(the)g(representation)d(of)i(performance-critical)d
(data)2040 4531 y(structures)19 b(should)g(be)h(easily)g(customizable)f
(to)h(the)g(processor)e(ar)n(-)2040 4622 y(chitecture.)24
b(Also,)c(performance-critical)d(portions)i(of)h(the)g(imple-)2040
4713 y(mentation)k(are)h(free)g(to)h(use)f(either)g(the)g(machine)g
(speci\002c)g(or)g(the)2040 4805 y(machine)c(independent)f
(representation.)29 b(In)22 b(se)n(v)o(eral)g(cases,)i(a)e(hy-)2040
4896 y(brid)i(approach)f(has)i(been)g(used)f(to)h(impro)o(v)o(e)e
(performance.)36 b(F)o(ast)2040 4987 y(paths)31 b(use)g(the)g
(machine-speci\002c)e(form,)j(and)e(are)h(back)o(ed)e(by)i(a)2040
5079 y(general)19 b(path)h(using)g(the)g(machine)f(independent)e
(structures.)p 2040 5139 797 4 v 2040 5201 a Fd(5)2107
5224 y Fx(Replication)j(is)d(currently)j(implemented;)g(mirror)d(reco)o
(v)o(ery)i(is)e(not.)2040 5289 y Fd(6)2107 5313 y Fx(W)-5
b(e)15 b(e)o(xclude)j(observ)n(ability)i(of)c(data)h(mutation)h(from)d
(our)i(de\002nition)h(of)e(atomic-)2107 5395 y(ity)l(,)h(which)h(is)g
(necessary)h(in)f(multiprocessor)h(implementations.)26
b(The)17 b(essential)2107 5477 y(point)h(is)f(that)h(access)g(right)g
(updates)h(be)e(atomic.)1878 5726 y Fm(175)p eop
%%Page: 176 7
176 6 bop -152 81 a Fo(4.1)99 b(Capabilities)25 b(and)g(object)h
(loading)-152 228 y Fm(An)h(object)g(capability)f(logically)g(contains)
h(a)g(64-bit)f(unique)g(ob-)-152 319 y(ject)i(identi\002er)f(for)g(a)h
(node)e(or)h(page,)h(a)g(32-bit)f(v)o(ersion)f(number)m(,)-152
411 y(and)21 b(a)h(type)e(\002eld.)29 b(In)20 b(the)i(Pentium)e
(implementation,)f(each)i(capa-)-152 502 y(bility)g(occupies)f(32)h
(bytes.)27 b(Ev)o(ery)19 b(node)h(and)h(page)f(has)h(a)h(v)o(ersion)
-152 593 y(number;)28 b(if)e(the)g(capability)f(v)o(ersion)g(and)g(the)
h(object)g(v)o(ersion)f(do)-152 685 y(not)20 b(match)g(the)h
(capability)e(is)j(in)m(v)n(alid.)i(Nodes)d(additionally)d(carry)-152
776 y(a)26 b(32-bit)e(\223call)h(count\224,)g(gi)n(ving)f(a)i(total)f
(node)f(size)i(of)f(528)f(bytes.)-152 867 y(Discussion)19
b(of)f(call)h(counts)f(has)h(been)f(omitted)g(for)g(lack)g(of)h(space,)
-152 959 y(and)h(may)g(be)g(found)e(in)j([45)n(].)-27
1050 y(As)i(stored)g(on)f(the)h(disk,)g(an)f(object)g(capability)g
(actually)g(con-)-152 1141 y(tains)28 b(the)g(unique)e(object)h
(identi\002er)f(and)h(v)o(ersion)f(number)-5 b(.)46 b(The)-152
1233 y(\002rst)34 b(time)e(a)h(capability)f(is)h(used,)i(it)e(is)h
Fi(prepared)q Fm(.)61 b(The)32 b(object)-152 1324 y(it)27
b(names)e(is)i(brought)c(into)j(memory)e(and)h(the)h(capability)f(is)h
(con-)-152 1415 y(v)o(erted)d(into)h(optimized)f(form)g(\(Figure)h
(5\).)36 b(All)25 b(optimized)e(capa-)-152 1507 y(bilities)29
b(point)e(directly)g(to)h(the)f(object)h(that)f(the)o(y)g(name,)i(and)e
(are)-152 1598 y(placed)20 b(on)g(a)g(link)o(ed)g(list)h(rooted)e(at)h
(the)h(object.)45 1701 y
 12630097 6117703 0 0 12630097 6117703 startTexFig
 45 1701 a
%%BeginDocument: PrepCap.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: PrepCap.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:23 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 192 93
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-3.0 96.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /endash 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Italic /Times-Italic-iso isovec ReEncode
/Times-Roman /Times-Roman-iso isovec ReEncode
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 2587 m -1000 -1000 l 4237 -1000 l 4237 2587 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 2100 600 m 3225 600 l 3225 1200 l 2100 1200 l cp gs col0 s gr 
% Polyline
gs  clippath
1956 570 m 2100 600 l 1956 630 l 2115 630 l 2115 570 l cp
clip
n 1200 825 m 1800 825 l 1800 600 l 2100 600 l gs col0 s gr gr

% arrowhead
n 1956 570 m 2100 600 l 1956 630 l 1980 600 l 1956 570 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 1200 1200 m 1800 1200 l 1800 825 l gs col0 s gr 
% Polyline
n 75 1125 m 1650 1125 l 1650 1275 l 75 1275 l cp gs col0 s gr 
% Polyline
 [60] 0 sd
gs  clippath
645 1419 m 675 1275 l 705 1419 l 705 1260 l 645 1260 l cp
clip
n 2625 1200 m 2625 1575 l 675 1575 l 675 1275 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 645 1419 m 675 1275 l 705 1419 l 675 1395 l 645 1419 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2445 1344 m 2475 1200 l 2505 1344 l 2505 1185 l 2445 1185 l cp
clip
n 975 1275 m 975 1500 l 2475 1500 l 2475 1200 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2445 1344 m 2475 1200 l 2505 1344 l 2475 1320 l 2445 1344 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
1005 981 m 975 1125 l 945 981 l 945 1140 l 1005 1140 l cp
clip
n 975 900 m 975 1125 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1005 981 m 975 1125 l 945 981 l 975 1005 l 1005 981 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
645 1044 m 675 900 l 705 1044 l 705 885 l 645 885 l cp
clip
n 675 1125 m 675 900 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 645 1044 m 675 900 l 705 1044 l 675 1020 l 645 1044 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2655 456 m 2625 600 l 2595 456 l 2595 615 l 2655 615 l cp
clip
n 675 450 m 675 75 l 2625 75 l 2625 600 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2655 456 m 2625 600 l 2595 456 l 2625 480 l 2655 456 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
1005 306 m 975 450 l 945 306 l 945 465 l 1005 465 l cp
clip
n 2475 600 m 2475 150 l 975 150 l 975 450 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1005 306 m 975 450 l 945 306 l 975 330 l 1005 306 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 75 450 m 1650 450 l 1650 675 l 75 675 l cp gs col0 s gr 
% Polyline
n 75 675 m 1650 675 l 1650 900 l 75 900 l cp gs col0 s gr 
% Polyline
n 675 450 m 675 675 l gs col0 s gr 
/Times-Italic-iso ff 150.00 scf sf
2325 825 m
gs 1 -1 sc (Node, Page,) col0 sh gr
/Times-Italic-iso ff 150.00 scf sf
2325 1050 m
gs 1 -1 sc (or Process) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
375 825 m
gs 1 -1 sc (Object Ptr) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
300 600 m
gs 1 -1 sc (Type     Aux-Info) col0 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 -152 2650 a Fh(Figure)i(5)p Fq(.)29 b(Prepared)23 b(capability)-27
2903 y Fm(Preparing)c(a)j(capability)e(also)i(causes)f(the)g(tar)o(get)
g(object)f(to)h(be)-152 2995 y(prepared)26 b(for)h(use.)47
b(F)o(or)27 b(node)g(and)g(page)f(capabilities,)j(prepara-)-152
3086 y(tion)d(forces)g(the)g(named)f(object)h(into)g(memory)-5
b(.)41 b(F)o(or)26 b(process)g(re-)-152 3177 y(lated)g(capabilities,)h
(preparing)d(the)i(capability)f(brings)h(in)g(the)g(as-)-152
3269 y(sociated)g(nodes)f(and)h(loads)g(the)g(process)g(into)g(the)g
(process)f(table)-152 3360 y(\(Section)20 b(4.3\).)-27
3451 y(Preparing)40 b(a)j(capability)e(is)j(one)d(of)h(tw)o(o)h
(operations)d(that)-152 3542 y(causes)31 b(objects)g(to)g(be)f(con)m(v)
o(erted)e(into)j(hardw)o(are)e(speci\002c)i(rep-)-152
3634 y(resentations.)24 b(The)c(other)g(is)h(address)e(translation.)
-152 3869 y Fo(4.2)99 b(Addr)n(ess)26 b(translation)-152
4016 y Fm(An)c(ER)m(OS)h(address)e(space)h(is)h(de\002ned)d(by)i(a)g
(tree)g(of)g(nodes.)29 b(Each)-152 4107 y(node)c(must)h(be)f(obtained)f
(from)h(a)h(storage)f(manager)-5 b(.)40 b(The)25 b(space)-152
4199 y(occupied)19 b(by)h(mapping)f(structures)h(is)i(therefore)c
(fully)i(accounted)-152 4290 y(for)-5 b(.)-27 4381 y(The)39
b(node-based)d(address)j(map)f(must)h(be)g(con)m(v)o(erted)e(into)-152
4473 y(page)28 b(table)g(entries)h(to)f(be)h(used)f(by)g(the)g(hardw)o
(are')-5 b(s)27 b(MMU.)i(As)-152 4564 y(address)17 b(e)o(xceptions)e
(occur)m(,)g(a)j(lazy)e(translation)g(of)g(the)h(state)h(in)e(the)-152
4655 y(node)k(tree)h(into)f(page)g(table)g(entries)h(is)g(performed.)j
(The)c(resulting)-152 4747 y(hardw)o(are)e(mapping)g(entries)h(are)g
(managed)e(as)j(a)g(read-only)d(cache)-152 4838 y(of)j(state)h(that)f
(resides)h(in)f(the)g(node)f(trees.)-27 4929 y(A)25 b(simple)g
(implementation)e(w)o(ould)h(perform)f(address)i(trans-)-152
5021 y(lation)18 b(by)f(tra)n(v)o(ersing)f(the)i(node)e(tree,)i
(generating)e(a)i(mapping,)e(and)-152 5112 y(updating)k(the)h(page)g
(tables.)28 b(T)-7 b(o)21 b(f)o(acilitate)h(in)m(v)n(alidation)d(when)h
(the)-152 5203 y(node)k(slots)h(are)g(modi\002ed,)f(it)h(must)f(record)
f(a)i(mapping)e(from)g(ca-)-152 5295 y(pability)32 b(addresses)g(to)h
(the)f(generated)f(page)g(table)h(entries)h(\(the)-152
5386 y Fi(depend)19 b(table)p Fm(\).)-27 5477 y(There)g(are)h(tw)o(o)h
(issues)g(with)f(this)h(implementation:)2148 81 y Ff(\017)37
b Fm(Full)28 b(tra)n(v)o(ersals)f(are)g(e)o(xpensi)n(v)o(e.)45
b(The)27 b(node)f(tree)i(contains)2227 172 y(information)h(stored)j(in)
g(capabilities.)59 b(A)32 b(f)o(air)g(amount)e(of)2227
263 y(data)25 b(dri)n(v)o(en)f(control)g(\003o)n(w)i(is)g(required)e
(to)h(decode)f(this)i(in-)2227 355 y(formation.)2148
474 y Ff(\017)37 b Fm(The)18 b(nai)n(v)o(e)g(design)f(does)i(not)f(le)n
(v)o(erage)f(shared)g(mapping)g(ta-)2227 565 y(bles)j(on)g
(architectures)f(that)h(support)f(them.)2165 724 y(The)31
b(follo)n(wing)f(sections)i(describe)f(ho)n(w)g(this)h(implementa-)2040
815 y(tion)20 b(is)h(optimized.)2040 1015 y Fc(4.2.1)92
b(Reducing)25 b(tr)o(aver)o(sal)h(cost)2165 1144 y Fm(The)15
b(Pentium)h(f)o(amily)f(uses)i(a)f(tw)o(o-le)n(v)o(el)f(hierarchical)g
(transla-)2040 1235 y(tion)22 b(table.)29 b(ER)m(OS)22
b(also)g(uses)g(a)g(hierarchical)e(mapping)g(architec-)2040
1327 y(ture;)29 b(a)e(correspondence)c(can)j(be)g(established)g
(between)g(the)g(tw)o(o)2040 1418 y(mapping)21 b(hierarchies)g
(\(Figure)g(6\).)31 b(Since)22 b(nodes)g(contain)f(32)h(en-)2040
1509 y(tries,)f(and)g(Pentium)f(mapping)f(tables)i(contain)f(1024)f
(entries,)i(tw)o(o)2040 1601 y(node)26 b(le)n(v)o(els)h(are)g(used)g
(to)g(describe)f(each)h(of)g(the)g(Pentium)f(map-)2040
1692 y(ping)k(table)g(le)n(v)o(els.)55 b(Where)n(v)o(er)29
b(a)i(v)n(alid)f(mapping)e(e)o(xists)j(in)f(the)2040
1783 y(hardw)o(are)17 b(page)h(tables,)g(this)h(mapping)d(agrees)i
(with)h(the)f(mapping)2040 1875 y(in)24 b(the)g(node)f(tree.)35
b(The)24 b(address)f(translation)g(algorithm)f(e)o(xploits)2040
1966 y(this)f(correspondence.)2091 2071 y
 14932459 8354283 0 0 14932459 8354283 startTexFig
 2091 2071 a
%%BeginDocument: mmu-naive-xlate.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: mmu-naive-xlate.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:23 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 227 127
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-4.0 133.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3215 m -1000 -1000 l 4837 -1000 l 4837 3215 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Ellipse
n 337 337 219 219 0 360 DrawEllipse gs col0 s gr

% Polyline
 [15 45] 45 sd
n 3300 225 m 2025 225 l 2025 2025 l 3300 2025 l cp gs col0 s gr  [] 0 sd
% Polyline
 [15 45] 45 sd
n 1875 225 m 600 225 l 600 1425 l 1875 1425 l cp gs col0 s gr  [] 0 sd
/Times-Roman ff 150.00 scf sf
1500 1275 m
gs 1 -1 sc (Node) col0 sh gr
/Times-Roman ff 150.00 scf sf
2925 1950 m
gs 1 -1 sc (Node) col0 sh gr
/Times-Roman ff 150.00 scf sf
2025 2175 m
gs 1 -1 sc (Page Table) col0 sh gr
/Times-Roman ff 150.00 scf sf
600 1575 m
gs 1 -1 sc (Page Directory) col0 sh gr
/Times-Roman ff 150.00 scf sf
3525 2175 m
gs 1 -1 sc (Page) col0 sh gr
/Times-Roman ff 150.00 scf sf
75 675 m
gs 1 -1 sc (Process) col0 sh gr
/Times-Roman ff 150.00 scf sf
3525 975 m
gs 1 -1 sc (Page) col0 sh gr
/Times-Roman ff 150.00 scf sf
3600 1950 m
gs 1 -1 sc (p0) col0 sh gr
/Times-Roman ff 150.00 scf sf
3600 750 m
gs 1 -1 sc (p2) col0 sh gr
/Times-Roman ff 150.00 scf sf
900 750 m
gs 1 -1 sc (A) col0 sh gr
/Times-Roman ff 150.00 scf sf
1575 900 m
gs 1 -1 sc (B) col0 sh gr
/Times-Roman ff 150.00 scf sf
2325 1350 m
gs 1 -1 sc (C) col0 sh gr
/Times-Roman ff 150.00 scf sf
3000 1575 m
gs 1 -1 sc (D) col0 sh gr
/Times-Roman ff 150.00 scf sf
3600 1500 m
gs 1 -1 sc (p1) col0 sh gr
% Polyline
gs  clippath
1380 495 m 1500 525 l 1380 555 l 1515 555 l 1515 495 l cp
clip
n 900 825 m 1200 825 l 1200 525 l 1500 525 l gs col0 s gr gr

% arrowhead
n 1380 495 m 1500 525 l 1380 555 l  col0 s
% Polyline
gs  clippath
705 345 m 825 375 l 705 405 l 840 405 l 840 345 l cp
clip
n 300 375 m 825 375 l gs col0 s gr gr

% arrowhead
n 705 345 m 825 375 l 705 405 l  col0 s
% Polyline
n 825 375 m 1050 375 l 1050 975 l 825 975 l cp gs col0 s gr 
% Polyline
n 1500 525 m 1725 525 l 1725 1125 l 1500 1125 l cp gs col0 s gr 
% Polyline
gs  clippath
2130 945 m 2250 975 l 2130 1005 l 2265 1005 l 2265 945 l cp
clip
n 1575 1050 m 1800 1050 l 1800 975 l 2250 975 l gs col0 s gr gr

% arrowhead
n 2130 945 m 2250 975 l 2130 1005 l  col0 s
% Polyline
gs  clippath
2805 495 m 2925 525 l 2805 555 l 2940 555 l 2940 495 l cp
clip
n 2325 1050 m 2700 1050 l 2700 525 l 2925 525 l gs col0 s gr gr

% arrowhead
n 2805 495 m 2925 525 l 2805 555 l  col0 s
% Polyline
gs  clippath
2805 1320 m 2925 1350 l 2805 1380 l 2940 1380 l 2940 1320 l cp
clip
n 2325 1500 m 2700 1500 l 2700 1350 l 2925 1350 l gs col0 s gr gr

% arrowhead
n 2805 1320 m 2925 1350 l 2805 1380 l  col0 s
% Polyline
n 2925 375 m 3150 375 l 3150 975 l 2925 975 l cp gs col0 s gr 
% Polyline
n 2925 1200 m 3150 1200 l 3150 1800 l 2925 1800 l cp gs col0 s gr 
% Polyline
gs  clippath
3405 1695 m 3525 1725 l 3405 1755 l 3540 1755 l 3540 1695 l cp
clip
n 3000 1725 m 3525 1725 l gs col0 s gr gr

% arrowhead
n 3405 1695 m 3525 1725 l 3405 1755 l  col0 s
% Polyline
n 2250 975 m 2475 975 l 2475 1575 l 2250 1575 l cp gs col0 s gr 
% Polyline
n 3525 1725 m 3825 1725 l 3825 2025 l 3525 2025 l cp gs col0 s gr 
% Polyline
gs  clippath
3405 495 m 3525 525 l 3405 555 l 3540 555 l 3540 495 l cp
clip
n 3000 525 m 3525 525 l gs col0 s gr gr

% arrowhead
n 3405 495 m 3525 525 l 3405 555 l  col0 s
% Polyline
n 3525 525 m 3825 525 l 3825 825 l 3525 825 l cp gs col0 s gr 
% Polyline
gs  clippath
3405 1245 m 3525 1275 l 3405 1305 l 3540 1305 l 3540 1245 l cp
clip
n 3000 1275 m 3525 1275 l gs col0 s gr gr

% arrowhead
n 3405 1245 m 3525 1275 l 3405 1305 l  col0 s
% Polyline
n 3525 1275 m 3825 1275 l 3825 1575 l 3525 1575 l cp gs col0 s gr 
$F2psEnd
rs

%%EndDocument

 endTexFig
 2040 3304 a Fh(Figure)i(6)p Fq(.)29 b(Memor)r(y)23 b(tr)o(anslation)h
(f)n(or)f(hier)o(archical)g(MMU)2165 3559 y Fm(In)g(Figure)g(6,)h(gi)n
(v)o(en)e(a)i(successful)g(translation)f(of)g(page)g
Fg(p)p Fb(0)p Fm(,)h(a)2040 3651 y(subsequent)i(translation)g(f)o(ault)
h(on)f Fg(p)p Fb(1)h Fm(or)g Fg(p)p Fb(2)f Fm(must)h(also)h(tra)n(v)o
(erse)2040 3742 y(nodes)g Fg(A)h Fm(and)f Fg(B)t Fm(.)50
b(Because)29 b(a)g(v)n(alid)e(hardw)o(are)g(mapping)g(entry)2040
3833 y(e)o(xists)g(in)g(the)f(page)g(directory)-5 b(,)26
b(the)g(hardw)o(are)g(mapping)e(may)i(be)2040 3925 y(used)i(instead)g
Fn(pr)l(o)o(vided)h Fm(that)f(there)g(e)o(xists)g(some)g(means)g(to)g
(dis-)2040 4016 y(co)o(v)o(er)19 b(that)h(node)f Fg(C)27
b Fm(corresponds)18 b(to)i(the)h(page)e Fn(table)p Fm(.)2165
4107 y(Ev)o(ery)29 b(core)h(page)g(frame)g(has)h(an)g(associated)g
(bookk)o(eeping)2040 4199 y(structure)k(containing)e(v)n(arious)i
(information)e(about)i(the)g(frame.)2040 4290 y(F)o(or)25
b(page)g(frames)h(that)f(contain)g(mapping)f(tables,)j(this)f(informa-)
2040 4381 y(tion)17 b(includes)f(a)h(pointer)e(to)i(the)g
Fi(producer)f Fm(of)h(that)g(mapping)d(table.)2040 4473
y(The)24 b(producer)e(is)j(that)f(node)f(in)i(the)f(mapping)e(tree)j
(such)f(that)g(\()p Fn(a)p Fm(\))2040 4564 y(its)32 b(span)e(in)h
(pages)f(is)i(less)g(than)e(or)g(equal)g(to)h(that)g(of)f(the)h(map-)
2040 4655 y(ping)24 b(table)h(rounded)e(up)h(to)i(the)f(nearest)f(po)n
(wer)g(of)h(32)g(and)f(\()p Fn(b)p Fm(\))g(it)2040 4747
y(has)k(the)g Fn(lar)m(g)o(est)h Fm(span)e(of)h(the)f(candidate)g
(nodes)g(under)f(rule)h(\()p Fn(a)p Fm(\).)2040 4838
y(That)f(is,)i(we)f(are)f(looking)f(for)g(a)i(node)e(whose)h(span)g(is)
h(no)f(lar)o(ger)2040 4929 y(than)21 b(that)f(of)h(the)g(corresponding)
c(mapping)i(table.)27 b(The)21 b(rounding)2040 5021 y(complication)i
(addresses)h(the)h(situation)f(in)h(which)f(the)h(hardw)o(are)2040
5112 y(mapping)j(table)i(spans)g(are)f(not)h(an)g(inte)o(ger)e(po)n
(wer)h(of)g(the)h(node)2040 5203 y(spans.)25 b(It)c(is)g(not)f(rele)n
(v)n(ant)f(to)h(the)g(Pentium)g(f)o(amily)-5 b(.)2165
5295 y(In)28 b(Figure)g(6,)j(node)c Fg(A)j Fm(is)f(the)g(producer)d(of)
i(the)h(page)f(direc-)2040 5386 y(tory)-5 b(,)20 b(and)g(node)g
Fg(C)28 b Fm(is)22 b(the)f(producer)d(of)j(the)g(page)f(table.)27
b(If)21 b Fg(p)p Fb(0)g Fm(has)2040 5477 y(been)28 b(successfully)h
(translated,)h(a)f(subsequent)e(translation)h(f)o(ault)1878
5726 y(176)p eop
%%Page: 177 8
177 7 bop -152 81 a Fm(on)28 b Fg(p)p Fb(1)g Fm(proceeds)e(as)j(follo)n
(ws.)47 b(The)28 b(high)f(order)g(bits)h(of)g(the)g(vir)n(-)-152
172 y(tual)20 b(address)g(are)g(used)g(to)g(locate)g(the)g(page)f
(directory)g(entry)-5 b(.)23 b(This)-152 263 y(entry)d(points)h(to)g
(the)g(physical)f(address)g(of)h(the)g(page)f(table,)h(which)-152
355 y(w)o(as)30 b(constructed)e(when)g Fg(p)p Fb(0)h
Fm(w)o(as)h(translated.)51 b(T)m(ranslation)28 b(no)n(w)-152
446 y(attempts)20 b(to)g(use)g(the)g(lo)n(w)g(order)e(bits)i(of)g(the)g
(virtual)f(page)g(address)-152 537 y(to)i(tra)n(v)o(erse)f(the)g(page)g
(table.)26 b(It)20 b(locates)h(the)f(page)g(table)g(entry)g(and)-152
629 y(\002nds)26 b(that)f(it)h(is)g(in)m(v)n(alid.)40
b(It)25 b(then)g(looks)g(in)g(the)h(per)n(-frame)d(book-)-152
720 y(k)o(eeping)14 b(structure)h(associated)g(with)h(the)f(page)g
(table)g(frame)g(to)h(\002nd)-152 811 y(the)25 b(producer)e(of)i(the)g
(page)g(table,)h(which)e(is)i(node)f Fg(C)6 b Fm(.)40
b(T)m(ra)n(v)o(ersal)-152 903 y(no)n(w)25 b(proceeds)f(through)f(nodes)
h Fg(C)32 b Fm(and)24 b Fg(D)k Fm(in)d(the)h(node)e(tree,)i(re-)-152
994 y(sulting)20 b(in)g(a)h(v)n(alid)f(page)f(table)h(entry)-5
b(.)-27 1085 y(The)33 b(producer)d(optimization)i(means)g(that)i(the)f
(majority)f(of)-152 1177 y(page)23 b(f)o(aults)h(tra)n(v)o(erse)f(only)
g(tw)o(o)h(layers)f(of)h(the)f(node)g(tree,)h(which)-152
1268 y(cuts)f(the)g(a)n(v)o(erage)e(translation)h(cost)h(in)f(half.)32
b(This)23 b(is)g(particularly)-152 1359 y(important)15
b(for)g(f)o(ault)i(handling,)d(where)i(at)h(least)f Fn(part)i
Fm(of)e(the)g(tra)n(v)o(er)n(-)-152 1451 y(sal)h(must)f(be)f(done)g(to)
h(identify)e(the)i(tar)o(get)f(f)o(ault)h(handler)-5
b(.)22 b(Producer)-152 1542 y(tracking)15 b(also)h(means)g(that)g(page)
g(tables)g(can)g(be)g(reclaimed)f(by)h(\002rst)-152 1633
y(locating)f(their)h(producer)m(,)e(then)h(locating)g(all)i(v)n(alid)e
(in-memory)e(ca-)-152 1725 y(pabilities)20 b(to)g(that)g(producer)d(by)
i(tra)n(v)o(ersing)g(the)h(capability)e(chain,)-152 1816
y(and)k(then)h(in)m(v)n(alidating)d(all)j(page)f(tables)h(associated)f
(with)h(the)g(ad-)-152 1907 y(dresses)f(of)e(the)h(node)f(slots)i
(\(the)f(array)f(entries\))h(containing)e(those)-152
1999 y(capabilities.)-152 2194 y Fc(4.2.2)92 b(Shar)m(ed)25
b(mapping)g(tables)-27 2322 y Fm(Ev)o(ery)17 b(producer)g(has)i(an)g
(associated)g(list)h(of)e Fi(products)p Fm(,)h(which)-152
2414 y(is)27 b(the)e(list)h(of)g(page)e(tables)i(constructed)e(from)g
(that)h(producer)-5 b(.)39 b(A)-152 2505 y(producer)15
b(may)i(ha)n(v)o(e)f(multiple)h(products)e(if)j(a)g(short-circuited)c
(tree)-152 2596 y(has)25 b(been)e(constructed.)36 b(If)24
b(an)g(address)g(space)g(is)h(described)e(by)h(a)-152
2688 y(single)d(node,)f(the)h(node)e(will)j(be)f(the)g(producer)d(of)j
(the)g(page)f(table,)-152 2779 y(the)j(read-only)e(page)h(directory)-5
b(,)21 b(and)i(the)f(read-write)g(page)g(direc-)-152
2870 y(tory)-5 b(.)55 b(A)31 b(producer)e(may)h(also)h(ha)n(v)o(e)f
(multiple)g(products)f(if)i(pro-)-152 2962 y(tection)22
b(bits)h(are)g(not)f(pro)o(vided)e(at)j(some)f(le)n(v)o(el)h(of)f(the)g
(translation)-152 3053 y(tree.)i(On)18 b(the)g(Pentium,)f(the)h
(address)g(space)f(re)o(gister)h(does)f(not)h(im-)-152
3144 y(plement)h(a)h(write)f(protection,)f(so)h(both)g(read-only)e(and)
i(read-write)-152 3236 y(v)o(ersions)27 b(of)g(the)h(page)f(directory)f
(must)h(be)h(constructed)e(follo)n(w-)-152 3327 y(ing)g(a)f(checkpoint)
f(to)i(ensure)e(that)i(cop)o(y-on-write)d(occurs)h(while)-152
3418 y(stabilization)c(is)h(in)f(progress.)-27 3510 y(The)j(product)f
(chain)g(is)j(used)e(to)h(ensure)e(that)i(page)f(tables)g(are)-152
3601 y(shared)g(where)f(possible)h(\(Figure)f(7\).)34
b(If)23 b(either)f(process)h(has)h(suc-)-152 3692 y(cessfully)29
b(translated)e Fg(p)p Fb(0)p Fm(,)k Fg(p)p Fb(1)p Fm(,)f(or)e
Fg(p)p Fb(2)p Fm(,)i(then)e(a)h(page)f(table)h(corre-)-152
3784 y(sponding)19 b(to)h(nodes)f Fg(E)5 b Fm(,)21 b
Fg(F)12 b Fm(,)20 b(and)g Fg(G)h Fm(has)g(been)e(created)h(and)f
(placed)-152 3875 y(on)f(the)g(product)e(chain)h(of)g(node)g
Fg(E)5 b Fm(.)25 b(When)17 b(the)h(other)f(process)h(\002rst)-152
3966 y(references)j(an)o(y)h(of)g(these)g(pages,)h(the)f(translation)g
(logic)g(will)h(\002nd)-152 4058 y(an)h(in)m(v)n(alid)f(entry)g(in)h
(its)h(page)e(directory)-5 b(.)34 b(It)24 b(will)g(then)g(locate)f(the)
-152 4149 y(producer)17 b(for)i(the)h(page)f(directory)f(\(either)g
Fg(A)j Fm(or)e Fg(C)6 b Fm(\),)20 b(and)f(tra)n(v)o(erse)-152
4240 y(the)i(upper)f(portion)f(of)i(the)g(node)f(tree)h(\(either)f
Fg(A)25 b Fb(::)g Fg(B)g Fm(or)c Fg(C)31 b Fb(::)24 b
Fg(D)r Fm(\).)-152 4332 y(In)c(either)g(case,)h(it)g(will)g(disco)o(v)o
(er)e(that)i(node)e Fg(E)26 b Fm(is)c(at)e(a)h(height)f(cor)n(-)-152
4423 y(responding)i(to)j(a)g(page)f(table,)i(and)e(check)f(the)i
(product)e(list)i(of)g Fg(E)-152 4514 y Fm(to)18 b(see)h(if)f(a)g(page)
g(table)g(with)g(appropriate)d(permission)i(constraints)-152
4605 y(already)24 b(e)o(xists.)39 b(Finding)23 b(the)i(page)f(table)h
(created)f(by)g(the)h(pre)n(vi-)-152 4697 y(ous)20 b(successful)f
(translation,)g(it)h(will)h(reuse)e(this)i(page)e(table)g(rather)-152
4788 y(than)h(create)g(a)h(ne)n(w)f(one.)-152 4983 y
Fc(4.2.3)92 b(No)23 b(in)l(verted)j(pa)o(g)o(e)e(tables)-27
5112 y Fm(Before)17 b(a)i(page)e(or)g(page)h(table)g(can)f(be)h(remo)o
(v)o(ed,)e(all)i(mapping)-152 5203 y(structures)23 b(referencing)d
(that)j(object)f(must)h(be)g(in)m(v)n(alidated.)31 b(Con-)-152
5295 y(v)o(entional)f(implementations)f(must)i(maintain)g(a)g(mapping)e
(from)-152 5386 y(pages)i(to)g(page)f(table)h(entries)g(\(an)f(in)m(v)o
(erted)f(page)h(table\))g(to)h(ac-)-152 5477 y(complish)20
b(this.)2091 -2 y
 14932459 13222133 0 0 14932459 13222133 startTexFig
 2091 -2 a
%%BeginDocument: mmu-shared-xlate.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: mmu-shared-xlate.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:23 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 227 201
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-4.0 207.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 4450 m -1000 -1000 l 4837 -1000 l 4837 4450 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Ellipse
n 337 337 219 219 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 337 2137 219 219 0 360 DrawEllipse gs col0 s gr

% Polyline
 [15 45] 45 sd
n 3300 225 m 2025 225 l 2025 2025 l 3300 2025 l cp gs col0 s gr  [] 0 sd
% Polyline
 [15 45] 45 sd
n 1875 1950 m 600 1950 l 600 3150 l 1875 3150 l cp gs col0 s gr  [] 0 sd
% Polyline
 [15 45] 45 sd
n 1875 225 m 600 225 l 600 1425 l 1875 1425 l cp gs col0 s gr  [] 0 sd
/Times-Roman ff 150.00 scf sf
2925 1950 m
gs 1 -1 sc (Node) col0 sh gr
/Times-Roman ff 150.00 scf sf
2025 2175 m
gs 1 -1 sc (Page Table) col0 sh gr
/Times-Roman ff 150.00 scf sf
3525 2175 m
gs 1 -1 sc (Page) col0 sh gr
/Times-Roman ff 150.00 scf sf
75 675 m
gs 1 -1 sc (Process) col0 sh gr
/Times-Roman ff 150.00 scf sf
3525 975 m
gs 1 -1 sc (Page) col0 sh gr
/Times-Roman ff 150.00 scf sf
3600 1950 m
gs 1 -1 sc (p0) col0 sh gr
/Times-Roman ff 150.00 scf sf
3600 750 m
gs 1 -1 sc (p2) col0 sh gr
/Times-Roman ff 150.00 scf sf
2325 1350 m
gs 1 -1 sc (E) col0 sh gr
/Times-Roman ff 150.00 scf sf
3000 1575 m
gs 1 -1 sc (F) col0 sh gr
/Times-Roman ff 150.00 scf sf
3600 1500 m
gs 1 -1 sc (p1) col0 sh gr
/Times-Roman ff 150.00 scf sf
3000 750 m
gs 1 -1 sc (G) col0 sh gr
/Times-Roman ff 150.00 scf sf
1500 3000 m
gs 1 -1 sc (Node) col0 sh gr
/Times-Roman ff 150.00 scf sf
600 3300 m
gs 1 -1 sc (Page Directory) col0 sh gr
/Times-Roman ff 150.00 scf sf
900 2475 m
gs 1 -1 sc (C) col0 sh gr
/Times-Roman ff 150.00 scf sf
1575 2625 m
gs 1 -1 sc (D) col0 sh gr
/Times-Roman ff 150.00 scf sf
1500 1275 m
gs 1 -1 sc (Node) col0 sh gr
/Times-Roman ff 150.00 scf sf
600 1575 m
gs 1 -1 sc (Page Directory) col0 sh gr
/Times-Roman ff 150.00 scf sf
900 750 m
gs 1 -1 sc (A) col0 sh gr
/Times-Roman ff 150.00 scf sf
1575 900 m
gs 1 -1 sc (B) col0 sh gr
/Times-Roman ff 150.00 scf sf
600 1725 m
gs 1 -1 sc (for A::B) col0 sh gr
/Times-Roman ff 150.00 scf sf
600 3450 m
gs 1 -1 sc (for C::D) col0 sh gr
/Times-Roman ff 150.00 scf sf
75 2475 m
gs 1 -1 sc (Process) col0 sh gr
/Times-Roman ff 150.00 scf sf
75 2625 m
gs 1 -1 sc (Proc1) col0 sh gr
/Times-Roman ff 150.00 scf sf
75 825 m
gs 1 -1 sc (Proc0) col0 sh gr
% Polyline
gs  clippath
705 345 m 825 375 l 705 405 l 840 405 l 840 345 l cp
clip
n 300 375 m 825 375 l gs col0 s gr gr

% arrowhead
n 705 345 m 825 375 l 705 405 l  col0 s
% Polyline
gs  clippath
2805 495 m 2925 525 l 2805 555 l 2940 555 l 2940 495 l cp
clip
n 2325 1050 m 2700 1050 l 2700 525 l 2925 525 l gs col0 s gr gr

% arrowhead
n 2805 495 m 2925 525 l 2805 555 l  col0 s
% Polyline
gs  clippath
2805 1320 m 2925 1350 l 2805 1380 l 2940 1380 l 2940 1320 l cp
clip
n 2325 1500 m 2700 1500 l 2700 1350 l 2925 1350 l gs col0 s gr gr

% arrowhead
n 2805 1320 m 2925 1350 l 2805 1380 l  col0 s
% Polyline
n 2925 375 m 3150 375 l 3150 975 l 2925 975 l cp gs col0 s gr 
% Polyline
n 2925 1200 m 3150 1200 l 3150 1800 l 2925 1800 l cp gs col0 s gr 
% Polyline
gs  clippath
3405 1695 m 3525 1725 l 3405 1755 l 3540 1755 l 3540 1695 l cp
clip
n 3000 1725 m 3525 1725 l gs col0 s gr gr

% arrowhead
n 3405 1695 m 3525 1725 l 3405 1755 l  col0 s
% Polyline
n 2250 975 m 2475 975 l 2475 1575 l 2250 1575 l cp gs col0 s gr 
% Polyline
n 3525 1725 m 3825 1725 l 3825 2025 l 3525 2025 l cp gs col0 s gr 
% Polyline
gs  clippath
3405 495 m 3525 525 l 3405 555 l 3540 555 l 3540 495 l cp
clip
n 3000 525 m 3525 525 l gs col0 s gr gr

% arrowhead
n 3405 495 m 3525 525 l 3405 555 l  col0 s
% Polyline
n 3525 525 m 3825 525 l 3825 825 l 3525 825 l cp gs col0 s gr 
% Polyline
gs  clippath
3405 1245 m 3525 1275 l 3405 1305 l 3540 1305 l 3540 1245 l cp
clip
n 3000 1275 m 3525 1275 l gs col0 s gr gr

% arrowhead
n 3405 1245 m 3525 1275 l 3405 1305 l  col0 s
% Polyline
n 3525 1275 m 3825 1275 l 3825 1575 l 3525 1575 l cp gs col0 s gr 
% Polyline
gs  clippath
1380 2220 m 1500 2250 l 1380 2280 l 1515 2280 l 1515 2220 l cp
clip
n 900 2550 m 1200 2550 l 1200 2250 l 1500 2250 l gs col0 s gr gr

% arrowhead
n 1380 2220 m 1500 2250 l 1380 2280 l  col0 s
% Polyline
n 825 2100 m 1050 2100 l 1050 2700 l 825 2700 l cp gs col0 s gr 
% Polyline
n 1500 2250 m 1725 2250 l 1725 2850 l 1500 2850 l cp gs col0 s gr 
% Polyline
gs  clippath
1380 495 m 1500 525 l 1380 555 l 1515 555 l 1515 495 l cp
clip
n 900 825 m 1200 825 l 1200 525 l 1500 525 l gs col0 s gr gr

% arrowhead
n 1380 495 m 1500 525 l 1380 555 l  col0 s
% Polyline
n 825 375 m 1050 375 l 1050 975 l 825 975 l cp gs col0 s gr 
% Polyline
n 1500 525 m 1725 525 l 1725 1125 l 1500 1125 l cp gs col0 s gr 
% Polyline
gs  clippath
705 2070 m 825 2100 l 705 2130 l 840 2130 l 840 2070 l cp
clip
n 300 2100 m 825 2100 l gs col0 s gr gr

% arrowhead
n 705 2070 m 825 2100 l 705 2130 l  col0 s
% Polyline
gs  clippath
2149 1047 m 2250 975 l 2195 1086 l 2283 983 l 2237 944 l cp
clip
n 1575 2775 m 1800 2775 l 1800 1500 l 2250 975 l gs col0 s gr gr

% arrowhead
n 2149 1047 m 2250 975 l 2195 1086 l  col0 s
% Polyline
gs  clippath
2130 945 m 2250 975 l 2130 1005 l 2265 1005 l 2265 945 l cp
clip
n 1575 1050 m 1800 1050 l 1800 975 l 2250 975 l gs col0 s gr gr

% arrowhead
n 2130 945 m 2250 975 l 2130 1005 l  col0 s
$F2psEnd
rs

%%EndDocument

 endTexFig
 2040 1847 a Fh(Figure)j(7)p Fq(.)29 b(Shar)q(ing)24
b(mapping)h(tab)n(les)2165 2174 y Fm(In)18 b(ER)m(OS,)h(an)f(in)m(v)o
(erted)f(page)h(table)h(is)g(rendered)e(unnecessary)2040
2266 y(by)f(the)g(capability)g(link)g(chains)g(\(Figure)f(5\).)23
b(If)17 b(the)f(object)g(to)g(be)g(re-)2040 2357 y(mo)o(v)o(ed)21
b(is)j(a)f(page,)g(its)g(prepared)e(capabilities)i(must)g(be)f(tra)n(v)
o(ersed)2040 2448 y(to)d(con)m(v)o(ert)e(them)h(back)g(to)h
(unoptimized)d(\(i.e.,)j(on-disk\))e(form.)23 b(As)2040
2540 y(these)16 b(capabilities)f(are)h(tra)n(v)o(ersed)e(for)h(con)m(v)
o(ersion,)f(the)h(pre)n(viously)2040 2631 y(recorded)j(depend)g(table)h
(entries)h(are)f(used)g(to)h(in)m(v)n(alidate)e(the)i(page)2040
2722 y(table)31 b(entries)f(that)g(point)g(to)h(the)f(page.)55
b(If)31 b(the)f(hardw)o(are)f(map-)2040 2814 y(ping)j(architecture)e
(is)j(hierarchical,)h(the)e(slots)h(in)g(each)f(address)2040
2905 y(space)21 b(node)f(correspond)e(to)j(a)g(contiguous)e(re)o(gion)g
(in)i(each)g(of)f(the)2040 2996 y(produced)i(page)i(tables,)i(so)e
(only)g(one)g(depend)f(table)h(entry)g(is)h(re-)2040
3088 y(quired)20 b(per)g(\(node,)f(page)h(table\))h(pair)-5
b(.)27 b(Because)21 b(of)f(the)h(capability)2040 3179
y(link)h(chain,)g(a)g(per)n(-page)e(entry)i(is)h(required)d(only)h(in)h
(the)g(case)h(of)f(a)2040 3270 y(single-page)d(address)g(space)h
(\(i.e.)25 b(one)20 b(with)g(no)g(nodes\).)2165 3362
y(If)26 b(the)h(object)f(to)h(be)f(remo)o(v)o(ed)e(is)k(a)f(page)f
(table,)i(matters)e(are)2040 3453 y(slightly)g(more)f(in)m(v)n(olv)o
(ed.)41 b(Note)26 b(that)h(the)f(producer)e(of)i(the)g(page)2040
3544 y(table)e(spans)g(all)h(of)f(the)g(v)n(alid)g(portion)e(of)i(the)g
(page)g(table.)36 b(It)25 b(fol-)2040 3636 y(lo)n(ws)j(that)f(the)h
(capabilities)f(that)g Fn(name)g Fm(the)h(producer)d(dominate)2040
3727 y(the)30 b(page)f(table)g(entries)h(that)f(point)g(to)h(the)g
(page)f(table.)53 b(Before)2040 3818 y(remo)o(ving)25
b(a)i(page)f(table,)i(it)g(suf)n(\002ces)f(to)g(tra)n(v)o(erse)f(the)h
(capability)2040 3910 y(chain)j(of)g(its)h(producer)c(and)j(in)m(v)n
(alidate)f(the)h(associated)g(depend)2040 4001 y(table)20
b(entries.)2040 4205 y Fc(4.2.4)92 b(Small)24 b(spaces)2165
4334 y Fm(Liedtk)o(e)34 b(has)i(sho)n(wn)f(that)g(creati)n(v)o(e)g
(combinations)e(of)j(se)o(g-)2040 4425 y(mentation)20
b(and)h(virtual)f(address)h(translation)f(can)h(yield)g(dramatic)2040
4516 y(performance)h(bene\002ts)j(on)g(some)g(classes)h(of)f(hardw)o
(are)f([32)n(].)40 b(In)2040 4608 y(such)22 b(designs,)g(the)g(virtual)
f(address)h(space)f(is)i(di)n(vided)e(into)h(a)g(sin-)2040
4699 y(gle)28 b(\223lar)o(ge)e(space,)-6 b(\224)30 b(a)e(uni)n(v)o
(ersally)e(mapped)g(k)o(ernel)h(re)o(gion,)h(and)2040
4790 y(some)c(number)e(of)i(\223small)g(spaces.)-6 b(\224)36
b(Boundaries)23 b(between)g(these)2040 4882 y(spaces)16
b(are)g(enforced)e(using)h(se)o(gmentation)f(rather)h(than)g(page)g
(pro-)2040 4973 y(tection.)2165 5064 y(In)34 b(ef)n(fect,)j(this)e
(technique)e(uses)i(the)f(se)o(gment)g(re)o(gisters)g(to)2040
5156 y(prepend)e(tag)i(bits)g(to)g(the)g(virtual)f(address.)65
b(No)34 b(TLB)g(\003ush)g(is)2040 5247 y(necessary)28
b(in)h(control)f(transfers)g(between)g(small)i(spaces.)51
b(Sim-)2040 5338 y(ilarly)-5 b(,)28 b(no)f(TLB)g(\003ush)g(is)h(needed)
d(when)i(transferring)e(to)i(a)g(lar)o(ge)2040 5430 y(space)20
b(if)g(that)f(lar)o(ge)g(space)g(is)i(the)f(\223current\224)e(lar)o(ge)
g(space.)25 b(A)20 b(\003ush)1878 5726 y(177)p eop
%%Page: 178 9
178 8 bop -152 81 a Fm(is)28 b(required)d(only)h(when)g(the)h(current)f
(lar)o(ge)g(space)h(changes)e(or)i(a)-152 172 y(mapping)19
b(entry)g(is)i(forcibly)e(in)m(v)n(alidated.)-27 263
y(Small)j(spaces)g(ha)n(v)o(e)g(a)g(disproportionate)d(impact)i(on)h
(the)g(per)n(-)-152 355 y(formance)33 b(of)h(an)h(ER)m(OS)g(system.)68
b(The)34 b(most)h(critical)g(operat-)-152 446 y(ing)26
b(system)g(service)g(applications)f(\002t)h(comfortably)e(in)i(less)h
(than)-152 537 y(128)18 b(KB,)h(and)g(these)f(objects)h(are)f(accessed)
h(with)g(high)f(frequenc)o(y)-5 b(.)-152 629 y(In)18
b(particular)m(,)f(all)i(of)e(the)h(address)g(space)g(f)o(ault)g
(handlers)f(currently)-152 720 y(included)h(in)h(the)g(system)h(run)e
(as)i(small)g(spaces,)f(which)g(halv)o(es)f(the)-152
811 y(number)i(of)g(address)h(space)g(switches)g(required)f(to)h
(handle)f(a)h(page)-152 903 y(f)o(ault.)-152 1140 y Fo(4.3)99
b(Pr)n(ocesses)-152 1288 y Fm(In)21 b(ER)m(OS,)h(the)f(majority)f(of)h
(capability)f(in)m(v)n(ocations)f(are)i(IPC)h(op-)-152
1379 y(erations,)j(whose)f(performance)d(depends)i(critically)h(on)g
(the)h(lo)n(w-)-152 1470 y(le)n(v)o(el)33 b(process)f(representation.)
62 b(Softw)o(are)32 b(caching)g(is)i(used)e(to)-152 1562
y(con)m(v)o(ert)16 b(the)h(process)g(structure)g(of)g(Figure)g(3)h(to)f
(and)g(from)g(a)h(repre-)-152 1653 y(sentation)25 b(optimized)e(for)i
(ef)n(\002cient)f(re)o(gister)h(sa)n(v)o(e)g(and)g(trap)f(han-)-152
1744 y(dling.)-152 1949 y Fc(4.3.1)92 b(The)23 b(pr)l(ocess)i(cac)o(he)
-27 2077 y Fm(The)k(k)o(ernel)h(maintains)f(a)h(boot-time)f(allocated)g
(process)g(ta-)-152 2169 y(ble.)51 b(Unlik)o(e)29 b(con)m(v)o(entional)
c(k)o(ernel)j(architectures,)i(this)f(process)-152 2260
y(table)d(is)g(a)g(cache.)41 b(As)26 b(with)g(other)f(objects,)h(the)g
(loading)e(of)i(pro-)-152 2351 y(cess)e(table)f(entries)g(is)h(dri)n(v)
o(en)e(by)g(capability)g(preparation.)32 b(When)-152
2443 y(process)24 b Fg(A)i Fm(\002rst)f(in)m(v)n(ok)o(es)f(a)h
(capability)e(to)i(process)f Fg(B)t Fm(,)i(the)f(capa-)-152
2534 y(bility)h(is)h(prepared.)39 b(As)27 b(a)f(side)g(ef)n(fect,)g(a)h
(process)e(table)h(entry)e(is)-152 2625 y(allocated)i(and)h(the)g
(state)g(of)g(process)f Fg(B)32 b Fm(is)c(loaded)e(into)g(this)i(en-)
-152 2717 y(try)-5 b(.)27 b(When)20 b(a)i(process)e(blocks,)g(a)i
(structure)e(containing)f(a)i(process)-152 2808 y(capability)30
b(to)h(that)g(process)f(is)i(placed)e(on)h(some)f(queue)g(by)g(the)-152
2899 y(k)o(ernel.)47 b(This)29 b(queue)d(structure)h(is)i(the)f(only)f
(information)e(about)-152 2990 y(the)i(process)g(that)g(must)h(remain)e
(in)h(memory)f(while)h(the)g(process)-152 3082 y(is)c(stalled.)28
b(Processes)22 b(that)g(are)f(ready)f(to)i(e)o(x)o(ecute)e(are)h
(queued)f(on)-152 3173 y(the)k(ready)e(queue.)33 b(When)23
b(the)g(stalled)h(processes)f(are)g(a)o(w)o(ak)o(ened,)-152
3264 y(this)g(process)f(capability)f(is)i(prepared,)e(forcing)f(the)i
(process)g(back)-152 3356 y(into)e(the)g(process)g(table.)-27
3447 y(Process)28 b(table)f(writeback)g(occurs)g(either)h(when)f(an)g
(entry)g(in)-152 3538 y(the)e(table)g(is)g(reallocated)f(or)g(when)g(a)
h(checkpoint)d(occurs.)38 b(In)24 b(ei-)-152 3630 y(ther)e(case,)g(all)
g(capabilities)g(to)g(the)g(unloaded)d(process)i(are)h
Fi(depre-)-152 3721 y(pared)q Fm(,)28 b(restoring)e(them)g(to)h(their)g
(disk)f(representation.)43 b(As)28 b(pro-)-152 3812 y(cesses)20
b(are)f(restarted)f(follo)n(wing)f(the)h(checkpoint,)f(the)o(y)h(are)g
(incre-)-152 3904 y(mentally)i(reloaded)e(into)i(the)g(process)g
(table.)25 b(This)20 b(in)h(turn)e(causes)-152 3995 y(the)44
b(process')e(constituent)h(nodes)f(\(Figure)h(3\))g(to)g(be)h(mark)o
(ed)-152 4086 y(\223dirty\224)23 b(in)h(preparation)e(for)h
(modi\002cation.)34 b(When)23 b(a)i(checkpoint)-152 4178
y(is)d(in)g(progress,)e(cop)o(y)g(on)h(write)g(is)i(used)e(to)g(ensure)
f(that)i(the)f(snap-)-152 4269 y(shotted)h(v)o(ersion)g(of)g(the)g
(state)i(associated)e(with)h(acti)n(v)o(e)f(processes)-152
4360 y(remains)e(unmodi\002ed)e(until)i(it)h(has)f(been)g(stabilized.)
-152 4565 y Fc(4.3.2)92 b(The)23 b(save)h(ar)m(ea)-27
4693 y Fm(The)32 b(Pentium)f(architecture)g(sa)n(v)o(es)i(state)g(to)f
(a)h(k)o(ernel)e(stack)-152 4785 y(when)26 b(a)g(trap)f(occurs.)41
b(Rather)26 b(than)f(cop)o(y)g(this)h(state,)i(the)e(ER)m(OS)-152
4876 y(k)o(ernel)c(arranges)f(for)g(the)i(k)o(ernel)e(stack)h(pointer)f
(to)i(point)e(directly)-152 4967 y(into)g(the)g(per)n(-process)e(sa)n
(v)o(e)i(area)f(\(Figure)g(8\).)26 b(The)20 b(hardw)o(are)g(trap)-152
5059 y(mechanism)c(spills)j(the)e(trap)g(state)h(directly)f(into)g(the)
h(process)e(table)-152 5150 y(entry)k(for)f(the)h(acti)n(v)o(e)g
(process.)-27 5241 y(Control)e(is)h(assumed)f(by)g(the)h(trap)f
(handler)m(,)f(which)h(completes)-152 5333 y(the)32 b(re)o(gister)f(sa)
n(v)o(e,)k(loads)d(k)o(ernel)f(se)o(gments,)i(adjusts)f(the)g(stack)
-152 5424 y(pointer)17 b(to)i(point)e(to)h(the)h(true)e(k)o(ernel)h
(stack,)g(and)g(transfers)g(control)2040 81 y(to)25 b(the)f(k)o(ernel.)
37 b(ER)m(OS)25 b(is)h(an)e(\223interrupt)f(style\224)h(k)o(ernel.)37
b(When)25 b(a)2040 172 y(process)18 b(is)h(suspended)d(in)i(the)g(k)o
(ernel)f(it)i(is)g(forced)e(to)h(restart)g(at)g(the)2040
263 y(trap)i(instruction;)f(there)h(is)h(no)f(per)n(-process)e(k)o
(ernel)i(stack.)2145 373 y
 14077296 6841303 0 0 14077296 6841303 startTexFig
 2145 373 a
%%BeginDocument: save-area.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: save-area.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:24 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 214 104
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-3.0 107.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 2779 m -1000 -1000 l 4612 -1000 l 4612 2779 l cp clip
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 525 150 m 825 150 l 825 600 l 525 600 l cp gs col0 s gr 
% Polyline
n 525 1050 m 825 1050 l 825 1500 l 525 1500 l cp gs col0 s gr 
% Polyline
n 525 600 m 825 600 l 825 1050 l 525 1050 l cp gs col7 0.90 shd ef gr gs col0 s gr 
% Polyline
n 1800 375 m 3150 375 l 3150 75 l 1800 75 l cp gs col0 s gr 
/Times-Roman ff 180.00 scf sf
2100 300 m
gs 1 -1 sc (Float Regs) col0 sh gr
% Polyline
gs  clippath
381 795 m 525 825 l 381 855 l 540 855 l 540 795 l cp
clip
n 75 825 m 525 825 l gs col7 0.90 shd ef gr gs col0 s gr gr

% arrowhead
n 381 795 m 525 825 l 381 855 l 405 825 l 381 795 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 1800 1200 m 3150 1200 l 3150 1500 l 1800 1500 l cp gs col0 s gr 
% Polyline
n 1800 900 m 3150 900 l 3150 1200 l 1800 1200 l cp gs col7 0.90 shd ef gr gs col0 s gr 
% Polyline
n 1800 600 m 3150 600 l 3150 900 l 1800 900 l cp gs col0 s gr 
% Polyline
n 1800 375 m 3150 375 l 3150 600 l 1800 600 l cp gs col0 s gr 
% Polyline
 [60] 0 sd
n 825 600 m 1800 75 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 825 1050 m 1800 1500 l gs col0 s gr  [] 0 sd
% Polyline
gs  clippath
3294 1080 m 3150 1050 l 3294 1020 l 3135 1020 l 3135 1080 l cp
clip
n 3150 1050 m 3600 1050 l gs col7 0.90 shd ef gr gs col0 s gr gr

% arrowhead
n 3294 1080 m 3150 1050 l 3294 1020 l 3270 1050 l 3294 1080 l  cp gs 0.00 setgray ef gr  col0 s
/Times-Roman ff 180.00 scf sf
75 750 m
gs 1 -1 sc (KSP) col0 sh gr
/Times-Roman ff 180.00 scf sf
900 750 m
gs 1 -1 sc (Active) col0 sh gr
/Times-Roman ff 180.00 scf sf
900 975 m
gs 1 -1 sc (Process) col0 sh gr
/Times-Roman ff 180.00 scf sf
225 1725 m
gs 1 -1 sc (Process Table) col0 sh gr
/Times-Roman ff 180.00 scf sf
1875 1425 m
gs 1 -1 sc (Capability Chain) col0 sh gr
/Times-Roman ff 180.00 scf sf
2100 1125 m
gs 1 -1 sc (Save Area) col0 sh gr
/Times-Roman ff 180.00 scf sf
1875 825 m
gs 1 -1 sc (Capability Regs) col0 sh gr
/Times-Roman ff 180.00 scf sf
1950 1725 m
gs 1 -1 sc (Process Entry) col0 sh gr
/Times-Roman ff 180.00 scf sf
3225 975 m
gs 1 -1 sc (KSP) col0 sh gr
/Times-Roman ff 180.00 scf sf
1875 525 m
gs 1 -1 sc (Proc. Node Ptrs) col0 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 2040 1414 a Fh(Figure)j(8)p Fq(.)29 b(Sa)n(v)n(e)23
b(area)2165 1673 y Fm(A)j(Pentium)g(implementation)e(challenges)h(re)o
(gister)h(sa)n(v)o(e)h(de-)2040 1764 y(sign.)e(The)19
b(sa)n(v)o(ed)g(state)i(has)e(an)h(irre)o(gular)e(format)g(\(the)h
Fa(err)o(or)g Fm(\002eld)2040 1855 y(is)j(not)f(consistently)f(sa)n(v)o
(ed\))g(and)h(is)g(not)g(self)h(describing)d(\(the)i(trap)2040
1947 y(number)c(is)j(not)e(made)h(easily)g(a)n(v)n(ailable)f(by)g(the)h
(hardw)o(are\).)k(Thus,)2040 2038 y(e)n(v)o(ery)28 b(hardw)o(are)g
(interrupt)g(and)h(e)o(xception)e(has)j(its)g(o)n(wn)f(k)o(ernel)2040
2129 y(entry)21 b(point.)30 b(This)23 b(entry)e(point)g(appends)g(the)h
(error)f(v)n(alue)g(if)i(nec-)2040 2221 y(essary)d(and)e(inserts)i(an)g
(identifying)d(trap)i(number)f(onto)g(the)i(stack;)2040
2312 y(it)33 b(then)e(branches)g(to)h(a)h(common)d(interrupt)h(handler)
-5 b(.)59 b(Re)o(gister)2040 2403 y(sa)n(v)o(e)16 b(is)h(further)e
(complicated)f(by)i(the)g(f)o(act)g(that)g(the)g(processor)f(may)2040
2495 y(be)29 b(in)g(either)f(\223V)-5 b(irtual)28 b(8086\224)g(mode)f
(or)i(protected)e(mode)h(when)2040 2586 y(the)23 b(interrupt)f(occurs.)
33 b(ER)m(OS)23 b(supports)f(both)h(modes.)33 b(The)22
b(state)2040 2677 y(sa)n(v)o(ed)c(to)g(the)g(k)o(ernel)f(stack)h(dif)n
(fers)f(according)f(to)i(mode.)23 b(The)17 b(k)o(er)n(-)2040
2769 y(nel)i(therefore)d(k)o(eeps)j(track)e(of)i(which)f(mode)f(the)i
(application)e(is)i(in)2040 2860 y(and)25 b(adjusts)i(the)f(k)o(ernel)f
(sa)n(v)o(e)h(area)f(pointer)g(accordingly)f(before)2040
2951 y(dispatching)19 b(the)h(process.)2040 3189 y Fo(4.4)99
b(Capability)25 b(in)l(v)o(ocation)2040 3336 y Fm(Capability)20
b(in)m(v)n(ocations)f(di)n(vide)g(into)h(tw)o(o)h(cases:)26
b(f)o(ast)21 b(path)e(inter)n(-)2040 3428 y(process)h(in)m(v)n(ocation)
e(and)i(the)g(general)f(in)m(v)n(ocation)f(mechanism.)2165
3519 y(The)f(interprocess)g(in)m(v)n(ocation)f(f)o(ast)j(path)f(is)h
(based)e(entirely)h(on)2040 3610 y(the)32 b(machine)f(speci\002c)h
(process)g(structure.)59 b(It)32 b(is)h(implemented)2040
3702 y(in)26 b(assembly)f(code,)g(and)g(handles)g(the)g(case)h(in)g
(which)f(the)g(recip-)2040 3793 y(ient)g(process)f(is)h(prepared)e(and)
h(all)h(mappings)e(for)h(the)h(necessary)2040 3884 y(sender)i(and)h
(recipient)f(data)h(pages)g(are)g(present)f(in)i(the)f(page)f(ta-)2040
3976 y(bles)g(with)g(v)n(alid)f(permissions.)44 b(If)27
b(preparation)d(is)k(needed,)e(or)h(if)2040 4067 y(mapping)15
b(entries)i(need)f(to)h(be)f(constructed,)g(the)h(f)o(ast)g(path)g(is)g
(aban-)2040 4158 y(doned)i(in)h(f)o(a)n(v)n(or)g(of)g(the)g(general)f
(path.)2165 4250 y(The)26 b(general)f(in)m(v)n(ocation)g(path)h(uses)h
(the)g(processor)e(speci\002c)2040 4341 y(mapping)g(structures)h(to)h
(a)n(v)n(oid)f(tra)n(v)o(ersing)g(node)g(trees)h(unneces-)2040
4432 y(sarily)-5 b(,)27 b(b)n(ut)e(f)o(alls)i(back)e(to)h(node)e(tree)i
(tra)n(v)o(ersal)f(when)h(necessary)-5 b(.)2040 4524
y(It)18 b(handles)g(certain)f(cases)i(omitted)e(by)h(the)g(f)o(ast)g
(path)g(\226)g(notably)e(in-)2040 4615 y(v)n(ocations)j(that)g(change)f
(the)h(number)f(of)h(running)e(processes)i(\(cre-)2040
4706 y(ate)31 b(or)g(delete)f(them\).)56 b(All)32 b(cases)f(are)g
(handled)e(by)i(the)f(general)2040 4798 y(implementation.)2040
5035 y Fo(4.5)99 b(Summary)2040 5183 y Fm(ER)m(OS)23
b(stores)g(mapping)d(and)i(process)g(state)h(in)f(a)h(machine\226inde-)
2040 5274 y(pendent)g(data)h(structure:)32 b(the)25 b(node.)36
b(This)24 b(common)f(underlying)2040 5365 y(representation)d
(simpli\002es)i(both)f(checkpointing)e(and)i(storage)g(al-)1878
5726 y(178)p eop
%%Page: 179 10
179 9 bop -152 81 a Fm(location,)34 b(and)e(means)g(that)g(system)h
(resources)e(\223run)g(out\224)h(only)-152 172 y(when)20
b(the)g(a)n(v)n(ailable)g(disk)g(space)g(is)h(e)o(xhausted.)-27
263 y(This)k(state)i(is)f(con)m(v)o(erted)d(on)i(demand)f(to)h(the)h
(representation)-152 355 y(required)18 b(by)g(the)h(hardw)o(are)f(for)g
(ef)n(\002cient)h(use.)25 b(V)-9 b(arious)18 b(represen-)-152
446 y(tation)29 b(and)g(chaining)f(techniques)f(are)j(used)e(in)i(lieu)
f(of)g(con)m(v)o(en-)-152 537 y(tional)g(data)f(structures)g(to)h
(support)e(in)m(v)n(alidation)g(and)h(page)g(out.)-152
629 y(The)21 b(high-performance)c(paths)22 b(of)f(the)g(system)h
(operate)e(against)h(a)-152 720 y(machine-speci\002c)h(process)g
(structure)g(similar)i(to)f(that)g(of)g(L4)g(and)-152
811 y(similar)e(microk)o(ernels.)-152 1058 y Fo(5)100
b(System)25 b(ser)o(vices)-152 1235 y Fm(Ha)n(ving)31
b(described)g(the)g(k)o(ernel)g(implementation,)h(we)g(can)g(no)n(w)
-152 1327 y(sk)o(etch)21 b(ho)n(w)f(these)h(primiti)n(v)o(es)e(are)i
(used)f(to)h(pro)o(vide)e(higher)n(-le)n(v)o(el)-152
1418 y(abstractions)32 b(customarily)f(implemented)f(by)i(supervisor)e
(code.)-152 1509 y(T)-7 b(o)29 b(illustrate,)i(we)e(will)g(describe)f
(the)g(implementation)f(of)h(three)-152 1601 y(basic)i(services:)44
b(the)30 b(storage)f(allocator)m(,)h(virtual)f(cop)o(y)g(memory)-152
1692 y(objects)19 b(and)g(the)g(process)f(constructor)-5
b(.)24 b(All)19 b(of)g(these)g(services)g(are)-152 1783
y(implemented)g(by)g(application)g(code.)-152 2020 y
Fo(5.1)99 b(Storage)26 b(allocation)-152 2168 y Fm(Storage)j
(allocation)f(is)j(performed)c(by)i(the)g Fi(space)g(bank)p
Fm(,)i(which)-152 2259 y(o)n(wns)22 b(all)g(system)f(storage.)29
b(The)21 b(space)h(bank)e(application)g(imple-)-152 2350
y(ments)29 b(a)h(hierarchy)d(of)i(logical)g(banks,)h(each)f(of)g(which)
g(obtains)-152 2442 y(its)c(storage)f(from)f(its)i(parent.)36
b(The)24 b(root)f(of)h(this)h(hierarchy)c(is)k(the)-152
2533 y Fi(prime)g(space)g(bank)p Fm(.)39 b(Ev)o(ery)24
b(node)g(and)g(page)h(used)f(by)h(an)g(appli-)-152 2624
y(cation)31 b(is)i(allocated)d(from)h(some)g(particular)f(space)i
(bank.)58 b(The)-152 2716 y(f)o(act)27 b(that)g(all)g(banks)g(are)f
(implemented)f(by)h(the)h(same)g(process)f(is)-152 2807
y(not)e(visible)h(to)f(client)h(applications.)36 b(The)24
b(term)g(\223space)g(bank\224)f(is)-152 2898 y(therefore)c(used)h(to)g
(refer)f(to)i(a)f Fn(lo)o(gical)g Fm(space)g(bank.)-27
2990 y(A)h(space)f(bank)f(performs)f(four)h(functions:)-44
3139 y Ff(\017)37 b Fm(It)30 b(allocates)h(nodes)e(and)g(pages,)j
(optionally)d(imposing)f(an)35 3230 y(allocation)19 b(limit.)-44
3351 y Ff(\017)37 b Fm(It)g(tracks)f(the)h(identities)g(\(the)f(OIDs\))
h(of)f(the)h(pages)f(and)35 3442 y(nodes)20 b(that)g(it)h(has)f
(allocated.)-44 3563 y Ff(\017)37 b Fm(It)c(ensures)f(that)g(all)h
(capabilities)g(to)f(a)h(node)f(or)g(page)f(are)35 3655
y(rendered)18 b(in)m(v)n(alid)h(when)h(the)g(object)g(is)h
(deallocated.)-44 3775 y Ff(\017)37 b Fm(It)27 b(pro)o(vides)e(a)i(de)o
(gree)e(of)h(storage)g(locality)-5 b(.)43 b(Objects)27
b(allo-)35 3867 y(cated)20 b(from)e(a)j(gi)n(v)o(en)d(bank)h(are)h
(allocated)f(from)f(contiguous)35 3958 y(e)o(xtents)i(on)g(the)g
(underlying)d(disk.)-27 4107 y(When)e(a)h(space)g(bank)e(is)j(destro)o
(yed,)e(objects)g(allocated)g(by)g(that)-152 4199 y(bank)22
b(and)h(all)h(sub-banks)d(are)i(either)f(deallocated)g(or)h(returned)e
(to)-152 4290 y(the)d(control)f(of)h(its)h(parent)f(bank.)23
b(Space)18 b(banks)f(therefore)f(pro)o(vide)-152 4381
y(a)28 b(form)e(of)h(e)o(xplicit)f(storage)h(reclamation.)44
b(One)27 b(w)o(ay)g(to)g(ensure)-152 4473 y(that)e(a)h(subsystem)e(is)i
(completely)d(dead)i(is)g(to)g(destro)o(y)g(the)f(space)-152
4564 y(bank)19 b(from)h(which)f(its)i(storage)f(w)o(as)h(allocated.)-27
4655 y(Space)28 b(banks)g(manage)f(e)o(xtents)h(dynamically;)j
(applications)-152 4747 y(can)h(ensure)g(locality)g(of)g(storage)g(for)
g(tw)o(o)g(objects)g(by)g(creating)-152 4838 y(per)n(-object)18
b(sub-banks,)g(creating)h(the)g(objects,)g(and)g(then)h(destro)o(y-)
-152 4929 y(ing)15 b(the)g(bank)g(without)f(reclaiming)g(the)h
(storage.)23 b(Banks)15 b(are)g(cheap)-152 5021 y(to)25
b(create)g(and)g(occup)o(y)e(minimal)h(storage)h(\(one)f(node)g(per)g
(bank\).)-152 5112 y(The)o(y)d(are)h(therefore)e(well)i(suited)f(to)h
(re)o(gion-based)d(storage)i(man-)-152 5203 y(agement)h([2].)34
b(The)23 b(uni\002cation)f(of)h(e)o(xtent)g(management)e(and)i(re-)-152
5295 y(gion)28 b(management)e(pro)o(vided)g(by)i(this)h(use)g(of)f
(space)g(banks)g(e)o(x-)-152 5386 y(tends)c(the)h(locality)f(adv)n
(antages)e(of)i(re)o(gion)f(management)f(to)j(per)n(-)-152
5477 y(manent)19 b(storage.)2040 81 y Fo(5.2)99 b(V)l(irtual)25
b(copy)h(spaces)2040 228 y Fm(A)36 b(virtual)e(cop)o(y)h(space)g(is)h
(a)f(cop)o(y-on-write)e(v)o(ersion)g(of)i(some)2040 319
y(other)17 b(space.)24 b(Initially)-5 b(,)17 b(the)g(ne)n(w)g(space)h
(consists)g(of)f(a)h(single)f(node)2040 411 y(containing)f(a)i
(capability)f(to)h(the)g(original)f(object)g(and)h(a)g(capability)2040
502 y(to)28 b(a)g(cop)o(y-on-write)d(manager)-5 b(.)47
b(Writes)29 b(to)f(uncopied)e(pages)h(in-)2040 593 y(duce)c(access)g
(violations)f(that)i(are)f(directed)f(to)h(this)h(manager)-5
b(.)32 b(As)2040 685 y(each)18 b(page)f(in)h(the)g(ne)n(w)f(structure)g
(is)i(modi\002ed,)e(read-write)g(copies)2040 776 y(are)27
b(made)f(of)h(the)g(tar)o(get)f(page)g(and)h(an)o(y)f(necessary)g
(nodes)h(\(Fig-)2040 867 y(ure)22 b(9\).)30 b(Only)22
b(the)g(modi\002ed)f(portion)f(of)i(the)g(structure)f(is)j(copied.)2040
959 y(Each)17 b(copied)g(page)g(and)g(node)g(is)h(allocated)f(from)g
(the)h(space)f(bank.)2040 1050 y(The)j(bank)g(is)i(pro)o(vided)c(by)i
(the)g(client)h(of)f(the)h(virtual)f(cop)o(y)g(object)2040
1141 y(when)29 b(the)h(cop)o(y)e(is)j(\002rst)f(created;)j(storage)c
(is)i(accounted)c(to)j(the)2040 1233 y(user)-5 b(.)2153
1325 y
 13945733 9209446 0 0 13945733 9209446 startTexFig
 2153 1325 a
%%BeginDocument: vcs.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: vcs.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:24 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 212 140
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-3.0 147.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /endash 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Roman /Times-Roman-iso isovec ReEncode
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 3440 m -1000 -1000 l 4578 -1000 l 4578 3440 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Ellipse
n 3300 450 270 270 0 360 DrawEllipse gs col0 s gr

/Times-Roman-iso ff 150.00 scf sf
3150 450 m
gs 1 -1 sc (Space) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
3150 600 m
gs 1 -1 sc (Bank) col0 sh gr
% Ellipse
n 3262 1275 293 293 0 360 DrawEllipse gs col0 s gr

/Times-Roman-iso ff 150.00 scf sf
3150 1200 m
gs 1 -1 sc (VCS) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
3000 1350 m
gs 1 -1 sc (Handler) col0 sh gr
% Polyline
gs  clippath
306 495 m 450 525 l 306 555 l 465 555 l 465 495 l cp
clip
n 75 525 m 450 525 l gs col0 s gr gr

% arrowhead
n 306 495 m 450 525 l 306 555 l 330 525 l 306 495 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
306 720 m 450 750 l 306 780 l 465 780 l 465 720 l cp
clip
n 75 750 m 450 750 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 306 720 m 450 750 l 306 780 l 330 750 l 306 720 l  cp gs 0.00 setgray ef gr  col0 s
/Times-Roman-iso ff 150.00 scf sf
525 825 m
gs 1 -1 sc (read-only) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
525 600 m
gs 1 -1 sc (read-write) col0 sh gr
% Polyline
n 1350 1650 m 2175 1650 l 2175 1875 l 1350 1875 l cp gs col0 s gr 
% Polyline
n 300 1650 m 1125 1650 l 1125 1875 l 300 1875 l cp gs col0 s gr 
% Polyline
n 825 975 m 1650 975 l 1650 1200 l 825 1200 l cp gs col0 s gr 
% Polyline
n 1350 2250 m 1500 2250 l 1500 2400 l 1350 2400 l cp gs col7 0.75 shd ef gr gs col0 s gr 
% Polyline
n 825 2250 m 975 2250 l 975 2400 l 825 2400 l cp gs col0 s gr 
% Polyline
n 600 2250 m 750 2250 l 750 2400 l 600 2400 l cp gs col0 s gr 
% Polyline
n 375 2250 m 525 2250 l 525 2400 l 375 2400 l cp gs col0 s gr 
% Polyline
n 150 2250 m 300 2250 l 300 2400 l 150 2400 l cp gs col0 s gr 
% Polyline
 [60] 0 sd
gs  clippath
1455 1506 m 1425 1650 l 1395 1506 l 1395 1665 l 1455 1665 l cp
clip
n 975 1050 m 975 1275 l 1425 1275 l 1425 1650 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1455 1506 m 1425 1650 l 1395 1506 l 1425 1530 l 1455 1506 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
780 1506 m 750 1650 l 720 1506 l 720 1665 l 780 1665 l cp
clip
n 2025 1050 m 2025 1350 l 750 1350 l 750 1650 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 780 1506 m 750 1650 l 720 1506 l 750 1530 l 780 1506 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
630 1506 m 600 1650 l 570 1506 l 570 1665 l 630 1665 l cp
clip
n 900 1050 m 900 1275 l 600 1275 l 600 1650 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 630 1506 m 600 1650 l 570 1506 l 600 1530 l 630 1506 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
255 2106 m 225 2250 l 195 2106 l 195 2265 l 255 2265 l cp
clip
n 375 1725 m 375 1950 l 225 1950 l 225 2250 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 255 2106 m 225 2250 l 195 2106 l 225 2130 l 255 2106 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
480 2106 m 450 2250 l 420 2106 l 420 2265 l 480 2265 l cp
clip
n 450 1725 m 450 2250 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 480 2106 m 450 2250 l 420 2106 l 450 2130 l 480 2106 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
705 2106 m 675 2250 l 645 2106 l 645 2265 l 705 2265 l cp
clip
n 525 1725 m 525 2025 l 675 2025 l 675 2250 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 705 2106 m 675 2250 l 645 2106 l 675 2130 l 705 2106 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
930 2106 m 900 2250 l 870 2106 l 870 2265 l 930 2265 l cp
clip
n 600 1725 m 600 1950 l 900 1950 l 900 2250 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 930 2106 m 900 2250 l 870 2106 l 900 2130 l 930 2106 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
1455 2106 m 1425 2250 l 1395 2106 l 1395 2265 l 1455 2265 l cp
clip
n 1425 1725 m 1425 2250 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1455 2106 m 1425 2250 l 1395 2106 l 1425 2130 l 1455 2106 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 1575 2250 m 1725 2250 l 1725 2400 l 1575 2400 l cp gs col0 s gr 
% Polyline
 [60] 0 sd
gs  clippath
1680 2106 m 1650 2250 l 1620 2106 l 1620 2265 l 1680 2265 l cp
clip
n 1500 1725 m 1500 1950 l 1650 1950 l 1650 2250 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1680 2106 m 1650 2250 l 1620 2106 l 1650 2130 l 1680 2106 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
1869 2355 m 1725 2325 l 1869 2295 l 1710 2295 l 1710 2355 l cp
clip
n 2550 1725 m 2550 1950 l 2025 1950 l 2025 2325 l 1725 2325 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1869 2355 m 1725 2325 l 1869 2295 l 1845 2325 l 1869 2355 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 1950 975 m 2775 975 l 2775 1200 l 1950 1200 l cp gs col0 s gr 
% Polyline
gs  clippath
2580 1506 m 2550 1650 l 2520 1506 l 2520 1665 l 2580 1665 l cp
clip
n 2100 1050 m 2100 1275 l 2550 1275 l 2550 1650 l gs col0 s gr gr

% arrowhead
n 2580 1506 m 2550 1650 l 2520 1506 l 2550 1530 l 2580 1506 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 2400 1650 m 3225 1650 l 3225 1875 l 2400 1875 l cp gs col0 s gr 
% Polyline
n 2400 2250 m 2550 2250 l 2550 2400 l 2400 2400 l cp gs col0 s gr 
% Polyline
gs  clippath
2505 2106 m 2475 2250 l 2445 2106 l 2445 2265 l 2505 2265 l cp
clip
n 2475 1725 m 2475 2250 l gs col0 s gr gr

% arrowhead
n 2505 2106 m 2475 2250 l 2445 2106 l 2475 2130 l 2505 2106 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2355 831 m 2325 975 l 2295 831 l 2295 990 l 2355 990 l cp
clip
n 2325 450 m 2325 975 l gs col0 s gr gr

% arrowhead
n 2355 831 m 2325 975 l 2295 831 l 2325 855 l 2355 831 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2856 1320 m 3000 1350 l 2856 1380 l 3015 1380 l 3015 1320 l cp
clip
n 2700 1050 m 2700 1350 l 3000 1350 l gs col0 s gr gr

% arrowhead
n 2856 1320 m 3000 1350 l 2856 1380 l 2880 1350 l 2856 1320 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
3270 819 m 3300 675 l 3330 819 l 3330 660 l 3270 660 l cp
clip
n 3300 975 m 3300 675 l gs col0 s gr gr

% arrowhead
n 3270 819 m 3300 675 l 3330 819 l 3300 795 l 3270 819 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
1380 831 m 1350 975 l 1320 831 l 1320 990 l 1380 990 l cp
clip
n 1350 450 m 1350 975 l gs col0 s gr gr

% arrowhead
n 1380 831 m 1350 975 l 1320 831 l 1350 855 l 1380 831 l  cp gs 0.00 setgray ef gr  col0 s
/Times-Roman-iso ff 150.00 scf sf
2625 2250 m
gs 1 -1 sc (\(copy of) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
2625 2400 m
gs 1 -1 sc (shaded page\)) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
975 225 m
gs 1 -1 sc (Original Space) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
1050 375 m
gs 1 -1 sc (\(read only\)) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
2100 225 m
gs 1 -1 sc (After) col0 sh gr
/Times-Roman-iso ff 150.00 scf sf
1875 375 m
gs 1 -1 sc (Copy on Write) col0 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 2040 2666 a Fh(Figure)23 b(9)p Fq(.)29 b(Vir)s(tual)24
b(cop)n(y)e(implementation.)2165 2942 y Fm(T)-7 b(o)25
b(create)f(a)i(lazy)e(cop)o(y)h(of)f(an)h(e)o(xisting)f(memory)f
(space,)j(the)2040 3033 y(manager)14 b(for)h(that)g(space)h(is)g(ask)o
(ed)f(to)h(freeze)e(the)i(space.)23 b(The)15 b(man-)2040
3125 y(ager)22 b(returns)f(a)i Fi(constructor)g Fm(\(Section)e(5.3\))h
(which)f(will)i(produce)2040 3216 y(copies)h(of)f(the)h(original)f
(space.)37 b(Demand)22 b(zero)i(objects)g(are)g(real-)2040
3307 y(ized)f(as)h(virtual)f(copies)g(of)g(the)h(\223primordial)d(zero)
i(space,)-6 b(\224)24 b(which)2040 3399 y(is)d(part)f(of)g(the)g
(hand-constructed)d(initial)j(system)h(image.)2165 3490
y(W)-7 b(e)39 b(ha)n(v)o(e)e(pre)n(viously)f(noted)g(that)i(tra)n(v)o
(ersing)f(the)h(address)2040 3581 y(space)30 b(tree)g(is)i(e)o(xpensi)n
(v)o(e.)53 b(The)29 b(virtual)h(cop)o(y)f(handler)g(reduces)2040
3673 y(this)g(cost)g(by)g(remembering)c(the)k(location)f(of)g(the)h
(last)g(modi\002ed)2040 3764 y(page)20 b(and)f(its)i(containing)e
(node.)k(If)d(the)h(ne)o(xt)e(modi\002ed)g(page)g(f)o(alls)2040
3855 y(within)25 b(the)h(same)f(leaf)g(node,)h(no)f(tra)n(v)o(ersal)f
(is)j(required.)38 b(Empir)n(-)2040 3947 y(ically)-5
b(,)25 b(this)f(simple)g(method)f(matches)h(common)e(memory)h(usage)
2040 4038 y(patterns)30 b(well,)k(and)c(reduces)g(the)g(ef)n(fecti)n(v)
o(e)g(tra)n(v)o(ersal)g(o)o(v)o(erhead)2040 4129 y(by)19
b(a)g(f)o(actor)f(of)h(32.)24 b(In)18 b(the)h(f)o(ast)h(case,)f(a)g
(cop)o(y-on-write)d(page)i(f)o(ault)2040 4221 y(proceeds)h(as)i(follo)n
(ws:)2127 4388 y(1.)37 b(F)o(aulting)42 b(process)h(tak)o(es)g(an)g
(address)f(translation)h(f)o(ault.)2227 4480 y(K)n(ernel)17
b(w)o(alks)g(address)g(space)g(tree,)h(locates)f(no)g(translation.)2127
4601 y(2.)37 b(K)n(ernel)15 b(synthesizes)g(an)h(upcall)f(to)h(the)g
(virtual)f(cop)o(y)g(handler)2227 4692 y(\(conte)o(xt)j(switch\).)2127
4813 y(3.)37 b(V)-5 b(irtual)30 b(cop)o(y)f(handler)g(purchases)g(a)i
(ne)n(w)f(page)f(from)g(the)2227 4905 y(space)19 b(bank,)f(initializes)
i(it,)f(and)g(installs)h(it)g(at)g(the)f(appropri-)2227
4996 y(ate)h(of)n(fset)g(\(tw)o(o)g(conte)o(xt)f(switches\).)2127
5117 y(4.)37 b(V)-5 b(irtual)34 b(cop)o(y)f(handler)f(returns)i(to)g
(the)g(f)o(aulting)f(process,)2227 5209 y(restarting)19
b(the)h(instruction)f(\(conte)o(xt)g(switch\).)2127 5330
y(5.)37 b(F)o(aulting)49 b(process)g(tak)o(es)h Fn(another)h
Fm(address)e(translation)2227 5421 y(f)o(ault.)35 b(K)n(ernel)23
b(w)o(alks)h(address)g(space)f(tree,)i(locates)f(a)g(v)n(alid)1878
5726 y(179)p eop
%%Page: 180 11
180 10 bop 35 81 a Fm(translation,)38 b(and)c(silently)i(restarts)f
(the)g(f)o(aulting)f(instruc-)35 172 y(tion.)-152 327
y(The)18 b(performance)d(of)j(this)g(implementation)e(is)j(discussed)e
(in)h(Sec-)-152 418 y(tion)i(6.)-152 653 y Fo(5.3)99
b(Pr)n(ocess)25 b(construction)-152 801 y Fm(As)36 b(with)g(virtual)e
(copies,)39 b(process)34 b(creation)h(in)g(ER)m(OS)h(is)g(per)n(-)-152
892 y(formed)29 b(by)h(application)e(code.)55 b(Ev)o(ery)29
b(application)f(has)j(an)f(as-)-152 983 y(sociated)c
(\223constructor\224)d(that)j(kno)n(ws)f(ho)n(w)g(to)h(f)o(abricate)f
(ne)n(w)h(in-)-152 1074 y(stances)d(of)f(that)h(application.)30
b(Constructors)21 b(are)h(themselv)o(es)g(ap-)-152 1166
y(plications,)c(which)f(come)g(from)f(the)i(metaconstructor)-5
b(.)22 b(The)17 b(meta-)-152 1257 y(constructor)g(is)i(part)f(of)h(the)
f(hand-constructed)d(initial)k(system)g(im-)-152 1348
y(age.)-27 1440 y(Constructors)e(are)i(trusted)f(objects)g(whose)h
(design)e(purpose)g(is)-152 1531 y(to)30 b(certify)e(properties)f
(about)i(the)g(program)e(instances)h(the)o(y)h(cre-)-152
1622 y(ate.)58 b(In)31 b(particular)m(,)h(the)f(constructor)e(is)j
(able)f(to)g(tell)g(the)g(client)-152 1714 y(whether)17
b(the)h(ne)n(wly)f(f)o(abricated)g(process)g(has)h(an)o(y)g(ability)f
(to)h(com-)-152 1805 y(municate)26 b(with)g(third)g(parties)h(at)g(the)
f(time)h(of)f(its)i(creation.)43 b(The)-152 1896 y(constructor)22
b(is)i(able)f(to)g(perform)e(this)j(certi\002cation)e(based)h(solely)
-152 1988 y(on)30 b(inspection)g(of)g(the)g(program')-5
b(s)29 b(initial)h(capabilities,)j Fn(without)-152 2079
y(inspecting)f(its)h(code)p Fm(.)61 b(This)32 b(means)g(that)h
(standard)e(utility)i(pro-)-152 2170 y(grams)25 b(can)g(be)h(used)f(on)
g(sensiti)n(v)o(e)g(information)e(without)i(risk)h(of)-152
2262 y(information)18 b(leakage.)120 2366 y
 11446026 7038648 0 0 11446026 7038648 startTexFig
 120 2366
a
%%BeginDocument: proccre.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: proccre.fig
%%Creator: fig2dev Version 3.2 Patchlevel 1
%%CreationDate: Tue Oct 12 15:55:24 1999
%%For: shapj@bonzo.watson.ibm.com (Jonathan Shapiro)
%%Orientation: Portrait
%%BoundingBox: 0 0 174 107
%%Pages: 0
%%BeginSetup
%%EndSetup
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-8.0 112.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /endash 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Roman /Times-Roman-iso isovec ReEncode
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
10 setmiterlimit
n -1000 2853 m -1000 -1000 l 4030 -1000 l 4030 2853 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Rotated Ellipse
gs
488 1500 tr
-270.001 rot
n 0 0 346 346 0 360 DrawEllipse 270.001 rot
gs col0 s gr
gr

/Times-Roman-iso ff 180.00 scf sf
225 1650 m
gs 1 -1 sc (Instance) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
300 1425 m
gs 1 -1 sc (Hello) col0 sh gr
% Ellipse
n 2663 1500 346 346 0 360 DrawEllipse gs col0 s gr

/Times-Roman-iso ff 180.00 scf sf
2475 1425 m
gs 1 -1 sc (Space) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2475 1650 m
gs 1 -1 sc (Bank) col0 sh gr
% Rotated Ellipse
gs
2663 450 tr
-270.001 rot
n 0 0 346 346 0 360 DrawEllipse 270.001 rot
gs col0 s gr
gr

% Rotated Ellipse
gs
1613 450 tr
-270.001 rot
n 0 0 346 346 0 360 DrawEllipse 270.001 rot
gs col0 s gr
gr

% Rotated Ellipse
gs
525 450 tr
-270.001 rot
n 0 0 346 346 0 360 DrawEllipse 270.001 rot
gs col0 s gr
gr

% Polyline
 [60] 0 sd
gs  clippath
1131 420 m 1275 450 l 1131 480 l 1290 480 l 1290 420 l cp
clip
n 825 450 m 1275 450 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1131 420 m 1275 450 l 1131 480 l 1155 450 l 1131 420 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2181 345 m 2325 375 l 2181 405 l 2340 405 l 2340 345 l cp
clip
n 1950 375 m 2325 375 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2181 345 m 2325 375 l 2181 405 l 2205 375 l 2181 345 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2094 630 m 1950 600 l 2094 570 l 1935 570 l 1935 630 l cp
clip
n 2325 600 m 1950 600 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2094 630 m 1950 600 l 2094 570 l 2070 600 l 2094 630 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2805 1056 m 2775 1200 l 2745 1056 l 2745 1215 l 2805 1215 l cp
clip
n 2775 750 m 2775 1200 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2805 1056 m 2775 1200 l 2745 1056 l 2775 1080 l 2805 1056 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2595 969 m 2625 825 l 2655 969 l 2655 810 l 2595 810 l cp
clip
n 2625 1125 m 2625 825 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2595 969 m 2625 825 l 2655 969 l 2625 945 l 2595 969 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
878 1202 m 750 1275 l 838 1157 l 719 1263 l 759 1307 l cp
clip
n 1425 675 m 750 1275 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 878 1202 m 750 1275 l 838 1157 l 840 1195 l 878 1202 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
420 894 m 450 750 l 480 894 l 480 735 l 420 735 l cp
clip
n 450 1125 m 450 750 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 420 894 m 450 750 l 480 894 l 450 870 l 420 894 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
969 1605 m 825 1575 l 969 1545 l 810 1545 l 810 1605 l cp
clip
n 2325 1575 m 825 1575 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 969 1605 m 825 1575 l 969 1545 l 945 1575 l 969 1605 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
 [60] 0 sd
gs  clippath
2181 1395 m 2325 1425 l 2181 1455 l 2340 1455 l 2340 1395 l cp
clip
n 825 1425 m 2325 1425 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 2181 1395 m 2325 1425 l 2181 1455 l 2205 1425 l 2181 1395 l  cp gs 0.00 setgray ef gr  col0 s
/Times-Roman-iso ff 180.00 scf sf
300 525 m
gs 1 -1 sc (Client) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2400 450 m
gs 1 -1 sc (Process) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2400 600 m
gs 1 -1 sc (Creator) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
1425 375 m
gs 1 -1 sc (Hello) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
1350 525 m
gs 1 -1 sc (Constr-) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
1425 675 m
gs 1 -1 sc (uctor) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
975 375 m
gs 1 -1 sc (1) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2100 300 m
gs 1 -1 sc (2) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2850 1050 m
gs 1 -1 sc (3) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2475 1050 m
gs 1 -1 sc (4) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2100 825 m
gs 1 -1 sc (5) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
975 975 m
gs 1 -1 sc (6) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
1500 1800 m
gs 1 -1 sc (8) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
1500 1350 m
gs 1 -1 sc (7) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
300 1050 m
gs 1 -1 sc (9) col0 sh gr
$F2psEnd
rs

%%EndDocument

 endTexFig
 -152 3432 a Fh(Figure)23 b(10)p Fq(.)29 b(Process)22
b(creation)-27 3685 y Fm(T)-7 b(o)23 b(b)n(uild)g(a)h(ne)n(w)f(process)
g(\(Figure)g(10\),)g(the)g(client)h(in)m(v)n(ok)o(es)e(a)-152
3777 y(constructor)17 b(\(step)h(1\).)24 b(The)17 b(constructor)g(in)m
(v)n(ok)o(es)g(its)i(process)f(cre-)-152 3868 y(ator)g(\(2\),)f(which)g
(purchases)f(nodes)h(from)g(a)h(client-supplied)d(space)-152
3959 y(bank)27 b(\(3,4\))f(and)h(returns)f(a)i(ne)n(w)f(process)g
(\(5\))g(that)g(initially)g(e)o(x)o(e-)-152 4051 y(cutes)e(from)e(a)i
(constructor)n(-supplied,)c(read-only)h(address)i(space.)-152
4142 y(When)k(started)g(\(6\))f(this)h(\223construction)e(space\224)h
(creates)h(a)g(muta-)-152 4233 y(ble)e(cop)o(y)e(of)h(the)g(ne)n(w)g
(program')-5 b(s)23 b(e)o(x)o(ecutable)h(image)g(\(either)h(by)-152
4325 y(cop)o(ying)h(it)j(or)f(by)f(creating)g(a)h(virtual)g(cop)o(y\),)
g(obtaining)e(further)-152 4416 y(space)c(from)f(the)h(space)f(bank)g
(as)h(needed)f(\(7,8\).)28 b(It)22 b(transfers)f(con-)-152
4507 y(trol)26 b(to)g(the)g(ne)n(w)f(process)g(via)h(a)g(\223sw)o(ap)g
(address)g(space)f(and)g(PC\224)-152 4599 y(operation.)30
b(The)22 b(ne)n(w)h(instance)f(performs)f(program)f(speci\002c)j(ini-)
-152 4690 y(tialization)d(and)g(returns)f(\(9\))h(directly)f(to)h(the)h
(client)f(process.)-27 4781 y(Constructors)f(are)h(in)h(practice)e
(used)h(as)h(the)f(standard)g(mecha-)-152 4873 y(nism)h(for)e
(packaging)f(and)i(instantiating)f(programs)f(in)j(ER)m(OS.)-152
5117 y Fo(6)100 b(Ev)o(aluation)-152 5295 y Fm(The)30
b(focus)g(of)g(this)h(paper)e(is)j(a)e(capability)g(system)g(design)g
(mo-)-152 5386 y(ti)n(v)n(ated)e(by)g(performance)d(considerations.)48
b(The)28 b(best)h(means)f(of)-152 5477 y(comparing)15
b(its)k(performance)c(to)i(that)h(of)f(other)g(systems)h(w)o(ould)e(be)
2040 81 y(direct)f(application)f(benchmarks.)21 b(ER)m(OS)16
b(is)h(ne)n(w)e(enough)f(that)i(ap-)2040 172 y(plications)g(ha)n(v)o(e)
f(not)h(yet)g(been)f(ported)g(to)h(it,)h(which)f(precludes)f(this)2040
263 y(comparison)j(at)i(this)g(stage.)25 b(W)-7 b(e)20
b(ha)n(v)o(e)f(chosen)g(microbenchmarks)2040 355 y(as)33
b(our)e(means)g(of)h(e)n(v)n(aluation,)g(inspired)f(by)g(those)h(of)g
Fn(lmbenc)o(h)2040 446 y Fm([34)o(].)43 b(Each)26 b Fn(lmbenc)o(h)f
Fm(benchmark)f(is)j(moti)n(v)n(ated)e(by)h(a)g(real)h(per)n(-)2040
537 y(formance)f(bottleneck)g(from)h(some)h(real)g(application.)47
b(W)-7 b(e)29 b(ha)n(v)o(e)2040 629 y(e)o(xamined)20
b(the)h(constituents)g(of)h Fn(lmbenc)o(h)e Fm(and)h(produced)e(seman-)
2040 720 y(tically)27 b(similar)g(tests)h(for)e(ER)m(OS.)h(As)g(ER)m
(OS)h(does)e(not)h(e)o(xport)e(a)2040 811 y(ra)o(w)i(disk)g(interf)o
(ace)g(and)g(does)g(not)f(yet)i(ha)n(v)o(e)e(a)i(netw)o(orking)d(im-)
2040 903 y(plementation)18 b(we)j(ha)n(v)o(e)f(omitted)f(such)h
(benchmarks.)2165 994 y(The)g(cate)o(gories)g(of)h(operations)f(tested)
h(by)g(the)g Fn(lmbenc)o(h)f Fm(suite)2040 1085 y(are)i(relati)n(v)o
(ely)e(uni)n(v)o(ersal.)28 b(In)21 b(man)o(y)f(cases,)j(operations)d
(with)i(cor)n(-)2040 1177 y(responding)15 b Fn(semantics)j
Fm(are)g(used)g(by)f(nati)n(v)o(e)g(ER)m(OS)i(applications.)2040
1268 y(One)j(w)o(ay)g(to)h(place)f(the)g(performance)d(of)j(ER)m(OS)h
(in)f(conte)o(xt)f(is)i(to)2040 1359 y(compare)c(these)h(operations)f
(to)h(their)g(nearest)g(Linux)f(equi)n(v)n(alents.)2040
1451 y(W)-7 b(e)23 b(ha)n(v)o(e)d(constructed)g(a)i(set)g(of)f(ER)m(OS)
h(microbenchmarks)c(to)k(do)2040 1542 y(so.)41 b(The)26
b(benchmarks)d(are)i(included)f(in)i(the)f(ER)m(OS)h(distrib)n(ution)
2040 1633 y([41)o(].)2165 1725 y(Measurements)h(were)h(made)g(on)g(a)h
(uniprocessor)d(400)i(MHz)2040 1816 y(Pentium)f(II,)g(with)h(192)e(me)o
(gabytes)g(of)h(memory)-5 b(.)44 b(The)28 b Fn(lmbenc)o(h)2040
1907 y Fm(utilities)d(report)e(memory)g(latencies)i(of)f(7)g(ns,)i(69)e
(ns,)h(and)f(153)g(ns)2040 1999 y(for)15 b(the)g(le)n(v)o(el)g(one,)h
(le)n(v)o(el)e(tw)o(o,)j(and)d(main)h(memories,)g(respecti)n(v)o(ely)-5
b(.)2040 2090 y(Linux)18 b(measurements,)g(where)g(gi)n(v)o(en,)g(are)h
(obtained)f(from)g(k)o(ernel)2040 2181 y(v)o(ersion)29
b(2.2.5-22)f(on)i(the)g(same)g(hardw)o(are)f(using)h(the)g(standard)
2040 2273 y Fn(lmbenc)o(h)25 b Fm(distrib)n(ution.)41
b(The)26 b(Linux)f(k)o(ernel)g(measured)g(supports)2040
2364 y(symmetric)j(multiprocessing.)50 b(Linux)27 b(measurements)h
(reported)2040 2455 y(here)e(are)h(made)f(using)g(a)h(k)o(ernel)f(with)
h(multiprocessing)e(support)2040 2547 y(compiled)19 b(out.)2165
2638 y(The)26 b(results)h(are)f(summarized)f(in)i(Figure)e(11.)44
b(The)26 b(bars)g(are)2040 2729 y(normalized)15 b(relati)n(v)o(e)i(to)g
(the)h(Linux)e(timings.)23 b(Except)17 b(for)f(the)i(pipe)2040
2821 y(bandwidth)25 b(benchmark,)i(a)g(shorter)g(bar)g(represents)f(a)i
(better)e(re-)2040 2912 y(sult.)g(Actual)20 b(timings)g(and)f(percent)g
(loss/gain)h(are)g(also)g(sho)n(wn.)2040 3149 y Fo(6.1)99
b(K)n(er)o(nel)24 b(in)l(v)o(ocation)h(baseline)2040
3297 y Fm(The)e(\223tri)n(vial)f(system)i(call\224)f(benchmark)d(is)k
(intended)d(to)j(e)o(xamine)2040 3388 y(the)j(minimum)f(cost)i(of)f
(entering)f(and)h(e)o(xiting)f(the)i(k)o(ernel)e(while)2040
3479 y(performing)31 b(minimal)j(w)o(ork.)66 b(In)33
b(POSIX)i(this)g(is)g(customarily)2040 3571 y(tested)f(with)g(the)f
Fn(g)o(etppid)r Fm(\(\))f(operation)f(\(0.7)i Fg(\026)p
Fm(s\).)65 b(The)34 b(nearest)2040 3662 y(ER)m(OS)d(equi)n(v)n(alent)e
(is)j(the)f Fn(typeof)42 b Fm(operation)29 b(on)h(a)h(number)e(ca-)2040
3753 y(pability)20 b(\(1.6)f Fg(\026)p Fm(s\).)2165 3845
y(The)25 b(dif)n(ference)e(re\003ects)j(the)g(dif)n(ference)d(in)j(the)
f(tw)o(o)h(system)2040 3936 y(architectures.)h(ER)m(OS)22
b(capability)f(in)m(v)n(ocations)f(must)h(test)h(to)g(v)o(er)n(-)2040
4027 y(ify)g(that)h(the)g(tar)o(get)e(object)i(is)g(prepared,)e(and)h
(must)h(allo)n(w)f(for)g(the)2040 4119 y(possibility)27
b(that)h(control)e(will)j(be)e(returned)f(to)i(some)g(other)e(pro-)2040
4210 y(cess.)54 b(Also,)32 b(all)f(capability)d(in)m(v)n(ocations)g(ha)
n(v)o(e)h(the)h(same)g(ar)o(gu-)2040 4301 y(ment)22 b(structure)g
(\(Section)g(3.3\).)31 b(The)23 b(tri)n(vial)f(ER)m(OS)h(k)o(ernel)f
(in)m(v)n(o-)2040 4393 y(cation)h(therefore)e(in)m(v)n(olv)o(es)h(a)i
(more)e(comple)o(x)f(ar)o(gument)g(speci\002-)2040 4484
y(cation)e(and)g(a)h(greater)f(amount)f(of)i(data)f(manipulation.)k
(The)c(com-)2040 4575 y(mon)d(ar)o(gument)e(structure)h(allo)n(ws)i
(processes)f(to)h(transparently)d(in-)2040 4667 y(terpose)19
b(on)g(capability)g(in)m(v)n(ocations,)f(emulating)g(the)i(original)e
(ob-)2040 4758 y(ject;)29 b(in)d(this)g(case)g(function)e(w)o(as)i(f)o
(a)n(v)n(ored)f(o)o(v)o(er)f(performance)f(in)2040 4849
y(the)d(design.)2040 5087 y Fo(6.2)99 b(Memory)25 b(handling)2040
5234 y Fm(T)-7 b(w)o(o)18 b(benchmarks)e(are)i(used)f(to)h(e)o(xamine)f
(memory)f(performance:)2040 5326 y(page)i(f)o(ault)h(and)g(heap)f(gro)n
(wth.)23 b(The)c(page)f(f)o(ault)h(benchmark)e(mea-)2040
5417 y(sures)i(the)f(time)h(to)f(reconstruct)f(page)h(table)g(entries)g
(for)g(a)h(memory)1878 5726 y(180)p eop
%%Page: 181 12
181 11 bop -93 -2 1875 4 v -93 1658 4 1661 v 1779 1658
V -93 1661 1875 4 v 530 -2 920 4 v 530 1658 4 1661 v
1446 1658 V 530 1661 920 4 v -93 -2 1875 4 v -93 164
4 167 v 1779 164 V -93 167 1875 4 v -48 1567 a Fm(T)m(ri)n(vial)20
b(Syscall)533 1617 y
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 7208960 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .85 setgray fill
grestore
 533 1617 a 530 1542 920 4 v 530
1617 4 75 v 886 1600 a Fm(0.7)g Fg(\026)p Fm(s)p 1446
1617 V 530 1620 920 4 v 533 1542 a
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 8847360 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .95 setgray fill
grestore
 533 1542 a 530 1467
1128 4 v 530 1542 4 75 v 990 1525 a Fm(1.6)g Fg(\026)p
Fm(s)p 1654 1542 V 530 1545 1128 4 v 1568 1517 7 4 v
1568 1559 4 42 v 1572 1559 V 1568 1562 7 4 v 1584 1517
V 1584 1559 4 42 v 1588 1559 V 1584 1562 7 4 v 1568 1451
V 1568 1492 4 42 v 1572 1492 V 1568 1495 7 4 v 1584 1451
V 1584 1492 4 42 v 1588 1492 V 1584 1495 7 4 v 1488 1617
a(-128\045)-48 1359 y(P)o(age)g(F)o(ault)533 1409 y
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 7208960 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .85 setgray fill
grestore
 533
1409 a 530 1334 920 4 v 530 1409 4 75 v 876 1392 a Fm(687)f
Fg(\026)p Fm(s)p 1446 1409 V 530 1412 920 4 v 533 1334
a
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 65536 15800 300 Resolution div mul DVImag div div 589824 -15800
300 VResolution div mul DVImag div div box .95 setgray fill grestore
 533 1334 a 530 1260 15 4 v 530 1334 4 75 v 542 1334
V 530 1337 15 4 v -16 x Fm(3.67)g Fg(\026)p Fm(s)1488
1409 y(99.5\045)-48 1152 y(Gro)n(w)h(Heap)533 1202 y
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 7208960 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .85 setgray fill
grestore

533 1202 a 530 1127 920 4 v 530 1202 4 75 v 845 1184
a Fm(31.74)e Fg(\026)p Fm(s)p 1446 1202 V 530 1205 920
4 v 533 1127 a
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 4653056 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .95 setgray fill
grestore
 533 1127 a 530 1052 597 4 v 530 1127 4
75 v 683 1110 a Fm(20.42)h Fg(\026)p Fm(s)p 1123 1127
V 530 1130 597 4 v 1488 1177 a(35.7\045)-48 944 y(Ctxt)i(Switch)533
994 y
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 7208960 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .85 setgray fill
grestore
 533 994 a 530 919 920 4 v 530 994 4 75 v 866 977
a Fm(1.26)e Fg(\026)p Fm(s)p 1446 994 V 530 997 920 4
v 533 911 a
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 6815744 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .95 setgray fill
grestore
 533 911 a 530 836 871 4 v 530 911 4 75 v
841 894 a Fm(1.19)g Fg(\026)p Fm(s)p 1397 911 V 530 914
871 4 v 1488 928 a(5.5\045)-48 737 y(Create)i(Process)533
786 y
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 7208960 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .85 setgray fill
grestore
 533 786 a 530 712 920 4 v 530 786 4 75 v 858 776
a Fm(1.92)e(ms)p 1446 786 V 530 789 920 4 v 533 703 a
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 2490368 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .95 setgray fill
grestore

533 703 a 530 629 323 4 v 530 703 4 75 v 540 693 a Fm(0.664)e(ms)p
849 703 V 530 706 323 4 v 1488 737 a(65.3\045)-48 529
y(Pipe)j(Bandwidth)533 579 y
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 7208960 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .85 setgray fill
grestore
 533 579 a 530 504 920 4
v 530 579 4 75 v 825 569 a Fm(260)f(MB/s)p 1446 579 V
530 582 920 4 v 533 496 a
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 8716288 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .95 setgray fill
grestore
 533 496 a 530 421 1111 4 v
530 496 4 75 v 920 486 a Fm(281)h(MB/s)p 1637 496 V 530
499 1111 4 v 1488 579 a(8.07\045)-48 322 y(Pipe)g(Latenc)o(y)533
371 y
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 7208960 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .85 setgray fill
grestore
 533 371 a 530 297 920 4 v 530 371 4 75 v 866 354
a Fm(8.34)f Fg(\026)p Fm(s)p 1446 371 V 530 374 920 4
v 533 288 a
 gsave currentpoint translate 0 0 15800 300 VResolution div mul DVImag
div div 4915200 15800 300 Resolution div mul DVImag div div 589824
-15800 300 VResolution div mul DVImag div div box .95 setgray fill
grestore
 533 288 a 530 214 630 4 v 530 288 4 75 v
720 271 a Fm(5.66)g Fg(\026)p Fm(s)p 1156 288 V 530 291
630 4 v 1488 322 a(32.3\045)-48 114 y Fn(Benc)o(hmark)285
b(Linux-Normalized)266 b(Speedup)-152 1833 y Fh(Figure)29
b(11)p Fq(.)47 b(Summar)r(y)30 b(of)g(benchmar)q(k)f(results)o(.)46
b(F)n(or)28 b(pipe)-152 1924 y(bandwidth,)j(larger)d(is)f(better)l(.)43
b(Lin)o(ux)29 b Fp(lmbench)h Fq(results)d(ap-)-152 2015
y(pear)f(in)g(dar)q(k)f(g)o(r)o(a)n(y)-8 b(.)34 b(ER)n(OS)26
b(results)f(are)g(nor)r(maliz)o(ed)h(to)f(the)-152 2107
y(Lin)o(ux)f(n)o(umbers)o(,)f(and)h(appear)f(in)h(lighter)g(g)o(r)o(a)n
(y)-8 b(.)-152 2434 y Fm(object)24 b(that)g(is)h(v)n(alid.)36
b(That)23 b(is,)j(it)f(measures)e(the)h(time)g(to)g(con)m(v)o(ert)-152
2525 y(from)19 b(the)h(logical)f(mapping)f(structures)i(maintained)e
(by)h(the)h(oper)n(-)-152 2616 y(ating)27 b(system)g(to)g(the)g(hardw)o
(are)f(mapping)f(representation.)43 b(The)-152 2708 y(benchmark)26
b(constructs)h(an)h(object,)h(unmaps)d(it,)k(remaps)e(it,)i(and)-152
2799 y(then)c(measures)f(the)h(time)g(to)f(sum)h(the)g(\002rst)g(w)o
(ord)f(of)h(each)f(page.)-152 2890 y(In)31 b(Linux,)i(this)f(operation)
e(tak)o(es)h(687)g Fg(\026)p Fm(s)h(per)f(page.)58 b(The)31
b(cor)n(-)-152 2982 y(responding)d(ER)m(OS)i(operation)e(tak)o(es)j
(3.67)e Fg(\026)p Fm(s)h(per)g(page)f(in)h(the)-152 3073
y(general)c(case,)k(which)c(re\003ects)i(the)f(basic)g(cost)h(of)f(the)
g(node)f(tree)-152 3164 y(tra)n(v)o(ersal.)e(The)19 b(ER)m(OS)g(cost)g
(rises)g(to)g(5.10)f Fg(\026)p Fm(s)i(if)f(the)g(f)o(ast)g(tra)n(v)o
(ersal)-152 3256 y(optimization)g(of)h(Section)g(4.2.1)e(is)j
(disabled.)-27 3347 y(Linux)k(performance)f(on)i(this)i(benchmark)c
(has)j(re)o(gressed)e(in)-152 3438 y(recent)i(v)o(ersions)f(of)h(the)g
(Linux)f(k)o(ernel.)46 b(The)26 b(2.0.34)g(v)o(ersion)g(of)-152
3530 y(the)21 b(Linux)e(k)o(ernel)g(took)g(67)h Fg(\026)p
Fm(s)h(on)f(this)h(operation.)-27 3621 y(If)k(the)g(mapped)e(object)i
(f)o(alls)h(at)g(a)f(page)f(table)i(boundary)-5 b(,)22
b(the)-152 3712 y(latenc)o(y)e(under)f(ER)m(OS)h(f)o(alls)h(to)g(0.08)e
Fg(\026)p Fm(s.)26 b(This)20 b(is)i(due)d(to)i(the)f(page)-152
3804 y(table)g(sharing)f(mechanisms)g(described)g(in)h(Section)g
(4.2.2.)j(ER)m(OS)-152 3895 y(preserv)o(es)c(hardw)o(are)g(mapping)g
(structures)g(as)i(long)e(as)i(it)g(is)g(feasi-)-152
3986 y(ble)h(to)f(do)g(so.)29 b(F)o(or)21 b(ER)m(OS,)h(this)g(measures)
f(a)h(real)f(\(and)g(common\))-152 4078 y(case.)k(P)o(age)19
b(tables)h(may)e(be)i(shared)e(whene)n(v)o(er)f(a)j(ne)n(w)f(instance)g
(of)-152 4169 y(an)g(e)o(xisting)f(application)g(is)i(created.)k(The)18
b(ef)n(fect)h(of)f(sharing)g(code)-152 4260 y(space)k(in)g(such)g
(cases)g(signi\002cantly)f(reduces)g(application)g(startup)-152
4352 y(latencies.)-27 4443 y(Experience)j(with)j(Mach)f(and)g(Chorus)g
(suggested)g(that)g(heap)-152 4534 y(gro)n(wth)21 b(may)g(inhibit)g
(system)g(performance)e(if)j(it)g(is)h(slo)n(w)e([8,)g(21)o(].)-152
4626 y(The)i(POSIX)h(design)f(allo)n(ws)h(the)f(operating)f(system)h
(to)h(grab)e(an)o(y)-152 4717 y(a)n(v)n(ailable)31 b(sw)o(ap)h(page)e
(and)h(zero)g(it.)59 b(W)-7 b(e)32 b(constructed)e(a)i(Linux)-152
4808 y(benchmark)19 b(using)h(the)h Fn(lmbenc)o(h)f Fm(timing)h(frame)n
(w)o(ork,)d(and)j(deter)n(-)-152 4900 y(mined)26 b(that)i(gro)n(wing)d
(the)i(heap)f(by)h(a)g(page)g(tak)o(es)g(31.74)e Fg(\026)p
Fm(s.)47 b(In)-152 4991 y(ER)m(OS,)28 b(the)f(f)o(ault)g(must)h
(\002rst)g(be)f(re\003ected)f(to)i(a)f(user)h(le)n(v)o(el)f(f)o(ault)
-152 5082 y(handler)e(which)g(in)g(turn)g(must)h(call)g(a)g(user)g(le)n
(v)o(el)f(storage)g(alloca-)-152 5174 y(tor)h(as)h(described)d(in)j
(Section)e(5.2,)i(which)e(tak)o(es)h(20.42)f Fg(\026)p
Fm(s.)43 b(The)-152 5265 y(virtual)25 b(cop)o(y)g(handler)g(\002ts)i
(within)e(a)h(small)h(\(address\))d(space,)j(al-)-152
5356 y(lo)n(wing)32 b(tw)o(o)g(of)g(the)g(conte)o(xt)f(switches)i(in)f
(the)g(sequence)f(to)h(be)-152 5448 y(done)19 b(v)o(ery)h(cheaply)e
(\(see)j(belo)n(w\).)2040 81 y Fo(6.3)99 b(Pr)n(ocess)25
b(management)2040 228 y Fm(The)39 b(ER)m(OS)h(implementation')-5
b(s)38 b(\223performance)e(core\224)j(is)h(v)o(ery)2040
319 y(similar)21 b(in)h(structure)e(to)h(that)g(of)g(L3)g([30)o(].)28
b(An)21 b(earlier)g(implemen-)2040 411 y(tation)g(reported)e(in)j([44)n
(])g(matches)e(the)i(performance)c(of)j(L3)g(c)o(ycle)2040
502 y(for)j(c)o(ycle.)39 b(The)25 b(current)e(implementation)g(is)j
(less)g(highly)d(tuned.)2040 593 y(A)h(directed)f(conte)o(xt)g(switch)h
(under)e(ER)m(OS)j(tak)o(es)f(1.60)e Fg(\026)p Fm(s)j(in)f(the)2040
685 y(lar)o(ge)18 b(space)g(case,)h(and)f(1.19)f Fg(\026)p
Fm(s)j(in)e(the)h(case)g(of)f(a)h(control)e(transfer)2040
776 y(between)26 b(a)i(lar)o(ge)e(space)h(and)f(a)i(small)f(space.)46
b(As)28 b(measured)e(by)2040 867 y Fn(lmbenc)o(h)p Fm(,)i(a)f(directed)
g(conte)o(xt)f(switch)h(under)f(Linux)h(tak)o(es)g(1.26)2040
959 y Fg(\026)p Fm(s.)2165 1050 y(These)16 b(latencies)g(do)g(not)h
(compose)e(in)h(ob)o(vious)f(w)o(ays)i(because)2040 1141
y(of)g(cache)g(interference.)22 b(A)17 b(round)f(trip)h(lar)o(ge-lar)o
(ge)d(IPC)k(operation)2040 1233 y(tak)o(es)31 b(3.21)f
Fg(\026)p Fm(s,)35 b(and)30 b(a)i(lar)o(ge-small)d(round)g(trip)i(tak)o
(es)h(2.38)e Fg(\026)p Fm(s,)2040 1324 y(b)n(ut)24 b(a)h(nested)f
(sequence)f(of)h(calls)h(such)f(as)h(that)f(seen)g(in)h(the)f(page)2040
1415 y(allocation)e(path)h(\(lar)o(ge)f(to)h(small)h(to)f(lar)o(ge)f
(and)h(back\))f(tak)o(es)h(6.31)2040 1507 y Fg(\026)p
Fm(s.)2165 1598 y(Where)35 b(POSIX)h(uses)g Fn(fork)i
Fm(and)d Fn(e)n(xec)h Fm(to)g(create)f(ne)n(w)g(pro-)2040
1689 y(cesses,)k(ER)m(OS)c(pro)o(vides)e(a)i(direct)f(method)f(via)h
(the)h(construc-)2040 1781 y(tor)-5 b(.)25 b(Constructors)18
b(can)g(guarantee)g(sandboxing,)e(and)i(are)h(the)g(pre-)2040
1872 y(ferred)i(means)h(of)h(starting)f(ne)n(w)g(program)e(instances.)
32 b(While)23 b(it)g(is)2040 1963 y(therefore)j(the)h(appropriate)e
(mechanism)h(to)h(compare,)g(it)h(should)2040 2055 y(be)k(noted)g(that)
g(the)h Fn(fork)q Fm(/)p Fn(e)n(xec)g Fm(implementation)d(creates)i(an)
h(ad-)2040 2146 y(dress)21 b(space)f(that)g(the)h(ER)m(OS)g
(implementation)d(does)i(not)g(require.)2040 2237 y(Creating)28
b(a)h(cop)o(y)f(of)h(\223hello)f(w)o(orld\224)g(under)f(Linux)h(tak)o
(es)h(1.916)2040 2329 y(ms.)72 b(Using)35 b(a)h(constructor)e(to)i
(create)f(a)h(ne)n(w)g(cop)o(y)e(of)i(\223hello)2040
2420 y(w)o(orld\224)20 b(tak)o(es)g(0.664)f(ms.)2040
2658 y Fo(6.4)99 b(Inter)o(pr)n(ocess)27 b(communication)2040
2805 y Fm(Finally)-5 b(,)28 b(we)f(e)o(xamine)f(streaming)g(data)g
(transfer)g(using)h(the)g(pipe)2040 2896 y(benchmark.)22
b(Of)e(the)f(a)n(v)n(ailable)g(IPC)g(options,)g(pipes)g(are)g(the)g
(most)2040 2988 y(ef)n(\002cient)f(mechanism)g(pro)o(vided)e(in)j
(Linux)e(\(8.34)g Fg(\026)p Fm(s)j(latenc)o(y)-5 b(,)17
b(260)2040 3079 y(MB/sec\).)51 b(The)28 b(ER)m(OS)h(equi)n(v)n(alent)e
(implements)h(pipes)h(using)f(a)2040 3170 y(process)c(\(5.66)g
Fg(\026)p Fm(s,)i(281)e(MB/sec\).)39 b(The)24 b(k)o(e)o(y)h(point)f(to)
g(note)h(here)2040 3262 y(is)i(that)f(for)f(b)n(ulk)g(data)h(transfer)e
(the)i(cost)g(of)g(conte)o(xt)e(switches)i(is)2040 3353
y(much)e(less)j(important)c(than)i(minimizing)e(cache)i(misses.)41
b(ER)m(OS)2040 3444 y(pipe)35 b(bandwidth)e(is)i(maximized)f(using)g
(only)g(4)h(KB)h(transfers.)2040 3536 y(This)d(suggests)g(that)g(IPC)h
(implementations)d(which)i(impose)f(an)2040 3627 y(upper)f(bound)f(on)h
(transfer)g(payload)g(do)g(not)h(impose)f(an)h(inher)n(-)2040
3718 y(ent)d(inef)n(\002cienc)o(y)e(on)h(data)h(transfer)f(rates.)51
b(Bounding)26 b(payloads)2040 3810 y(simpli\002es)e(the)g
(implementation)d(and)i(allo)n(ws)g(the)h(IPC)g(operation)2040
3901 y(to)e(be)f(performed)e(atomically)-5 b(.)28 b(It)22
b(also)g(guarantees)f(that)g(an)o(y)g(con-)2040 3992
y(trol)k(transfer)g(operation)e(can)i(mak)o(e)g(progress)f(gi)n(v)o(en)
g(a)h(relati)n(v)o(ely)2040 4083 y(small)32 b(amount)e(of)h(real)g
(memory)-5 b(,)31 b(eliminating)f(a)i(memory)e(size)2040
4175 y(dependenc)o(y)17 b(at)k(the)f(in)m(v)n(ocation)e(API.)2040
4412 y Fo(6.5)99 b(Other)26 b(measur)n(ements)2040 4560
y Fm(While)17 b(ER)m(OS)g(is)g(not)f(yet)h(running)d(applications,)i
(pre)n(vious)f(imple-)2040 4651 y(mentations)22 b(of)h(the)g
(architecture)e(ha)n(v)o(e)i(been)f(deplo)o(yed)f(with)i(full)2040
4742 y(application)17 b(en)m(vironments.)22 b(An)c(e)n(v)n(aluation)f
(of)i(the)f(performance)2040 4834 y(of)27 b(K)n(e)o(yTXF)-7
b(,)27 b(the)g(K)n(e)o(yK)n(OS)f(transaction)g(manager)f(for)i(the)g
(Sys-)2040 4925 y(tem)20 b(370)f(implementation,)f(is)j(described)d(by)
i(Frantz)f(and)h(Landau)2040 5016 y([16)o(].)29 b(Performance)19
b(on)j(the)f(TP1)h(benchmark)d(ranged)h(from)g(2.57)2040
5108 y(to)28 b(25.7)f(times)h(f)o(aster)g(than)f(other)g(protected)g
(database)g(systems,)2040 5199 y(and)h(scaled)h(linearly)f(with)g(CPU)i
(speed)e(if)h(the)g(I/O)g(system)f(w)o(as)2040 5290 y(also)d(upgraded)c
(for)j(increased)f(capacity)-5 b(.)36 b(IBM')-5 b(s)25
b(TPF)g(w)o(as)g(22\045)2040 5382 y(f)o(aster)i(\(22)f(transactions)g
(per)g(second)g(vs.)h(18)f(for)h(K)n(e)o(yTXF\),)e(b)n(ut)1878
5726 y(181)p eop
%%Page: 182 13
182 12 bop -152 81 a Fm(TPF)22 b(w)o(as)h(an)e(unprotected)e(system;)k
(all)f(TPF)g(applications)e(ran)h(in)-152 172 y(supervisor)e(mode,)g
(and)h(were)g(mutually)f(trusted.)-27 263 y(The)35 b(Motorola)g
(implementation)e(of)j(K)n(e)o(yK)n(OS)f(included)f(a)-152
355 y(full)h(binary-compatible)d(POSIX)j(emulation.)68
b(A)36 b(limited)f(per)n(-)-152 446 y(formance)28 b(e)n(v)n(aluation)g
(w)o(as)i(made)f(against)g(Omron')-5 b(s)29 b(Mach)g(2.5)-152
537 y(implementation)21 b(\(a)h(monolithic)g(k)o(ernel\))f(for)h(the)h
(same)g(machine)-152 629 y([5)o(].)h(Performance)13 b(w)o(as)j(mix)o
(ed,)f(ranging)e(from)i(3.89)f(times)i(slo)n(wer)-152
720 y(than)26 b(Mach)h(performance)c(on)k(opening)d(and)i(closing)g
(\002les)i(to)f(14)-152 811 y(times)20 b(f)o(aster)f(on)f(memory)f
(manipulation.)22 b(The)d(open/close)e(result)-152 903
y(re\003ects)k(a)f(nai)n(v)o(e)g(implementation,)d(as)k(noted)f(in)g
(the)g(paper)-5 b(.)-152 1140 y Fo(6.6)99 b(P)n(erf)n(ormance)26
b(summary)-152 1288 y Fm(The)h(benchmark)e(results)i(are)g(summarized)f
(graphically)f(in)i(Fig-)-152 1379 y(ure)c(11.)34 b(As)24
b(can)g(be)f(seen,)h(ER)m(OS)g(performs)d(f)o(a)n(v)n(orably)h(on)h(6)h
(out)-152 1470 y(of)31 b(7)g(benchmarks.)54 b(W)-7 b(e)32
b(belie)n(v)o(e)e(that)h(this)g(pro)o(vides)e(good,)j(al-)-152
1562 y(though)27 b(ob)o(viously)f(not)i(complete,)i(e)n(vidence)d(that)
h(composition)-152 1653 y(of)c(protected)f(subsystems)i(\(se)n(v)o
(eral)e(of)h(which)g(were)h(used)f(in)g(the)-152 1744
y(ER)m(OS)19 b(benchmarks\))c(need)i(not)g(inhibit)g(system)h
(performance.)k(In)-152 1836 y(addition,)c(it)i(appears)f(that)g
(capability)g(systems)g(can)h(perform)d(well)-152 1927
y(without)j(resorting)f(to)h(specialized)g(hardw)o(are)e(assists.)-152
2174 y Fo(7)100 b(Related)25 b(w)o(ork)-152 2351 y Fm(ER)m(OS')-5
b(s)32 b(relation)e(to)g(T)-7 b(ymShare')i(s)30 b(GNOSIS)h([22)o(])g
(system)g(w)o(as)-152 2443 y(discussed)24 b(in)f(Section)g(1.1.)34
b(Most)24 b(of)f(the)g(GNOSIS)h(architecture)-152 2534
y(is)29 b(preserv)o(ed)c(in)i(ER)m(OS;)h(the)g(scheduler)e(is)i(a)g
(signi\002cant)e(depar)n(-)-152 2625 y(ture)k(from)e(the)i(GNOSIS)f
(design.)53 b(Man)o(y)28 b(of)h(the)h(design)f(docu-)-152
2717 y(ments)i(and)e(papers)h(for)g(the)g(GNOSIS)h(system)f(\(which)g
(w)o(as)h(re-)-152 2808 y(named)17 b(K)n(e)o(yK)n(OS\))g(can)h(be)f
(found)g(at)h(the)g(K)n(e)o(yK)n(OS)f(web)h(site)h([42)n(].)-152
2924 y Fa(Mach)k(and)f(Chorus:)88 b Fm(Both)22 b(Mach)f([20)o(])h(and)f
(Chorus)h([39)n(])g(use)-152 3015 y(capabilities)17 b(for)g
(interprocess)f(communication.)21 b(Mach)16 b(also)i(uses)-152
3107 y(them)26 b(to)h(name)f(memory)f(objects.)44 b(Both)26
b(use)h(e)o(xternal)e(memory)-152 3198 y(managers.)63
b(Neither)33 b(e)o(xternalizes)f(storage)h(allocation)f(or)i(pro-)-152
3289 y(vides)g(persistence,)i(and)d(in)g(both)g(cases)h(the)g(e)o
(xternal)e(memory)-152 3381 y(manager)22 b(has)i(pro)o(v)o(en)d(to)j
(be)g(a)g(source)e(of)i(performance)c(dif)n(\002cul-)-152
3472 y(ties)27 b([21)o(,)f(8].)42 b(Both)27 b(systems)f(are)g(hybrid)e
(designs,)j(in)f(that)g(other)-152 3563 y(system)c(calls)g(are)f
(present)f(in)h(addition)f(to)h(capability)g(in)m(v)n(ocation.)-152
3655 y(While)k(Mach)f(originally)e(started)i(with)h(a)f(single)g
Fn(mac)o(h)p 1525 3655 25 4 v 29 w(msg)g Fm(sys-)-152
3746 y(tem)c(call,)g(additional)e(system)h(calls)h(were)g(later)f
(added)f(for)h(perfor)n(-)-152 3837 y(mance.)-27 3929
y(The)24 b(Mach)h Fi(send-once)f(port)h Fm(bears)g(a)g(close)g
(resemblance)e(to)-152 4020 y(the)28 b(ER)m(OS)g Fi(resume)h
(capability)p Fm(.)46 b(Send-once)26 b(ports)i(can)f(be)h(for)n(-)-152
4111 y(w)o(arded,)j(b)n(ut)e(cannot)f(be)h(copied.)51
b(The)29 b(absence)g(of)g(special)g(se-)-152 4203 y(mantics)20
b(for)e(resume)h(capabilities)g(remo)o(v)o(es)f(a)i(certain)f(amount)f
(of)-152 4294 y(comple)o(xity)29 b(from)g(the)i(ER)m(OS)g(IPC)g(path,)h
(and)e(slightly)h(simpli-)-152 4385 y(\002es)g(the)e(implementation)e
(of)i(deb)n(uggers)f(and)h(capability)f(cache)-152 4477
y(objects.)-152 4593 y Fa(Amoeba:)87 b Fm(Amoeba)20 b([49)n(,)i(50)o(])
f(is)h(a)g(distrib)n(uted)e(capability)g(sys-)-152 4684
y(tem.)58 b(Unlik)o(e)30 b(ER)m(OS,)i(capabilities)e(are)h(protected)f
(by)g(sparsity)-5 b(.)-152 4775 y(Because)25 b(capabilities)g(are)g
(just)g(data,)h(language)d(inte)o(gration)g(and)-152
4867 y(IPC)e(design)e(are)h(greatly)e(simpli\002ed.)25
b(The)19 b(cost)h(of)g(this)g(is)h(that)e(ca-)-152 4958
y(pability)24 b(transfer)g(cannot)f(be)i(detected)f(by)g(a)h(reference)
e(monitor)-5 b(.)-152 5049 y(Mandatory)24 b(access)i(control)f(is)i
(therefore)d(impossible)h(to)h(imple-)-152 5141 y(ment)19
b(outside)g(of)g(the)g(k)o(ernel,)g(and)f(metadata)h(update)f(order)g
(viola-)-152 5232 y(tions)j(are)f(not)g(detectable)f(by)h(the)g(k)o
(ernel.)-27 5323 y(Amoeba)25 b(does)i(not)f(use)h(capabilities)f(for)g
(\002ne)g(grain)g(system)-152 5415 y(resource)37 b(such)h(as)h(pages)e
(and)h(memory)e(mapping)g(structures.)2040 81 y(Storage)29
b(for)f(mapping)g(structures)h(is)h(therefore)e(a)i(hidden)e(o)o(v)o
(er)n(-)2040 172 y(head)20 b(rather)f(than)h(clearly)f(accounted)g(for)
-5 b(.)2040 288 y Fa(L3)26 b(and)g(L4:)95 b Fm(The)25
b(ER)m(OS)h(IPC)g(implementation)e(w)o(as)i(hea)n(vily)2040
380 y(in\003uenced)19 b(by)h(L3)f([30)o(,)i(32)o(])f(and)g(Mach)g(4)g
([14)n(].)26 b(The)19 b(mechanism)2040 471 y(in)d(ER)m(OS)h(is)g
(closer)f(to)g(that)h(of)e(L3,)i(b)n(ut)f(there)g(are)g(some)g
(signi\002cant)2040 562 y(dif)n(ferences.)2165 654 y(L3)34
b(in)m(v)n(ocation)f(is)j(unauthenticated;)k(in)35 b(the)g(absence)f
(of)h(a)2040 745 y(chief)18 b(an)o(y)g(process)f(\(\223task\224)h(in)h
(L3-speak\))d(may)i(in)m(v)n(ok)o(e)f(an)o(y)h(other)2040
836 y(process.)46 b(If)28 b(required,)f(access)h(controls)e(must)i(be)f
(implemented)2040 928 y(by)k(an)h(interv)o(ening)d(process)i(kno)n(wn)f
(as)i(a)g(chief,)i(doubling)29 b(the)2040 1019 y(cost)i(of)f(an)h
(authenticated)d(IPC.)j(The)f(most)h(recent)f(iteration)f(of)2040
1110 y(La)n(v)n(a)40 b(\(the)g(L4)g(successor\))g(incorporates)e(an)i
(IPC)h(redirection)2040 1202 y(mechanism)31 b(that)g(is)i(v)o(ery)e
(similar)h(to)f(capabilities)h([24)o(].)59 b(Ev)o(en)2040
1293 y(in)24 b(the)g(ne)n(west)g(implementation,)e(ho)n(we)n(v)o(er)m
(,)g(capabilities)i(are)g(not)2040 1384 y(transferable.)38
b(T)m(ransferring)23 b(an)i(authority)f(from)g(one)g(process)h(to)2040
1476 y(another)f(requires)g(interaction)g(with)h(the)g(indirection)f
(table)h(man-)2040 1567 y(ager)-5 b(.)2165 1658 y(L3)24
b(is)h(also)f(persistent)g([31)o(],)h(b)n(ut)f(lacks)g(an)g(equi)n(v)n
(alent)f(to)h(the)2040 1750 y(ER)m(OS/K)n(e)o(yK)n(OS)k(consistenc)o(y)
g(check.)50 b(Its)30 b(checkpoint)c(mecha-)2040 1841
y(nism)f(is)g(implemented)e(outside)h(the)h(k)o(ernel)f(by)g(a)h
(memory)e(man-)2040 1932 y(ager)30 b(that)g(has)h(direct)f(access)h(to)
f(k)o(ernel)g(data)g(structures.)55 b(Data)2040 2023
y(structures)34 b(included)e(in)i(the)g(checkpoint)e(are)i(allocated)g
(out)f(of)2040 2115 y(pageable)17 b(memory)-5 b(.)22
b(The)c(k)o(ernel)g(may)f(page)h(f)o(ault)g(on)g(these)h(struc-)2040
2206 y(tures,)27 b(and)e(is)i(designed)d(to)i(reco)o(v)o(er)d(when)i
(it)i(does)e(so.)42 b(Because)2040 2297 y(the)15 b(k)o(ernel)g
(directly)f(uses)i(process)f(structure)f(addresses)h(\(i.e.)24
b(there)2040 2389 y(is)i(no)e(indirection\),)g(an)o(y)g(change)g(in)h
(the)g(size)h(of)e(the)h(k)o(ernel)f(pro-)2040 2480 y(cess)29
b(table)g(or)f(other)g(checkpointed)d(k)o(ernel)j(tables)h(renders)e
(pre-)2040 2571 y(vious)f(checkpoints)f(unusable.)42
b(This)27 b(is)g(not)f(a)h(limitation)f(of)g(the)2040
2663 y(current)19 b(ER)m(OS)i(mechanism.)2040 2779 y
Fa(Fluk)o(e:)89 b Fm(Fluk)o(e)21 b([13)o(])h(is)g(a)h(capability)d(k)o
(ernel)h(that)h(also)g(pro)o(vides)2040 2870 y(persistence.)54
b(Its)31 b(hierarchical)d(resource)h(management)f(mecha-)2040
2962 y(nisms)19 b(are)g(similar)g(to)g(those)g(pro)o(vided)d(by)i(the)h
(ER)m(OS)g(space)g(bank)2040 3053 y(and)f(the)h(meter)g(mechanism)f(of)
g(K)n(e)o(yK)n(OS.)g(Lik)o(e)h(L3,)f(Fluk)o(e')-5 b(s)20
b(per)n(-)2040 3144 y(sistence)31 b(is)g(implemented)e(by)h(a)h(user)n
(-le)n(v)o(el)e(pager)m(,)j(b)n(ut)e(its)i(per)n(-)2040
3236 y(formance)c(is)i(unreported.)51 b(Also)30 b(lik)o(e)f(L3,)j(Fluk)
o(e')-5 b(s)30 b(persistence)2040 3327 y(mechanism)19
b(lacks)h(a)h(consistenc)o(y)e(check.)2040 3443 y Fa(Cache)25
b(K)n(er)o(nel:)95 b Fm(The)24 b(Cache)h(K)n(ernel)g([6)o(])g(uses)h(a)
g(caching)e(ap-)2040 3534 y(proach)c(in)i(some)f(w)o(ays)h(similar)g
(to)g(ER)m(OS.)f(Where)h(ER)m(OS)g(writes)2040 3626 y(operating)14
b(system)i(objects)g(\(Processes\))g(back)f(to)h(protected)f(struc-)
2040 3717 y(tures)20 b(\(Nodes\),)e(the)i(Cache)g(K)n(ernel)f(writes)h
(this)h(state)f(back)f(to)h(un-)2040 3808 y(trusted)g(application)f(k)o
(ernels.)2040 3925 y Fa(Hydra)c(and)h(CAL/TSS:)77 b Fm(Hydra)14
b([56)o(])i(and)f(CAL/TSS)h(are)g(early)2040 4016 y(softw)o(are)31
b(capability)f(systems.)57 b(Neither)31 b(w)o(as)g(persistent.)57
b(HY)-9 b(-)2040 4107 y(DRA)18 b(incorporates)e(a)i(port-based)d(store)
i(and)g(forw)o(ard)f(messaging)2040 4199 y(system,)31
b(which)e(reduces)f(its)i(messaging)e(performance.)48
b(CAL)-8 b(')j(s)2040 4290 y(messaging)16 b(is)h(unb)n(uf)n(fered)c
(and)j(portless,)h(and)f(pro)o(vides)f(no)h(multi-)2040
4381 y(cast)21 b(mechanism.)k(CAL)c(also)f(pro)o(vides)f(an)h(\223e)n
(v)o(ent\224)g(mechanism,)2040 4473 y(allo)n(wing)c(a)i(bounded)d
(number)g(of)i(one)g(w)o(ord)g(messages)g(to)h(be)f(sent)2040
4564 y(asynchronously)h(to)j(the)g(recipient.)26 b(Of)21
b(the)g(early)f(capability)g(sys-)2040 4655 y(tems,)g(the)f(CAL)h
(design)e(most)i(closely)f(resembles)g(that)g(of)g(ER)m(OS.)2040
4772 y Fa(CAP:)87 b Fm(The)27 b(Cambridge)f(CAP)i(computer)e([55)n(])i
(is)g(a)g(hardw)o(are)2040 4863 y(capability)j(system)h(in)g(which)f
(capabilities)g(name)h(both)f(protec-)2040 4954 y(tion)f(domains)f(and)
h(memory)e(se)o(gments.)54 b(The)30 b(hardw)o(are)f(assist)2040
5045 y(pro)o(vided)23 b(by)h(the)i(capability)e(cache)g(pro)o(vided)f
(adequate)h(perfor)n(-)2040 5137 y(mance)h(for)g(lar)o(ge)f(grain)h
(objects,)i(b)n(ut)e(use)h(of)f(memory)f(capabili-)2040
5228 y(ties)17 b(to)g(describe)e(language-grain)e(objects)j(\(e.g.,)f
(structures)h(rather)2040 5319 y(than)h(pages\))f(leads)h(to)h(higher)n
(-frequenc)o(y)12 b(dereferencing)i(of)j(capa-)2040 5411
y(bilities)24 b(than)e(the)h(hardw)o(are)f(can)h(ef)n(fecti)n(v)o(ely)e
(support.)32 b(Also,)24 b(the)1878 5726 y(182)p eop
%%Page: 183 14
183 13 bop -152 81 a Fm(incorporation)18 b(of)j Fn(nested)i
Fm(memory)c(capabilities)h(in)i(the)e(architec-)-152
172 y(ture,)h(while)g(not)f(leading)g(to)h(in-cache)e(comple)o(xity)-5
b(,)19 b(considerably)-152 263 y(complicates)h(capability)f(cache)h
(miss)h(processing.)-152 377 y Fa(Intel)33 b(i432:)108
b Fm(The)31 b(Intel)h(i432)f([37)o(])h(w)o(as)h(originally)e(designed)
-152 468 y(as)e(an)f(AD)m(A)g(machine,)h(and)e(ultimately)h(turned)e
(into)i(an)g(object-)-152 560 y(based)20 b(hardw)o(are)e(system.)25
b(A)c(deri)n(v)n(ati)n(v)o(e)d(se)o(gmentation)f(architec-)-152
651 y(ture)h(can)h(be)f(seen)h(today)e(in)i(the)f(i386.)24
b(The)18 b(i432)f(w)o(as)j(designed)d(as)-152 742 y(a)26
b(high)e(le)n(v)o(el)g(language)g(machine.)38 b(Architecturally)-5
b(,)24 b(it)h(is)h(a)g(v)o(ery)-152 834 y(comple)o(x)d(machine,)g(and)h
(its)h(performance)c(suf)n(fers)j(dramatically)-152 925
y(as)d(a)g(result)f([7)o(].)-152 1038 y Fa(ExOS:)87 b
Fm(MIT')-5 b(s)28 b(Exok)o(ernel)d([11)o(])i(pro)o(vides)f(an)h
(alternati)n(v)o(e)f(ap-)-152 1130 y(proach)32 b(to)h(application-le)n
(v)o(el)e(resource)h(management.)62 b(Where)-152 1221
y(the)20 b(ER)m(OS)f(k)o(ernel)g(e)o(xports)f(k)o(ernel-protected)e
(entities,)k(the)f(e)o(xok-)-152 1312 y(ernel)d(architecture)e(reor)o
(ganizes)f(critical)j(data)g(structures)f(to)h(allo)n(w)-152
1404 y(processes)29 b(direct)h(access,)i(and)d(pins)g(these)h
(structures)f(in)g(mem-)-152 1495 y(ory)-5 b(.)54 b(This)31
b(approach)d(eliminates)i(the)h(need)e(for)h(data)g(copies)g(in)-152
1586 y(man)o(y)15 b(cases,)j(at)f(the)f(cost)g(of)g(e)o(xposing)f(a)h
(more)g(comple)o(x)e(interf)o(ace)-152 1678 y(contract)30
b(to)g(the)g(application.)54 b(What)31 b(maintainability)d(implica-)
-152 1769 y(tions)19 b(this)h(may)e(ha)n(v)o(e)h(for)f(long-term)f
(compatibility)g(as)j(interf)o(aces)-152 1860 y(e)n(v)n(olv)o(e)25
b(remain)g(unclear)-5 b(.)41 b(Gre)o(g)25 b(Ganger)m(,)g(one)g(of)h
(the)f(Exok)o(ernel)-152 1952 y(designers,)h(has)g(noted)f(that)h(the)g
(design)f(of)g(generally)f(usable)i(in-)-152 2043 y(terf)o(aces)20
b(in)h(e)o(xok)o(ernel)d(remains)h(a)i(challenge)e([17)o(].)-27
2134 y(The)47 b(Exok)o(ernel)e(uses)i(hierarchically-named)c
(credentials)-152 2226 y(called)25 b(capabilities)g([33)n(],)h(b)n(ut)f
(these)g(are)g(not)g(capabilities)f(in)h(the)-152 2317
y(traditional)h(sense.)45 b(The)o(y)26 b(do)g(not)h(name)f(tar)o(get)g
(objects,)i(nor)e(di-)-152 2408 y(rectly)31 b(authorize)e(access,)k(b)n
(ut)e(rather)f(contain)g(encoded)f(princi-)-152 2500
y(pals)c(that)g(the)g(k)o(ernel)f(checks)g(against)g(access-control)f
(lists.)40 b(Ex-)-152 2591 y(ok)o(ernel)28 b(capabilities)h(are)g(more)
f(akin)h(to)g(an)g(e)o(xtensible)g(uid/gid)-152 2682
y(abstraction.)-152 2927 y Fo(8)100 b(Conclusion)-152
3104 y Fm(ER)m(OS')38 b(basic)g(abstractions)g(and)f(implementation)f
(techniques)-152 3195 y(can)41 b(realize)f(an)h(ef)n(\002cient)f
(capability)g(system)g(on)h(commodity)-152 3287 y(hardw)o(are.)46
b(Microbenchmark)24 b(performance)h(measurements)h(in)-152
3378 y(comparison)e(with)i(Linux)f(are)h(quite)g(good.)40
b(Results)27 b(from)e(other)-152 3469 y(microk)o(ernels)i(sho)n(w)i
(that)g(microbenchmark)c(results)k(do)g(not)f(al-)-152
3561 y(w)o(ays)21 b(translate)f(into)g(strong)f(application)g
(performance.)-27 3652 y(A)h(full)g(v)n(alidation)f(of)g(our)g
(performance)e(claim)j(requires)f(app-)-152 3743 y(lication\226le)n(v)o
(el)37 b(benchmarks.)78 b(The)38 b(construction)f(of)h(a)h(nati)n(v)o
(e)-152 3835 y(ER)m(OS)f(e)o(x)o(ecution)d(en)m(vironment)f(is)k(e)o
(xpected)e(to)h(tak)o(e)g(se)n(v)o(eral)-152 3926 y(people)27
b(another)f(year)m(,)j(after)e(which)g(it)i(will)f(be)g(possible)f(to)h
(per)n(-)-152 4017 y(form)16 b(such)h(measurements.)22
b(The)17 b(conclusion)e(at)i(this)g(stage)h(is)f(that)-152
4109 y(b)n(uilding)g(such)h(an)g(en)m(vironment)d(is)k(w)o(orth)f
(pursuing.)k(Experience)-152 4200 y(with)h(K)n(e)o(yK)n(OS)e([5,)h(16)o
(])h(suggests)f(that)h(the)f(microbenchmark)d(re-)-152
4291 y(sults)g(reported)c(here)i(approximately)e(predict)i(real)g
(system)h(perfor)n(-)-152 4383 y(mance.)-27 4474 y(The)29
b(design)g(presented)f(here)h(incorporates)f(both)g(user)n(-le)n(v)o
(el)-152 4565 y(f)o(ault)j(handling,)g(which)f(is)i(not)e(uncommon)e
(in)j(modern)e(micro-)-152 4657 y(k)o(ernels,)23 b(and,)g(uniquely)f
(as)i(f)o(ar)f(as)g(we)h(kno)n(w)-5 b(,)22 b(user)n(-le)n(v)o(el)g
(storage)-152 4748 y(allocation.)37 b(Performance)22
b(does)i(not)g(appear)f(to)h(suf)n(fer)g(from)f(do-)-152
4839 y(ing)e(so.)28 b(W)-7 b(e)22 b(belie)n(v)o(e)e(this)h(result)g
(stems)h(from)e(four)f(aspects)j(of)e(the)-152 4931 y(design:)-65
5085 y(1.)37 b(The)25 b(primiti)n(v)o(e)f(abstractions)g(implemented)f
(by)i(the)g(k)o(ernel)35 5176 y(map)19 b(directly)g(to)g(the)g
(abstractions)g(supported)e(by)i(the)h(hard-)35 5267
y(w)o(are.)k(The)18 b(\223semantic)f(gap\224)f(between)h(the)h(tw)o(o)g
(is)g(minimal.)-65 5386 y(2.)37 b(ER)m(OS)18 b(f)o(ault)e(handlers)g
(\226)h(in)h(particular)d(memory)g(handlers)h(\226)35
5477 y(are)21 b(less)g(comple)o(x)e(than)i(those)f(of)g(similarly)h
(user)n(-managed)2227 81 y(designs.)56 b(The)30 b(memory)f(handler)h
(is)h(responsible)f(for)g(ad-)2227 172 y(dress)20 b(v)n(alidation)e
(and)i(storage)f(pro)o(visioning,)e(b)n(ut)j(does)g Fn(not)2227
263 y Fm(mak)o(e)27 b(decisions)f(about)g(paging)g(polic)o(y)g(or)h
(resource)f(arbi-)2227 355 y(tration)k(among)f(competing)g(clients.)57
b(This)30 b(is)i(in)f(contrast)2227 446 y(to)22 b(Mach)g([21)n(])g(and)
g(La)n(v)n(a,)g(where)f(all)i(of)e(these)h(policies)g(are)2227
537 y(implemented)e(by)h(a)h(single)g(piece)f(of)h(code.)28
b(It)22 b(is)h(similar)f(in)2227 629 y(this)f(re)o(gard)d(to)i(Fluk)o
(e)g([13)o(].)2127 749 y(3.)37 b(While)50 b(encapsulated,)56
b(the)50 b(k)o(ernel)g(directly)f(e)o(xports)g(a)2227
841 y(machine-independent)44 b(interf)o(ace)k(to)h(address)f(mapping)
2227 932 y(structures.)39 b(This)25 b(allo)n(ws)g(portable)f(memory)f
(managers)h(to)2227 1023 y(perform)f(optimizations)h(that)i(are)f(not)h
(possible)f(when)g(this)2227 1115 y(metadata)g(is)h(opaque)e(to)h(the)g
(handler)-5 b(.)40 b(In)25 b(contrast,)h(Exok-)2227 1206
y(ernel')-5 b(s)21 b(e)o(xported)f(memory)g(interf)o(ace)h(is)h
(machine-speci\002c)2227 1297 y([11)o(].)2127 1418 y(4.)37
b(ER)m(OS')-5 b(s)25 b(selection)e(of)h(basic)g(abstractions)f(enables)
h(a)g(soft-)2227 1509 y(w)o(are)j(caching)f(design)h(model,)h(which)f
(in)g(turn)g(allo)n(ws)g(the)2227 1601 y(implementation)35
b(to)i(use)g(machine-dependent)c(represen-)2227 1692
y(tations)44 b(when)g(performance)e(is)j(critical)g(and)f(machine-)2227
1783 y(independent)32 b(representations)g(for)i(lo)n(w-lik)o(elihood)d
(cases)2227 1875 y(or)20 b(more)f(portable)g(code.)2165
2040 y(Roughly)35 b(22\045)i(of)g(the)g(current)f(k)o(ernel)g(code)g
(is)i(Pentium-)2040 2131 y(speci\002c.)29 b(An)21 b(additional)f(9\045)
i(relates)f(to)h(hierarchical)e(page)g(table)2040 2222
y(management)f(or)h(node)g(tree)g(tra)n(v)o(ersal,)g(and)g(w)o(ould)g
(be)h(reused)f(for)2040 2314 y(similar)e(translation)e(architectures,)h
(such)g(as)h(the)g(Motorola)e(68000)2040 2405 y(or)k(88000)e(or)i(the)g
(Sun)g(SP)-8 b(ARC.)2165 2496 y(The)46 b(ER)m(OS)i(constructor)d
(mechanism)h(pro)o(vides)f(a)j(basic)2040 2588 y(b)n(uilding)17
b(block)h(for)g(ER)m(OS')-5 b(s)20 b(user)n(-le)n(v)o(el)d(mandatory)g
(access)i(con-)2040 2679 y(trol)h(mechanism.)k(Its)d(correctness)e(has)
h(been)g(pro)o(v)o(en)e(in)i([46)o(].)2165 2770 y(The)30
b(principal)f(f)o(ailing)h(of)g(capabilities)g(is)h(dif)n(\002culty)f
(of)g(ad-)2040 2862 y(ministration.)i(In)22 b(the)h(absence)f(of)g(a)i
(reference)d(monitor)m(,)g(there)h(is)2040 2953 y(no)29
b(direct)g(w)o(ay)h(to)g(say)g(\223Fred)f(may)g(not)g(use)h(this)g
(object.)-6 b(\224)53 b(The)2040 3044 y(K)n(e)o(ySafe)31
b(system)h([38)o(])f(pro)o(vides)f(one)i(means)f(to)h(do)f(so)h(within)
2040 3136 y(a)27 b(capability)e(frame)n(w)o(ork.)41 b(Mechanisms)25
b(appropriate)f(for)i(\003e)o(xi-)2040 3227 y(ble)c(mandatory)d(access)
j(controls)f(ha)n(v)o(e)f(been)h(e)o(xplored)f(in)h(DT)o(OS)2040
3318 y([40)o(])k(and)f(Flask)h([48)o(].)39 b(W)m(ith)25
b(ER)m(OS)g(illustrating)f(ho)n(w)g(to)h(imple-)2040
3410 y(ment)20 b(capability)f(designs)h(ef)n(\002ciently)g(on)g
(commodity)e(hardw)o(are,)2040 3501 y(a)i(logical)e(ne)o(xt)g(step)i
(is)g(to)f(pursue)f(unifying)f(the)i(tw)o(o)g(mechanisms)2040
3592 y(ef)n(\002ciently)-5 b(.)2165 3684 y(The)19 b(ER)m(OS)h(system)f
(currently)f(runs)h(on)g(Pentium)g(class)h(hard-)2040
3775 y(w)o(are.)29 b(The)21 b(system)h(is)g(a)n(v)n(ailable)f(for)g(do)
n(wnload)f(from)g(the)i(ER)m(OS)2040 3866 y(web)41 b(site)h([41)n(].)88
b(The)40 b(do)n(wnloadable)f(packages)g(include)h(the)2040
3958 y(benchmarks)28 b(presented)g(here.)54 b(A)30 b(number)e(of)h
(groups)g(are)h(cur)n(-)2040 4049 y(rently)20 b(proceeding)e(with)j(v)n
(arious)e(enhancements)f(of)j(the)f(system,)2040 4140
y(including)g(one)i(that)g(is)h(de)n(v)o(eloping)c(a)j(commercial)f
(product)f(b)n(uilt)2040 4232 y(on)g(ER)m(OS.)2040 4478
y Fo(9)100 b(Ackno)o(wledgements)2040 4655 y Fm(Se)n(v)o(eral)25
b(people)g(of)n(fered)f(comments)h(and)h(feedback)e(that)i(signif-)2040
4747 y(icantly)g(impro)o(v)o(ed)e(this)j(paper)-5 b(.)43
b(W)-7 b(e)27 b(particularly)e(wish)i(to)f(thank)2040
4838 y(Leendert)i(V)-9 b(an)30 b(Doorn,)g(Marc)f(Auslander)m(,)i(and)e
(Bruce)g(Lindsay)2040 4929 y(of)22 b(IBM,)g(Norman)e(Hardy)h(of)h
(Agorics,)g(Inc.,)f(Charlie)h(Landau)e(of)2040 5021 y(Compaq)e
(Computer)m(,)f(and)h(Bill)i(Frantz)e(of)g(Electronic)g(Communi-)2040
5112 y(ties,)j(Inc.)26 b(Maria)20 b(Ebling)g(of)g(IBM)h(did)f(a)h
(thoughtful)d(critique)i(that)2040 5203 y(signi\002cantly)i(helped)g
(the)i(clarity)e(of)h(the)g(paper)-5 b(.)33 b(Jay)24
b(Lepreau)d(of)2040 5295 y(Uni)n(v)o(ersity)g(of)i(Utah)f(w)o(as)i
(kind)e(enough)e(to)j(shepherd)e(this)i(paper)m(,)2040
5386 y(and)f(pro)o(vided)e(useful)i(feedback.)30 b(Mik)o(e)23
b(Hibler)m(,)f(also)h(of)f(Uni)n(v)o(er)n(-)2040 5477
y(sity)e(of)g(Utah,)f(suggested)g(se)n(v)o(eral)g(useful)g
(clari\002cations.)24 b(W)-7 b(e)21 b(also)1878 5726
y(183)p eop
%%Page: 184 15
184 14 bop -152 81 a Fm(wish)31 b(to)f(thank)f(Roger)g(Needham)g(for)h
(discussions)f(about)g(CAP)-152 172 y(and)18 b(the)h(use)f(of)g
(capability)g(systems)g(in)h(acti)n(v)o(e)f(netw)o(orking)e(appli-)-152
263 y(cations.)-152 510 y Fo(Refer)n(ences)-152 688 y
Fm([1])78 b(M.)17 b(Acceta,)h(R.)g(V)-11 b(.)17 b(Baron,)g(W)-8
b(.)19 b(Bolosk)o(y)-5 b(,)16 b(D.)h(B.)h(Golub,)f(R.)h(F)-7
b(.)24 779 y(Rashid,)27 b(A.)f(T)-6 b(e)n(v)n(anian)25
b(Jr)-5 b(.,)28 b(and)d(M.)h(W)-8 b(.)27 b(Y)-9 b(oung.)46
b(Mach:)36 b(A)24 870 y(ne)n(w)15 b(k)o(ernel)g(foundation)e(for)i
(UNIX)g(de)n(v)o(elopment.)h(In)f Fn(Pr)l(oc.)24 962
y(1986)34 b(USENIX)h(Summer)h(T)-8 b(ec)o(hnical)34 b(Confer)m(ence)p
Fm(,)39 b(pages)24 1053 y(93\226112,)18 b(June)i(1986.)-152
1191 y([2])78 b(A.)25 b(Aik)o(en)f(and)f(D.)i(Gay)-5
b(.)42 b(Memory)22 b(management)h(with)h(e)o(x-)24 1282
y(plicit)37 b(re)o(gions.)80 b(In)37 b Fn(Pr)l(oc.)f(Principles)h(of)g
(Pr)l(o)o(gr)o(amming)24 1373 y(Langua)o(g)o(es)p Fm(,)e(pages)f
(313\226323,)g(Montreal,)i(Canada,)h(June)24 1465 y(1998.)19
b(A)m(CM.)-152 1603 y([3])78 b(A.)23 b(Ba)o(wden.)38
b(PCLSRing:)31 b(K)n(eeping)22 b(process)g(state)i(modu-)24
1694 y(lar)-5 b(.)49 b(Unpublished)25 b(report.)g
(ftp://ftp.ai.mit.edu/pub/alan/-)24 1785 y(pclsr)-5 b(.memo,)19
b(1989.)-152 1923 y([4])78 b(W)-8 b(.)20 b(E.)f(Boebert.)27
b(On)19 b(the)g(inability)f(of)h(an)g(unmodi\002ed)e(capa-)24
2014 y(bility)25 b(machine)f(to)h(enforce)f(the)h(*-property)-5
b(.)42 b(In)25 b Fn(Pr)l(oc.)g(7th)24 2106 y(DoD/NBS)f(Computer)g
(Security)g(Confer)m(ence)p Fm(,)g(pages)g(291\226)24
2197 y(293,)15 b(Gaithersb)n(ur)o(g,)f(MD,)i(USA,)f(Sept.)h(1984.)d
(National)i(Bu-)24 2288 y(reau)20 b(of)g(Standards.)-152
2426 y([5])78 b(A.)34 b(C.)g(Bomber)o(ger)m(,)g(A.)g(P)-9
b(.)34 b(Frantz,)i(W)-8 b(.)35 b(S.)f(Frantz,)i(A.)e(C.)24
2517 y(Hardy)-5 b(,)19 b(N.)i(Hardy)-5 b(,)19 b(C.)i(R.)g(Landau,)e
(and)h(J.)h(S.)g(Shapiro.)29 b(The)24 2609 y(K)n(e)o(yK)n(OS)j(nanok)o
(ernel)e(architecture.)68 b(In)33 b Fn(Pr)l(oc.)g(USENIX)24
2700 y(W)-8 b(orkshop)28 b(on)g(Micr)l(o-K)m(ernels)h(and)e(Other)i(K)m
(ernel)g(Ar)m(c)o(hi-)24 2791 y(tectur)m(es)p Fm(,)46
b(pages)40 b(95\226112.)d(USENIX)k(Association,)k(Apr)-5
b(.)24 2883 y(1992.)-152 3021 y([6])78 b(D.)18 b(R.)h(Cheriton)e(and)g
(K.)h(J.)h(Duda.)k(A)c(caching)e(model)g(of)g(op-)24
3112 y(erating)24 b(system)i(k)o(ernel)f(functionality)-5
b(.)43 b(In)25 b Fn(Pr)l(oc.)g(USENIX)24 3203 y(Symposium)j(on)g(Oper)o
(ating)f(Systems)j(Design)e(and)g(Imple-)24 3295 y(mentation)p
Fm(,)16 b(pages)h(179\226193.)d(USENIX)j(Association,)g(No)o(v)-5
b(.)24 3386 y(1994.)-152 3524 y([7])78 b(R.)25 b(P)-9
b(.)24 b(Col)o(well,)h(E.)f(F)-7 b(.)25 b(Gehringer)m(,)d(and)h(E.)h
(D.)g(Jensen.)41 b(Per)n(-)24 3615 y(formance)22 b(ef)n(fects)h(of)g
(architectural)g(comple)o(xity)e(in)j(the)g(in-)24 3706
y(tel)40 b(432.)89 b Fn(A)n(CM)39 b(T)-5 b(r)o(ansactions)39
b(on)f(Computer)h(Systems)p Fm(,)24 3798 y(6\(3\):296\226339,)15
b(Aug.)20 b(1988.)-152 3935 y([8])78 b(R.)21 b(Dean)f(and)g(F)-7
b(.)22 b(Armand.)28 b(Data)21 b(mo)o(v)o(ement)d(in)j(k)o(ernelized)24
4027 y(systems.)26 b(In)18 b Fn(Pr)l(oc.)h(USENIX)f(W)-8
b(orkshop)18 b(on)g(Micr)l(o-k)o(ernels)24 4118 y(and)k(Other)i(K)m
(ernel)f(Ar)m(c)o(hitectur)m(es)p Fm(,)h(pages)e(243\226262,)f(Seat-)24
4209 y(tle,)g(W)-10 b(A,)20 b(USA,)h(Apr)-5 b(.)20 b(1992.)-152
4347 y([9])78 b(J.)19 b(B.)g(Dennis)g(and)f(E.)g(C.)i(v)n(an)e(Horn.)24
b(Programming)16 b(seman-)24 4439 y(tics)24 b(for)e(multiprogrammed)d
(computations.)35 b Fn(Communica-)24 4530 y(tions)20
b(of)h(the)f(A)n(CM)p Fm(,)g(9\(3\):143\226154,)c(Mar)-5
b(.)20 b(1966.)-152 4668 y([10])36 b(D.)19 b(Eastlak)o(e,)g(R.)h
(Greenblatt,)e(J.)i(Hollo)n(w)o(ay)-5 b(,)18 b(T)-6 b(.)19
b(Knight,)f(and)24 4759 y(S.)i(Nelson.)29 b(Its)20 b(1.5)g(reference)e
(manual.)28 b(Memo)19 b(161a,)g(MIT)24 4850 y(AI)h(Lab,)g(July)g(1969.)
-152 4988 y([11])36 b(D.)42 b(R.)h(Engler)m(,)j(M.)c(F)-7
b(.)43 b(Kaashoek,)j(and)c(J.)g(O'T)-7 b(oole)42 b(Jr)-5
b(.)24 5080 y(Exok)o(ernel:)93 b(An)56 b(operating)d(system)i
(architecture)f(for)24 5171 y(application-le)n(v)o(el)21
b(resource)i(management.)39 b(In)24 b Fn(Pr)l(oc.)g(15th)24
5262 y(Symposium)38 b(on)g(Oper)o(ating)f(Systems)j(Principles)p
Fm(,)j(pages)24 5354 y(251\226266,)17 b(Dec.)j(1995.)2040
81 y([12])36 b(B.)44 b(F)o(ord,)49 b(M.)44 b(Hibler)m(,)k(J.)d
(Lepreau,)j(R.)c(McGrath,)49 b(and)2216 172 y(P)-9 b(.)34
b(T)l(ullmann.)71 b(Interf)o(ace)32 b(and)i(e)o(x)o(ecution)d(models)i
(in)h(the)2216 263 y(\003uk)o(e)e(k)o(ernel.)66 b(In)31
b Fn(Pr)l(oc.)h(3r)m(d)g(Symposium)f(on)h(Oper)o(ating)2216
355 y(System)j(Design)h(and)e(Implementation)p Fm(,)j(pages)e
(101\226115,)2216 446 y(Feb)m(.)19 b(1999.)2040 584 y([13])36
b(B.)24 b(F)o(ord,)g(M.)g(Hibler)m(,)g(J.)h(Lepreau,)e(P)-9
b(.)25 b(T)l(ullmann,)e(G.)h(Beck,)2216 675 y(and)j(S.)i(Cla)o(wson.)55
b(Microk)o(ernels)26 b(meet)i(recursi)n(v)o(e)f(virtual)2216
767 y(machines.)34 b(In)21 b Fn(Pr)l(oc.)h(USENIX)f(Symposium)g(on)h
(Oper)o(ating)2216 858 y(Systems)30 b(Design)f(and)f(Implementation)p
Fm(,)h(pages)g(137\226151.)2216 949 y(USENIX)20 b(Association,)f(Oct.)i
(1996.)2040 1087 y([14])36 b(B.)28 b(F)o(ord)f(and)g(J.)h(Lepreau.)51
b(Ev)n(olving)26 b(Mach)i(3.0)f(to)g(a)h(mi-)2216 1178
y(grating)23 b(threads)h(model.)41 b(In)24 b Fn(Pr)l(oc.)g(W)-5
b(inter)26 b(USENIX)e(Con-)2216 1270 y(fer)m(ence)p Fm(,)c(pages)f
(97\226114,)f(Jan.)i(1994.)2040 1407 y([15])36 b(W)-8
b(.)21 b(Frantz,)e(C.)i(Landau,)d(and)h(N.)h(Hardy)-5
b(.)27 b(Gnosis:)e(A)c(secure)2216 1499 y(operating)29
b(system)j(for)e(the)i('90s.)64 b Fn(SHARE)31 b(Pr)l(oceedings)p
Fm(,)2216 1590 y(1983.)2040 1728 y([16])36 b(W)-8 b(.)16
b(S.)g(Frantz)g(and)e(C.)j(R.)f(Landau.)h(Object)f(oriented)e(transac-)
2216 1819 y(tion)25 b(processing)e(in)j(the)f(K)n(e)o(yK)n(OS)f(microk)
o(ernel.)42 b(In)25 b Fn(Pr)l(oc.)2216 1911 y(USENIX)i(W)-8
b(orkshop)28 b(on)f(Micr)l(o-K)m(ernels)i(and)e(Other)h(K)m(er)n(-)2216
2002 y(nel)23 b(Ar)m(c)o(hitectur)m(es)p Fm(,)g(pages)g(13\22626.)f
(USENIX)h(Association,)2216 2093 y(Sept.)d(1993.)2040
2231 y([17])36 b(G.)20 b(R.)h(Ganger)-5 b(.)29 b(Personal)19
b(Communication,)f(Sept.)i(1999.)2040 2369 y([18])36
b(G.)24 b(R.)h(Ganger)d(and)i(Y)-11 b(.)24 b(N.)g(P)o(att.)42
b(Metadata)23 b(update)g(perfor)n(-)2216 2460 y(mance)17
b(in)g(\002le)i(systems.)k(In)18 b Fn(Pr)l(oc.)f(USENIX)g(Symposium)g
(on)2216 2552 y(Oper)o(ating)22 b(Systems)j(Design)e(and)g
(Implementation)p Fm(,)g(pages)2216 2643 y(49\22660.)18
b(USENIX)i(Association,)f(No)o(v)-5 b(.)19 b(1994.)2040
2781 y([19])36 b(E.)c(F)-7 b(.)32 b(Gehringer)-5 b(.)65
b Fn(Capability)30 b(Ar)m(c)o(hitectur)m(es)i(and)f(Small)2216
2872 y(Objects)p Fm(.)47 b(UMI)26 b(Research)g(Press,)i(Ann)d(Arbor)m
(,)h(Michigan,)2216 2963 y(USA,)20 b(1982.)2040 3101
y([20])36 b(D.)29 b(Golub,)h(R.)g(Dean,)g(A.)g(F)o(orin,)g(and)e(R.)i
(Rashid.)57 b(UNIX)2216 3192 y(as)25 b(an)f(application)f(program.)40
b(In)24 b Fn(Pr)l(oc.)h(USENIX)f(Summer)2216 3284 y(Confer)m(ence)p
Fm(,)19 b(pages)h(87\22696,)e(June)i(1990.)2040 3422
y([21])36 b(D.)e(B.)h(Golub)e(and)h(R.)h(P)-9 b(.)35
b(Dra)n(v)o(es.)73 b(Mo)o(ving)33 b(the)h(def)o(ault)2216
3513 y(memory)14 b(manager)g(out)i(of)f(the)h(Mach)g(k)o(ernel.)j(In)c
Fn(Pr)l(oc)h(of)g(the)2216 3604 y(Usenix)k(Mac)o(h)g(Symposium)p
Fm(,)e(pages)i(177\226188,)d(No)o(v)-5 b(.)19 b(1991.)2040
3742 y([22])36 b(N.)25 b(Hardy)-5 b(.)44 b(The)25 b(K)n(e)o(yK)n(OS)f
(architecture.)44 b Fn(Oper)o(ating)23 b(Sys-)2216 3833
y(tems)e(Re)o(vie)o(w)p Fm(,)e(pages)h(8\22625,)f(Oct.)h(1985.)2040
3971 y([23])36 b(Intel)31 b(Corporation.)62 b Fn(P)-7
b(entium)31 b(Pr)l(ocessor)h(F)-6 b(amily)31 b(User')m(s)2216
4063 y(Manual)p Fm(.)99 b(Intel)42 b(Corporation,)j(Mt.)d(Prospect,)48
b(Illinois,)2216 4154 y(USA,)20 b(1994.)2040 4292 y([24])36
b(T)-6 b(.)27 b(Jae)o(ger)m(,)i(K.)f(Elphinstone,)g(J.)g(Liedtk)o(e,)h
(V)-11 b(.)28 b(P)o(anteleenk)o(o,)2216 4383 y(and)19
b(Y)-11 b(.)20 b(P)o(ark.)27 b(Fle)o(xible)19 b(access)i(control)d
(using)h(IPC)i(redirec-)2216 4474 y(tion.)g(In)16 b Fn(Pr)l(oc.)g(7th)g
(W)-8 b(orkshop)16 b(on)h(Hot)f(T)-8 b(opics)17 b(in)g(Oper)o(ating)
2216 4566 y(Systems)p Fm(,)j(pages)g(191\226196.)d(IEEE,)i(Mar)-5
b(.)21 b(1999.)2040 4703 y([25])36 b(P)-9 b(.)17 b(Kar)o(ger)-5
b(.)21 b Fn(Impr)l(o)o(ving)16 b(Security)g(and)g(P)-7
b(erformance)17 b(for)g(Ca-)2216 4795 y(pability)g(Systems)p
Fm(.)24 b(PhD)18 b(thesis,)g(Uni)n(v)o(ersity)f(of)g(Cambridge,)2216
4886 y(Oct.)j(1988.)28 b(T)-6 b(echnical)19 b(Report)h(No.)g(149.)2040
5024 y([26])36 b(P)-9 b(.)19 b(A.)h(Kar)o(ger)e(and)h(A.)h(J.)g
(Herbert.)26 b(An)20 b(augmented)d(capabil-)2216 5115
y(ity)g(architecture)f(to)h(support)f(lattice)i(security)e(and)h
(traceabil-)2216 5207 y(ity)i(of)g(access.)28 b(In)19
b Fn(Pr)l(oc.)g(of)h(the)f(1984)f(IEEE)h(Symposium)f(on)2216
5298 y(Security)24 b(and)g(Privacy)p Fm(,)i(pages)f(2\22612,)f
(Oakland,)h(CA,)g(Apr)-5 b(.)2216 5389 y(1984.)18 b(IEEE.)1878
5726 y(184)p eop
%%Page: 185 16
185 15 bop -152 81 a Fm([27])36 b(B.)26 b(W)-8 b(.)26
b(Lampson.)43 b(A)25 b(note)g(on)f(the)h(con\002nement)e(problem.)24
172 y Fn(Communications)18 b(of)j(the)f(A)n(CM)p Fm(,)g
(16\(10\):613\226615,)15 b(1973.)-152 307 y([28])36 b(C.)19
b(R.)g(Landau.)24 b(The)18 b(checkpoint)e(mechanism)h(in)i(K)n(e)o(yK)n
(OS)n(.)24 398 y(In)d Fn(Pr)l(oc.)f(Second)g(International)e(W)-8
b(orkshop)16 b(on)f(Object)h(Ori-)24 489 y(entation)37
b(in)i(Oper)o(ating)e(Systems)p Fm(,)43 b(pages)38 b(86\22691.)e(IEEE,)
24 581 y(Sept.)20 b(1992.)-152 715 y([29])36 b(H.)16
b(M.)h(Le)n(vy)-5 b(.)18 b Fn(Capability-Based)c(Computer)i(Systems)p
Fm(.)21 b(Dig-)24 806 y(ital)g(Press,)g(1984.)-152 941
y([30])36 b(J.)25 b(Liedtk)o(e.)42 b(Impro)o(ving)21
b(IPC)26 b(by)e(k)o(ernel)f(design.)42 b(In)24 b Fn(Pr)l(oc.)24
1032 y(14th)16 b(A)n(CM)h(Symposium)e(on)h(Oper)o(ating)f(System)i
(Principles)p Fm(,)24 1124 y(pages)j(175\226188.)d(A)m(CM,)j(1993.)-152
1258 y([31])36 b(J.)31 b(Liedtk)o(e.)60 b(A)30 b(persistent)g(system)g
(in)g(real)h(use)f(\226)g(e)o(xperi-)24 1349 y(ences)25
b(of)h(the)f(\002rst)i(13)e(years.)46 b(In)25 b Fn(Pr)l(oc.)g(3r)m(d)h
(International)24 1441 y(W)-8 b(orkshop)15 b(on)g(Object-Orientation)f
(in)h(Oper)o(ating)f(Systems)p Fm(,)24 1532 y(pages)20
b(2\22611,)e(Ashe)n(ville,)i(N.C.,)g(1993.)-152 1667
y([32])36 b(J.)23 b(Liedtk)o(e.)35 b(Impro)o(v)o(ed)19
b(address-space)i(switching)h(on)g(Pen-)24 1758 y(tium)f(processors)f
(by)h(transparently)e(multiple)o(xing)g(user)i(ad-)24
1849 y(dress)k(spaces.)46 b(T)-6 b(echnical)24 b(Report)h(GMD)g(TR)h
(933,)f(GMD,)24 1940 y(No)o(v)-5 b(.)19 b(1995.)-152
2075 y([33])36 b(D.)23 b(Mazi)5 b(\036)-33 b(eres)23
b(and)g(M.)g(F)-7 b(.)24 b(Kaashoek.)38 b(Secure)23 b(applications)24
2166 y(need)31 b(\003e)o(xible)g(operating)f(systems.)67
b(In)32 b Fn(Pr)l(oc.)g(6th)f(W)-8 b(ork-)24 2258 y(shop)15
b(on)h(Hot)g(T)-8 b(opics)16 b(in)g(Oper)o(ating)f(Systems)p
Fm(,)i(pages)f(56\22661.)24 2349 y(IEEE,)j(May)h(1997.)-152
2483 y([34])36 b(L.)23 b(McV)-11 b(o)o(y)23 b(and)f(C.)i(Staelin.)38
b(lmbench:)30 b(Portable)22 b(tools)h(for)24 2575 y(performance)13
b(analysis.)20 b(In)c Fn(USENIX)f(1996)g(T)-8 b(ec)o(hnical)15
b(Con-)24 2666 y(fer)m(ence)p Fm(,)37 b(pages)d(279\226295,)g(San)h
(Die)o(go,)h(CA,)f(USA,)f(Jan.)24 2757 y(1996.)-152 2892
y([35])i(C.)19 b(W)-8 b(.)19 b(Mercer)m(,)e(S.)i(Sa)n(v)n(age,)f(and)f
(H.)i(T)-7 b(okuda.)23 b(Processor)17 b(ca-)24 2983 y(pacity)f(reserv)o
(es:)23 b(An)17 b(abstraction)f(for)h(managing)e(processor)24
3075 y(usage.)38 b(In)23 b Fn(Pr)l(oc.)g(4th)g(W)-8 b(orkshop)23
b(on)f(W)-8 b(orkstation)23 b(Oper)o(at-)24 3166 y(ing)d(Systems)p
Fm(,)g(pages)g(129\226134,)d(Oct.)j(1993.)-152 3300 y([36])36
b(Motorola,)19 b(Inc.)30 b Fn(MC68851)19 b(P)-7 b(a)o(g)o(ed)20
b(Memory)h(Mana)o(g)o(ement)24 3392 y(Unit)30 b(User')m(s)g(Manual)p
Fm(.)58 b(Engle)n(w)o(ood)27 b(Clif)n(fs,)32 b(Ne)n(w)e(Jerse)o(y)-5
b(,)24 3483 y(USA,)21 b(1986.)-152 3618 y([37])36 b(E.)24
b(I.)g(Or)o(ganick.)38 b Fn(A)24 b(Pr)l(o)o(gr)o(ammer')m(s)g(V)-6
b(ie)o(w)24 b(of)g(the)g(Intel)f(432)24 3709 y(System)p
Fm(.)29 b(McGra)o(w-Hill)20 b(Book)f(Compan)o(y)-5 b(,)18
b(1983.)-152 3843 y([38])36 b(S.)19 b(A.)g(Rajunas.)27
b(The)18 b(K)n(e)o(yK)n(OS/K)n(e)o(ySAFE)f(system)i(design.)24
3935 y(T)-6 b(echnical)32 b(Report)g(SEC009-01,)i(K)n(e)o(y)e(Logic,)j
(Inc.,)g(Mar)-5 b(.)24 4026 y(1989.)28 b(http://www)-5
b(.cis.upenn.edu/\230K)n(e)o(yK)m(OS.)-152 4160 y([39])36
b(M.)50 b(Rozier)m(,)56 b(V)-11 b(.)50 b(Abrossimo)o(v)-5
b(,)55 b(F)-7 b(.)50 b(Armand,)55 b(I.)50 b(Boule,)24
4252 y(M.)c(Gien,)53 b(M.)46 b(Guillemont,)51 b(F)-7
b(.)47 b(Hermann,)k(C.)c(Kaiser)m(,)24 4343 y(S.)23 b(Langlois,)f(P)-9
b(.)23 b(Leonard,)e(and)h(W)-8 b(.)23 b(Neuhauser)-5
b(.)36 b(Ov)o(ervie)n(w)24 4434 y(of)16 b(the)h(Chorus)f(distrib)n
(uted)f(system.)22 b(T)-6 b(echnical)16 b(Report)g(CS-)24
4526 y(TR-90-25,)22 b(Chorus)h(Systemes,)h(F-78182)e(St.)i(Quentin-en-)
24 4617 y(Yv)o(elines)c(Cede)o(x,)f(France,)g(1991.)-152
4752 y([40])36 b(Secure)17 b(Computing)f(Corporation.)k(DT)o(OS)e
(lessons)g(learned)24 4843 y(report.)25 b(T)-6 b(echnical)18
b(Report)g(87-0902025A006,)13 b(June)19 b(1997.)24 4934
y(\224http://www)-5 b(.securecomputing.com)o(/ran)o(dt/tech)o(nical-)24
5026 y(docs.html\224.)-152 5160 y([41])36 b(J.)21 b(S.)f(Shapiro.)28
b Fn(The)21 b(ER)m(OS)e(W)-8 b(eb)21 b(Site)p Fm(.)24
5251 y(http://www)-5 b(.eros-os.or)o(g.)-152 5386 y([42])36
b(J.)21 b(S.)f(Shapiro.)28 b Fn(The)21 b(K)m(e)n(yK)l(OS)f(W)-8
b(eb)20 b(Site)p Fm(.)24 5477 y(http://www)-5 b(.cis.upenn.edu/\230K)n
(e)o(yK)m(OS.)2040 81 y([43])36 b(J.)20 b(S.)h(Shapiro.)27
b Fn(ER)m(OS:)18 b(A)i(Capability)f(System)p Fm(.)29
b(PhD)20 b(thesis,)2216 172 y(Uni)n(v)o(ersity)32 b(of)h(Pennsylv)n
(ania,)i(Philadelphia,)g(P)-8 b(A)34 b(19104,)2216 263
y(1999.)2040 401 y([44])i(J.)23 b(S.)g(Shapiro,)f(D.)g(J.)i(F)o(arber)m
(,)d(and)h(J.)h(M.)g(Smith.)36 b(The)23 b(mea-)2216 493
y(sured)31 b(performance)e(of)j(a)g(f)o(ast)h(local)f(IPC.)67
b(In)32 b Fn(Pr)l(oc.)g(5th)2216 584 y(International)24
b(W)-8 b(orkshop)27 b(on)f(Object)h(Orientation)f(in)h(Op-)2216
675 y(er)o(ating)18 b(Systems)p Fm(,)h(pages)g(89\22694,)e(Seattle,)j
(W)-10 b(A,)19 b(USA,)h(No)o(v)-5 b(.)2216 767 y(1996.)18
b(IEEE.)2040 904 y([45])36 b(J.)f(S.)g(Shapiro,)i(D.)d(J.)h(F)o(arber)m
(,)i(and)d(J.)h(M.)g(Smith.)75 b(State)2216 996 y(caching)20
b(in)j(the)e(eros)h(k)o(ernel)f(\226)h(implementing)e(ef)n(\002cient)h
(or)n(-)2216 1087 y(thogonal)30 b(persistence)h(in)h(a)g(pure)f
(capability)f(system.)66 b(In)2216 1178 y Fn(Pr)l(oc.)22
b(7th)g(International)e(W)-8 b(orkshop)21 b(on)h(P)-7
b(er)o(sistent)23 b(Object)2216 1270 y(Systems)p Fm(,)d(pages)g
(88\226100,)e(Cape)i(May)-5 b(,)19 b(NJ,)i(USA,)f(1996.)2040
1407 y([46])36 b(J.)19 b(S.)h(Shapiro)d(and)i(S.)g(W)-7
b(eber)i(.)27 b(V)-9 b(erifying)17 b(operating)g(system)2216
1499 y(security)-5 b(.)44 b(T)-6 b(echnical)25 b(Report)f
(MS-CIS-97-26,)g(Uni)n(v)o(ersity)2216 1590 y(of)c(Pennsylv)n(ania,)e
(Philadelphia,)g(P)-8 b(A,)21 b(USA,)g(1997.)2040 1728
y([47])36 b(F)-7 b(.)22 b(G.)f(Soltis.)32 b Fn(Inside)21
b(the)g(AS/400)p Fm(.)30 b(Duk)o(e)20 b(Press,)i(Lo)o(v)o(eland,)2216
1819 y(Colorado,)c(1996.)2040 1957 y([48])36 b(R.)23
b(Spencer)m(,)e(S.)i(Smalle)o(y)-5 b(,)22 b(P)-9 b(.)23
b(Losocco,)e(M.)i(Hibler)m(,)f(D.)h(An-)2216 2048 y(dersen,)32
b(and)e(J.)h(Lepreau.)60 b(The)30 b(Flask)h(security)f(architec-)2216
2140 y(ture:)38 b(System)27 b(support)e(for)h(di)n(v)o(erse)g(security)
g(policies.)50 b(In)2216 2231 y Fn(Pr)l(oc.)35 b(8th)g(USENIX)g
(Security)h(Symposium)p Fm(,)h(pages)f(123\226)2216 2322
y(139,)19 b(Aug.)g(1999.)2040 2460 y([49])36 b(A.)d(S.)g(T)-7
b(annenbaum,)33 b(S.)g(J.)g(Mullender)m(,)g(and)f(R.)i(v)n(an)e(Re-)
2216 2552 y(nesse.)46 b(Using)26 b(sparse)f(capabilities)h(in)f(a)h
(distrib)n(uted)f(oper)n(-)2216 2643 y(ating)19 b(system.)27
b(In)19 b Fn(Pr)l(oc.)g(9th)g(International)e(Symposium)h(on)2216
2734 y(Distrib)n(uted)f(Computing)e(Systems)p Fm(,)i(pages)g
(558\226563.)c(IEEE,)2216 2825 y(1986.)2040 2963 y([50])36
b(A.)23 b(S.)h(T)-7 b(annenebaum,)21 b(R.)j(v)n(an)e(Renesse,)i(H.)g(v)
n(an)e(Sta)n(v)o(eren,)2216 3055 y(G.)36 b(J.)g(Sharp,)i(S.)e(J.)g
(Mullender)m(,)h(J.)f(Jansen,)j(and)c(G.)h(v)n(an)2216
3146 y(Rossum.)85 b(Experiences)36 b(with)i(the)g(Amoeba)e(distrib)n
(uted)2216 3237 y(operating)48 b(system.)126 b Fn(Communications)48
b(of)j(the)f(A)n(CM)p Fm(,)2216 3329 y(33\(12\):46\22663,)15
b(Dec.)20 b(1990.)2040 3466 y([51])36 b(K.)18 b(Thompson.)j(UNIX)d
(implementation.)j Fn(The)d(Bell)g(System)2216 3558 y(T)-8
b(ec)o(hnical)19 b(J)n(ournal)p Fm(,)g(57\(6\):1931\2261946)o(,)c(July)
20 b(1978.)2040 3696 y([52])36 b(P)-9 b(.)20 b(T)l(ullmann,)f(J.)i
(Lepreau,)d(B.)j(F)o(ord,)e(and)h(M.)g(Hibler)-5 b(.)29
b(User)n(-)2216 3787 y(le)n(v)o(el)39 b(checkpointing)e(through)g(e)o
(xportable)h(k)o(ernel)h(state.)2216 3878 y(In)25 b Fn(Pr)l(oc.)h(5th)f
(IEEE)g(International)f(W)-8 b(orkshop)25 b(on)h(Object-)2216
3970 y(Orientation)i(in)h(Oper)o(ating)f(Systems)p Fm(,)k(pages)d
(85\22688,)g(Oct.)2216 4061 y(1996.)2040 4199 y([53])36
b(U.S.)16 b(Department)e(of)i(Defense.)k Fn(T)-5 b(rusted)16
b(Computer)g(System)2216 4290 y(Evaluation)i(Criteria)p
Fm(,)j(1985.)2040 4428 y([54])36 b(D.)31 b(S.)h(W)-7
b(allach,)34 b(D.)e(Balf)o(anz,)i(D.)d(Dean,)j(and)c(E.)i(W)-8
b(.)32 b(Fel-)2216 4519 y(ten.)25 b(Extensible)18 b(security)g
(architectures)f(for)h(Ja)n(v)n(a.)26 b(In)18 b Fn(Pr)l(oc.)2216
4610 y(16th)31 b(A)n(CM)i(Symposium)e(on)h(Oper)o(ating)f(Systems)h
(Princi-)2216 4702 y(ples)p Fm(,)20 b(pages)g(116\226128,)d
(Saint-Malo,)i(France,)g(Oct.)i(1997.)2040 4840 y([55])36
b(M.)c(V)-11 b(.)32 b(W)m(ilk)o(es)h(and)e(R.)i(M.)f(Needham.)65
b Fn(The)32 b(Cambridg)o(e)2216 4931 y(CAP)k(Computer)g(and)f(its)i
(Oper)o(ating)e(System)p Fm(.)80 b(Else)n(vier)2216 5022
y(North)19 b(Holland,)g(1979.)2040 5160 y([56])36 b(W)-8
b(.)45 b(A.)f(W)l(ulf,)49 b(R.)c(Le)n(vin,)j(and)43 b(S.)i(P)-9
b(.)44 b(Harbison.)103 b Fn(HY)-6 b(-)2216 5251 y(DRA/C.mmp:)23
b(An)18 b(Experimental)f(Computer)h(System)p Fm(.)24
b(Mc-)2216 5343 y(Gra)o(w)c(Hill,)g(1981.)1878 5726 y(185)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
